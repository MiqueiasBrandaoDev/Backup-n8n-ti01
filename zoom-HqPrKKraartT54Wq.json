{"updatedAt":"2025-08-11T17:42:08.880Z","createdAt":"2025-06-18T16:35:23.820Z","id":"HqPrKKraartT54Wq","name":"ZOOM","active":false,"isArchived":false,"nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-240,272],"id":"dbcd80d2-b34f-4a07-9eef-d0a94f4d1f97","name":"When clicking â€˜Execute workflowâ€™"},{"parameters":{"jsCode":"// String to be encoded\nconst data = \"Mxdugo0ISrE7hzlOCRXag:OYgmzf1Unhu4D7OLTBdFIT5kI6F0LK3s\";\n\n// Encode the string to base64. The string is first encoded to bytes using UTF-8\nconst encodedBytes = Buffer.from(data, 'utf-8').toString('base64');\n\n// Convert the base64 bytes back to a string and print it\nconst encodedStr = encodedBytes;\nconsole.log(encodedStr);\n\n// Return the encoded string for N8N workflow\nreturn [{ json: { encoded_string: encodedStr } }];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[0,-416],"id":"97fd1853-eb2f-4e23-ba94-d1396a8ece46","name":"Code"},{"parameters":{"authentication":"oAuth2","operation":"getAll","limit":5,"filters":{"type":"scheduled"}},"type":"n8n-nodes-base.zoom","typeVersion":1,"position":[224,-624],"id":"1d59b93a-bd90-435e-90a6-2624f46fc5fa","name":"Get many meetings","credentials":{"zoomOAuth2Api":{"id":"3JanzoWVDOcTF1Wp","name":"Zoom account 3"}}},{"parameters":{"method":"POST","url":"https://zoom.us/oauth/token","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/x-www-form-urlencoded"},{"name":"Authorization","value":"=Basic {{ $json.encoded_string }}"}]},"sendBody":true,"contentType":"form-urlencoded","bodyParameters":{"parameters":[{"name":"grant_type","value":"client_credentials"},{"name":"account_id","value":"SXvif_kOSnyCjTtBvHN6jA"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[224,-416],"id":"9c6ee282-c6ee-446d-8533-505c7c038e63","name":"GET ACESS_TOKEN"},{"parameters":{"url":"https://api.zoom.us/v2/users/reunioes@camozziconsultoria.com.br/recordings","sendQuery":true,"queryParameters":{"parameters":[{"name":"page_size","value":"10"},{}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $json.access_token }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[464,-416],"id":"8396381f-86ef-4e6e-911a-b688c843ef02","name":"HTTP Request"},{"parameters":{"jsCode":"// **IMPORTANTE**: CodificaÃ§Ã£o Base64 para autenticaÃ§Ã£o OAuth\n// String formato: client_id:client_secret\nconst data = \"Mxdugo0ISrE7hzlOCRXag:OYgmzf1Unhu4D7OLTBdFIT5kI6F0LK3s\";\n\n// Encode para base64 (necessÃ¡rio para Basic Auth)\nconst encodedBytes = Buffer.from(data, 'utf-8').toString('base64');\n\nconsole.log('ğŸ” Token codificado:', encodedBytes);\n\n// **ATENÃ‡ÃƒO**: Nunca expor credenciais em logs de produÃ§Ã£o!\nreturn [{ json: { encoded_string: encodedBytes } }];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-224,-224],"id":"9adeedd7-71f8-4965-809a-fe2e286f0f32","name":"ğŸ”‘ Encode Credentials"},{"parameters":{"method":"POST","url":"https://zoom.us/oauth/token","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/x-www-form-urlencoded"},{"name":"Authorization","value":"=Basic {{ $json.encoded_string }}"}]},"sendBody":true,"contentType":"form-urlencoded","bodyParameters":{"parameters":[{"name":"grant_type","value":"client_credentials"},{"name":"account_id","value":"SXvif_kOSnyCjTtBvHN6jA"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[0,-224],"id":"b59e5bf3-e2fa-4c8a-a32c-49942846fc43","name":"ğŸ« GET ACCESS_TOKEN"},{"parameters":{"url":"https://api.zoom.us/v2/users/reunioes@camozziconsultoria.com.br/recordings","sendQuery":true,"queryParameters":{"parameters":[{"name":"page_size","value":"300"},{"name":"from","value":"={{ DateTime.now().minus({days: 30}).toISODate() }}"},{"name":"to","value":"={{ DateTime.now().toISODate() }}"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $json.access_token }}"},{"name":"Content-Type","value":"application/json"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[240,-224],"id":"7f0280aa-3675-4eca-8c4e-6b3464dec5b5","name":"ğŸ“¹ GET RECORDINGS"},{"parameters":{"jsCode":"// **PROCESSAMENTO DAS GRAVAÃ‡Ã•ES**\nconst recordings = $input.all()[0].json;\n\nif (!recordings.meetings || recordings.meetings.length === 0) {\n  console.log('âš ï¸ Nenhuma gravaÃ§Ã£o encontrada no perÃ­odo');\n  return [{ json: { message: 'Nenhuma gravaÃ§Ã£o encontrada', total: 0 } }];\n}\n\nconst processedRecordings = [];\n\nfor (const meeting of recordings.meetings) {\n  // **IMPORTANTE**: Processar cada arquivo de gravaÃ§Ã£o\n  for (const file of meeting.recording_files || []) {\n    processedRecordings.push({\n      // InformaÃ§Ãµes da reuniÃ£o\n      meeting_id: meeting.id,\n      meeting_topic: meeting.topic,\n      meeting_start_time: meeting.start_time,\n      meeting_duration: meeting.duration,\n      meeting_host_email: meeting.host_email,\n      \n      // InformaÃ§Ãµes do arquivo\n      file_id: file.id,\n      file_type: file.file_type,\n      file_size: file.file_size,\n      download_url: file.download_url,\n      play_url: file.play_url,\n      recording_start: file.recording_start,\n      recording_end: file.recording_end,\n      \n      // **ATENÃ‡ÃƒO**: Status importantes\n      status: file.status,\n      file_extension: file.file_extension,\n      \n      // Data formatada para facilitar uso\n      formatted_date: new Date(meeting.start_time).toLocaleDateString('pt-BR'),\n      formatted_time: new Date(meeting.start_time).toLocaleTimeString('pt-BR')\n    });\n  }\n}\n\nconsole.log(`âœ… Processadas ${processedRecordings.length} gravaÃ§Ãµes de ${recordings.meetings.length} reuniÃµes`);\n\nreturn processedRecordings.map(recording => ({ json: recording }));"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[480,-224],"id":"9f01daae-a2f0-48c5-918b-caeb867bbe78","name":"ğŸ”„ Process Recordings"},{"parameters":{"jsCode":"// **OAUTH CREDENTIALS** - Zoom App\nconst CLIENT_ID = \"YgWG0v7gQY6vtcqKFjyB1w\";\nconst CLIENT_SECRET = \"gkgdesYMpRJtsbQ1JpyGKsBV7wC1kA2y\";\n\n// CodificaÃ§Ã£o Base64 para Basic Auth\nconst credentials = `${CLIENT_ID}:${CLIENT_SECRET}`;\nconst encodedCredentials = Buffer.from(credentials, 'utf-8').toString('base64');\n\nconsole.log('ğŸ” OAuth credentials encoded');\n\nreturn [{ \n  json: { \n    encoded_string: encodedCredentials,\n    client_id: CLIENT_ID,\n    client_secret: CLIENT_SECRET\n  } \n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-16,272],"id":"09eb189a-7c4e-4314-9c40-a2fa60fbef29","name":"ğŸ”‘ OAuth Credentials"},{"parameters":{"jsCode":"// **PASSO 2: INSERIR O CÃ“DIGO DE AUTORIZAÃ‡ÃƒO**\n// Cole aqui o 'code' que vocÃª recebeu apÃ³s autorizar\n\n// **!!SUBSTITUA PELO SEU CÃ“DIGO!!**\nconst AUTHORIZATION_CODE = \"https://primary-production-70c40.up.railway.app/rest/oauth2-credential/callback\";\n\nif (AUTHORIZATION_CODE === \"COLE_SEU_CODE_AQUI\") {\n  throw new Error('âš ï¸ VOCÃŠ PRECISA SUBSTITUIR O AUTHORIZATION_CODE!');\n}\n\nconsole.log('âœ… Authorization code configurado');\n\nreturn [{ \n  json: { \n    code: AUTHORIZATION_CODE,\n    encoded_string: $json.encoded_string,\n    redirect_uri: $json.redirect_uri\n  } \n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[208,272],"id":"556a063c-cbc3-4a19-98a6-1cd741d2b728","name":"ğŸ“ Set Authorization Code"},{"parameters":{"method":"POST","url":"https://zoom.us/oauth/token","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/x-www-form-urlencoded"},{"name":"Authorization","value":"=Basic {{ $json.encoded_string }}"}]},"sendBody":true,"contentType":"form-urlencoded","bodyParameters":{"parameters":[{"name":"grant_type","value":"authorization_code"},{"name":"code","value":"={{ $json.code }}"},{"name":"redirect_uri","value":"=https://primary-production-70c40.up.railway.app/rest/oauth2-credential/callback"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[432,272],"id":"31c7d27d-87f1-4dfa-818c-8d5ffd15c253","name":"ğŸ« GET ACCESS TOKEN"},{"parameters":{"url":"https://api.zoom.us/v2/users/reunioes@camozziconsultoria.com.br/recordings","sendQuery":true,"queryParameters":{"parameters":[{"name":"page_size","value":"300"},{"name":"from","value":"={{ DateTime.now().minus({days: 30}).toISODate() }}"},{"name":"to","value":"={{ DateTime.now().toISODate() }}"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $json.access_token }}"},{"name":"Content-Type","value":"application/json"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[656,272],"id":"d37cf81f-6911-4058-97bd-0eeb20e97d7c","name":"ğŸ“¹ GET RECORDINGS1"},{"parameters":{"jsCode":"// **PROCESSAMENTO DAS GRAVAÃ‡Ã•ES**\nconst recordings = $input.all()[0].json;\n\nif (!recordings.meetings || recordings.meetings.length === 0) {\n  console.log('âš ï¸ Nenhuma gravaÃ§Ã£o encontrada no perÃ­odo');\n  return [{ json: { message: 'Nenhuma gravaÃ§Ã£o encontrada', total: 0 } }];\n}\n\nconst processedRecordings = [];\n\nfor (const meeting of recordings.meetings) {\n  // **IMPORTANTE**: Processar cada arquivo de gravaÃ§Ã£o\n  for (const file of meeting.recording_files || []) {\n    processedRecordings.push({\n      // InformaÃ§Ãµes da reuniÃ£o\n      meeting_id: meeting.id,\n      meeting_topic: meeting.topic,\n      meeting_start_time: meeting.start_time,\n      meeting_duration: meeting.duration,\n      meeting_host_email: meeting.host_email,\n      \n      // InformaÃ§Ãµes do arquivo\n      file_id: file.id,\n      file_type: file.file_type,\n      file_size: file.file_size,\n      download_url: file.download_url,\n      play_url: file.play_url,\n      recording_start: file.recording_start,\n      recording_end: file.recording_end,\n      \n      // **ATENÃ‡ÃƒO**: Status importantes\n      status: file.status,\n      file_extension: file.file_extension,\n      \n      // Data formatada para facilitar uso\n      formatted_date: new Date(meeting.start_time).toLocaleDateString('pt-BR'),\n      formatted_time: new Date(meeting.start_time).toLocaleTimeString('pt-BR')\n    });\n  }\n}\n\nconsole.log(`âœ… Processadas ${processedRecordings.length} gravaÃ§Ãµes de ${recordings.meetings.length} reuniÃµes`);\n\nreturn processedRecordings.map(recording => ({ json: recording }));"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[880,272],"id":"c32277cf-522a-414d-8ee3-42b6122c2fa3","name":"ğŸ”„ Process Recordings1"}],"connections":{"When clicking â€˜Execute workflowâ€™":{"main":[[{"node":"ğŸ”‘ OAuth Credentials","type":"main","index":0}]]},"Code":{"main":[[{"node":"GET ACESS_TOKEN","type":"main","index":0}]]},"GET ACESS_TOKEN":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"ğŸ”‘ Encode Credentials":{"main":[[{"node":"ğŸ« GET ACCESS_TOKEN","type":"main","index":0}]]},"ğŸ« GET ACCESS_TOKEN":{"main":[[{"node":"ğŸ“¹ GET RECORDINGS","type":"main","index":0}]]},"ğŸ“¹ GET RECORDINGS":{"main":[[{"node":"ğŸ”„ Process Recordings","type":"main","index":0}]]},"ğŸ”‘ OAuth Credentials":{"main":[[{"node":"ğŸ“ Set Authorization Code","type":"main","index":0}]]},"ğŸ“ Set Authorization Code":{"main":[[{"node":"ğŸ« GET ACCESS TOKEN","type":"main","index":0}]]},"ğŸ« GET ACCESS TOKEN":{"main":[[{"node":"ğŸ“¹ GET RECORDINGS1","type":"main","index":0}]]},"ğŸ“¹ GET RECORDINGS1":{"main":[[{"node":"ğŸ”„ Process Recordings1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"a48cf2f1-1ec0-44d4-b8f4-3a52bb102097","activeVersionId":null,"triggerCount":0,"shared":[{"updatedAt":"2025-06-18T16:35:23.820Z","createdAt":"2025-06-18T16:35:23.820Z","role":"workflow:owner","workflowId":"HqPrKKraartT54Wq","projectId":"BlSED80HESP48veq"}],"activeVersion":null,"tags":[]}