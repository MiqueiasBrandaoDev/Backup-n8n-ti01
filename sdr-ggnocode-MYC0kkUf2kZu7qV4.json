{"updatedAt":"2025-09-11T18:31:59.247Z","createdAt":"2025-09-11T18:31:10.346Z","id":"MYC0kkUf2kZu7qV4","name":"SDR GGNOCODE","active":false,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"agente-sdr-ggnocode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-1424,272],"id":"6a80d62c-df44-41f9-88e3-3b9e6a2f9a0a","name":"Webhook","webhookId":"a1506336-bc27-4f94-bb91-8f0a2ac689ca"},{"parameters":{"assignments":{"assignments":[{"id":"8c722fad-2a3d-4a0e-b35e-e1682434e5d3","name":"cliente.nome","value":"={{ $json.body.data.pushName }}","type":"string"},{"id":"1fe6a504-dcae-4895-b696-aeb96818efd5","name":"cliente.telefone","value":"={{ $json.body.data.key.remoteJid }}","type":"string"},{"id":"71300bcf-bc9e-44ab-885f-e6692d4f8162","name":"wpp.instancia","value":"={{ $json.body.instance }}","type":"string"},{"id":"09ac39ef-72e5-46eb-8ae6-36ce3c18a14d","name":"wpp.apikey","value":"={{ $json.body.apikey }}","type":"string"},{"id":"ee8ddae8-0b16-436c-8edf-a924597ca565","name":"wpp.url","value":"={{ $json.body.server_url }}","type":"string"},{"id":"28aaa934-7d70-42dc-b163-50e66abc6b44","name":"empresa.nome","value":"GgNocode","type":"string"},{"id":"eb1e2f49-68fc-4444-b3f0-292e44992c80","name":"empresa.docid","value":"","type":"string"},{"id":"7311b29e-5a73-4a4c-bba5-97469bfb8c6b","name":"content.tipoMensagem","value":"={{ $json.body.data.messageType }}","type":"string"},{"id":"3ac7b623-db46-4b56-b2b1-df3267758b0f","name":"content.mensagem","value":"={{    $json.body?.content ||     $json.body?.data?.message?.extendedTextMessage?.text ||    $json.body?.data?.message?.imageMessage?.caption ||    $json.body?.data?.message?.conversation ||    $json?.message?.text ||    $json?.message?.caption ||    null  }}","type":"string"},{"id":"c90bbe8c-951f-46a9-8d85-62fcfa18215f","name":"content.idmensagem","value":"={{ $json.body.data.key.id }}","type":"string"},{"id":"54c8ade5-ef4b-4ab9-9e90-175402e5f389","name":"Digitando","value":1200,"type":"number"},{"id":"d2db44ed-c264-46cb-ac27-b4d09cf35050","name":"debouncerTime","value":"4","type":"string"},{"id":"3d3b74b8-a515-40d6-979b-65872e7f1c1c","name":"linkpreview","value":false,"type":"boolean"},{"id":"bcb702ee-e8ab-4cdf-bb57-c8ed05e02e49","name":"fromMe","value":"={{ $json.body.data.key.fromMe }}","type":"boolean"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-720,240],"id":"67663c5c-d482-4018-b187-a3e88363bc41","name":"setData"},{"parameters":{"operation":"get","tableId":"N8N [gg] - LEADS SDR","filters":{"conditions":[{"keyName":"telefone","keyValue":"={{ $('setData').item.json.cliente.telefone }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[336,240],"id":"b1ae8211-038a-4178-b9de-4b1940988099","name":"buscarCliente","alwaysOutputData":true},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"5faa8a48-0d45-4273-9d10-46b233da21a7","leftValue":"={{ $json.telefone }}","rightValue":"","operator":{"type":"string","operation":"notEmpty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[592,240],"id":"b4c9e8d5-1d31-4a6e-92be-f58d963426eb","name":"If"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2557e03e-c517-4a01-a1df-4bd957fcc421","leftValue":"={{ $json.fromMe }}","rightValue":"","operator":{"type":"boolean","operation":"false","singleValue":true}},{"id":"758a9e82-d530-4954-bcb3-da5ec9e2a3da","leftValue":"={{ $json.cliente.telefone }}","rightValue":"553195495346@s.whatsapp.net","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-320,240],"id":"91c913df-c24b-48d1-8cd7-99c2ca37022a","name":"If1"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-224,688],"id":"94e155d4-24a0-4967-8b23-457b71c17e23","name":"No Operation, do nothing"},{"parameters":{"tableId":"N8N [gg] - LEADS SDR","fieldsUi":{"fieldValues":[{"fieldId":"created_at","fieldValue":"={{ $now.setZone('America/Sao_Paulo') }}"},{"fieldId":"nome","fieldValue":"={{ $('setData').item.json.cliente.nome }}"},{"fieldId":"telefone","fieldValue":"={{ $('setData').item.json.cliente.telefone }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[752,560],"id":"efec0feb-45dd-47c7-8691-dbb03c4d6103","name":"criarCliente"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $('setData').item.json.content.tipoMensagem }}","rightValue":"audioMessage","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Audio"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"306c0cb0-1eab-4a3b-af0d-18edc209600a","leftValue":"={{ $('setData').item.json.content.tipoMensagem }}","rightValue":"conversation","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Texto"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"4c5586e5-08d5-4eea-87cd-f9a5836907f8","leftValue":"={{ $('setData').item.json.content.tipoMensagem }}","rightValue":"imageMessage","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Imagem"}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[1520,352],"id":"e1bea611-88e7-4cb4-916e-c74bc12ba674","name":"Switch"},{"parameters":{"operation":"push","list":"={{ $('setData').item.json.cliente.telefone }}","messageData":"={{ $('setData').item.json.content.mensagem }}","tail":true},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[2064,320],"id":"40dabded-c695-4be9-83bc-d95eb9cc8e0e","name":"mem√≥riaTexto"},{"parameters":{"operation":"get","key":"={{ $('setData').item.json.cliente.telefone }}","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[2416,400],"id":"5624aa8d-0fc0-496f-a3d6-603fec80c4cd","name":"pegarMemoria1"},{"parameters":{},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[2784,400],"id":"69ab3149-dcc6-4f5e-989b-bb221d1c979c","name":"Wait","webhookId":"f1ae3466-84e4-4ad1-9109-cf9ba694bcd8"},{"parameters":{"operation":"get","key":"={{ $('setData').item.json.cliente.telefone }}","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[3072,400],"id":"95a47192-f2d5-4873-b736-3a0b5c66e633","name":"pegarMemoria2"},{"parameters":{"assignments":{"assignments":[{"id":"ffb70184-d3c5-4831-a4b1-c84dc8a026ca","name":"Redis1","value":"={{ $('pegarMemoria1').item.json.propertyName }}","type":"string"},{"id":"cb24a094-0896-4f69-b08b-c966534ad5f9","name":"Redis2","value":"={{ $json.propertyName }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[3424,400],"id":"38ac6bd5-7e8c-44e1-93de-06a6175c4ad1","name":"setarMemoria"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"f821e3dc-f550-4083-b6fb-0c6294044802","leftValue":"={{ $json.Redis2 }}","rightValue":"={{ $json.Redis1 }}","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[3744,400],"id":"a2b168a5-2cba-4cea-ae9e-6ce4184a91b0","name":"comparaMemoria"},{"parameters":{"assignments":{"assignments":[{"id":"af6a3409-5f84-449b-9a76-f4061dd80f59","name":"messages","value":"={{ $json.mensagem_completa }}","type":"string"},{"id":"68bd0176-b97c-4924-b2de-e057f347309d","name":"sessionId","value":"={{ $('setData').item.json.cliente.telefone }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[4704,384],"id":"f62ccc1b-1d60-465f-bdfa-2a04d27fde14","name":"setarAgente"},{"parameters":{"jsCode":"const data = $item(0).$node[\"comparaMemoria\"].json[\"Redis2\"]; // Obt√©m o valor de Redis2 do n√≥ \"If\"\n\n// Verifica se o dado √© uma string que representa um array, e converte se necess√°rio\nlet array = Array.isArray(data) ? data : JSON.parse(data);\n\n// Junta os elementos do array com um espa√ßo entre eles\nconst mensagem_completa = array.join(\" \");\n\n// Retorna o resultado com o nome da vari√°vel \"mensagem_completa\"\nreturn [{ json: { mensagem_completa } }];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[4096,384],"id":"46800402-c9bc-47a1-ac8f-5f1c393ab044","name":"Code"},{"parameters":{"promptType":"define","text":"={{ $json.messages }}","options":{"systemMessage":"=<AgentInstructions>\n    <Role>\n        <Name>Fernanda</Name>\n        <Description>Sou Fernanda, assistente virtual da GGnocode. Meu papel √© qualificar leads interessados em automa√ß√£o e direcion√°-los para os setores adequados da empresa.</Description>\n        <currentDate>{{$now.setZone('America/Sao_Paulo')}}</currentDate>\n    </Role>\n    \n    <Goal>\n        <Primary>Qualificar leads usando o m√©todo BANT e encaminh√°-los corretamente para agendamento de reuni√£o ou outro setor respons√°vel.</Primary>\n    </Goal>\n    \n    <Instructions>\n        <Instruction> SEMPRE INICIAR A CONVERSA com a seguinte mensagem de sauda√ß√£o: \"Oi Germano, sou a Fernanda, assistente da GGnocode! Notei que voc√™ quer saber mais sobre nossos servi√ßos de automa√ß√£o. üöÄ A equipe pediu para eu entrar em contato com voc√™ para fazer algumas perguntas r√°pidas e ajud√°-lo a se preparar da melhor forma poss√≠vel para uma sess√£o estrat√©gica com um dos nossos especialistas. Voc√™ tem um tempinho para uma conversa r√°pida?\"</Instruction>\n        <Instruction>Perguntar sobre o or√ßamento dispon√≠vel para automa√ß√£o e informar que os servi√ßos come√ßam a partir de R$ 3.000.</Instruction>\n        <Instruction>Verificar quem toma a decis√£o na empresa e sugerir a presen√ßa do(s) decisor(es) na reuni√£o.</Instruction>\n        <Instruction>Entender a necessidade espec√≠fica do lead e qual desafio ele quer resolver com automa√ß√£o.</Instruction>\n        <Instruction>Questionar sobre o prazo para implementa√ß√£o e urg√™ncia do projeto.</Instruction>\n        <Instruction>Se o lead for qualificado (aceita o or√ßamento e tem necessidade real), usar a ferramenta de agendamento para marcar a reuni√£o com um especialista.</Instruction>\n        <Instruction>Se o lead n√£o for qualificado, utilizar a ferramenta para atualizar o cadastro no Supabase e encaminhar para o setor apropriado.</Instruction>\n    </Instructions>\n\n<Tools>\n    <Tool> Atendimento Humano: Utilize esta tool APENAS COMO √öLTIMA OP√á√ÉO quando o cliente pedir por um atendente ou atendimento humano.</Tool>\n\n    <Tool> Criar Card Trello: Utilize esta tool ao final da conversa depois que tiver todos os dados do cliente prontos para reuni√£o.</Tool>\n\n    <Tool> Atualizar Cadastro: Utilize esta tool para atualizar o cadastro do cliente no nosso banco de dados inserindo o email e tipo de automa√ß√£o do cliente quando ele disponibilizar estes dados.</Tool>\n</AgentInstructions>\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[5104,304],"id":"9032e800-a068-4d4b-8661-ce24bef52d3b","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[4480,768],"id":"b3e1a7ea-6995-4e4b-bd06-a6785d0f7a20","name":"OpenAI Chat Model"},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ (() => {\n  const sessionId = $('setarAgente').item.json.sessionId; // Pega o valor do sessionId do n√≥ \"setarAgente\"\n  return sessionId ? sessionId : \"session-id-padrao\"; // Retorna sessionId ou valor padr√£o\n})() }}\n"},"type":"@n8n/n8n-nodes-langchain.memoryRedisChat","typeVersion":1.4,"position":[4944,928],"id":"dd01c22a-187a-4d4c-9abe-e4eb996f1818","name":"Redis Chat Memory"},{"parameters":{"method":"POST","url":"={{ $item(\"0\").$node[\"setData\"].json[\"wpp\"][\"url\"] }}/message/sendText/{{ $item(\"0\").$node[\"setData\"].json[\"wpp\"][\"instancia\"] }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"bodyParameters":{"parameters":[{"name":"number","value":"={{ $item(\"0\").$node[\"setData\"].json[\"cliente\"][\"telefone\"] }}"},{"name":"text","value":"={{ $json.output }}"},{"name":"linkPreview","value":"={{ $item(\"0\").$node[\"setData\"].json[\"linkpreview\"] }}"},{"name":"delay","value":"={{ $item(\"0\").$node[\"setData\"].json[\"Digitando\"] }}"}]},"options":{"redirect":{"redirect":{}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[6256,368],"id":"92152cd2-1dbf-431d-ae5d-47b5a62e80da","name":"HTTP Request"},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-944,1216],"id":"d28c08ee-634a-4f05-9595-7998fbe13763","name":"When clicking ‚ÄòTest workflow‚Äô","disabled":true},{"parameters":{"operation":"delete","key":"553195495346@s.whatsapp.net"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[-1392,720],"id":"2a2d1db1-fdf8-4222-8877-9d40287fe94c","name":"Redis"},{"parameters":{"operation":"delete","key":"={{ $item(\"0\").$node[\"setData\"].json[\"cliente\"][\"telefone\"] }}"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[6656,352],"id":"34132ca4-8c35-44fb-b167-8bbd8030ea2f","name":"Redis1"},{"parameters":{"height":500,"width":1860},"type":"n8n-nodes-base.stickyNote","position":[1424,192],"typeVersion":1,"id":"1e2b583c-f0b6-40fc-a159-39326d649e72","name":"Sticky Note"},{"parameters":{"height":500,"width":940},"type":"n8n-nodes-base.stickyNote","position":[3312,192],"typeVersion":1,"id":"9148ee3d-56d5-4eb6-8f9f-e946dd60c06d","name":"Sticky Note1"},{"parameters":{"height":500,"width":940},"type":"n8n-nodes-base.stickyNote","position":[5984,192],"typeVersion":1,"id":"dab2c775-8613-4685-8b1b-d6a14bff4a18","name":"Sticky Note2"},{"parameters":{"height":940,"width":1600},"type":"n8n-nodes-base.stickyNote","position":[4336,192],"typeVersion":1,"id":"2de496b6-06f6-4bb5-84d7-a934a7e9f3b6","name":"Sticky Note3"},{"parameters":{"height":640,"width":1120},"type":"n8n-nodes-base.stickyNote","position":[224,160],"typeVersion":1,"id":"20a3af11-c3e4-4491-b5a6-e4ee22352f97","name":"Sticky Note4"},{"parameters":{"operation":"get","tableId":"N8N [gg] - LEADS SDR","filters":{"conditions":[{"keyName":"telefone","keyValue":"={{ $item(\"0\").$node[\"setData\"].json[\"cliente\"][\"telefone\"] }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[960,288],"id":"a3a5b333-c339-4d73-94cb-6e46ad9cb71f","name":"verificaHumano"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"3dc83d8d-5e23-4ec8-b799-db02e0fae3f5","leftValue":"={{ $json.atende_humano }}","rightValue":"","operator":{"type":"boolean","operation":"false","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1200,304],"id":"f9668609-6933-4dfa-8fc7-0baa7dc638f6","name":"If2","disabled":true},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[1280,608],"id":"1d2cf5d0-d391-4884-9abc-c29008fdb641","name":"No Operation, do nothing1"},{"parameters":{"descriptionType":"manual","toolDescription":"Quando o usu√°rio solicitar atendimento humano voc√™ deve ativar esta tool e alterar o campo de \"atede_humano\" do supabase para \"true\"","operation":"update","tableId":"N8N [gg] - LEADS SDR","filters":{"conditions":[{"keyName":"telefone","condition":"eq","keyValue":"={{ $('setData').item.json.cliente.telefone }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"atende_humano","fieldValue":"={{ $fromAI('atendimento_humano', 'identificar se o cliente precisa de atendimento humano e alterar o campo boolean para true') }}"}]}},"type":"n8n-nodes-base.supabaseTool","typeVersion":1,"position":[5216,896],"id":"bcd51da7-e14c-4c1d-a04c-bd5f42108089","name":"Atendimento Humano"},{"parameters":{"tableId":"N8N [gg] - historico","fieldsUi":{"fieldValues":[{"fieldId":"created_at","fieldValue":"={{ $now.setZone('America/Sao_Paulo') }}"},{"fieldId":"id_cliente","fieldValue":"={{ $('setData').item.json.cliente.telefone }}"},{"fieldId":"nome_cliente","fieldValue":"={{ $('setData').item.json.cliente.nome }}"},{"fieldId":"msg_cliente","fieldValue":"={{ $('setarAgente').item.json.messages }}"},{"fieldId":"resposta_agente","fieldValue":"={{ $('AI Agent').item.json.output }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[7280,368],"id":"a6217aed-7107-46a4-8886-38c8b310749b","name":"historico"},{"parameters":{"operation":"getAll","tableId":"N8N [gg] - historico","filters":{"conditions":[{"keyName":"id_cliente","condition":"eq","keyValue":"553195495346@s.whatsapp.net"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-496,1200],"id":"9bfd4e65-054e-4737-a9e9-2065190df31a","name":"buscarCliente1","alwaysOutputData":true},{"parameters":{"modelId":{"__rl":true,"value":"gpt-3.5-turbo","mode":"list","cachedResultName":"GPT-3.5-TURBO"},"messages":{"values":[{"content":"=[\n  {\n    \"role\": \"system\",\n    \"content\": \"Voc√™ √© um assistente especializado em atendimento ao cliente. Sua tarefa √© analisar o hist√≥rico de mensagens e identificar a√ß√µes necess√°rias para continuar o atendimento.\"\n  },\n  {\n    \"role\": \"user\",\n    \"content\": \"Aqui est√° o hist√≥rico de mensagens:\\n\\n{{ $('Code1').first().json.summary }}\\n\\nCom base nisso, gere um resumo e identifique a√ß√µes importantes para prosseguir o atendimento.\"\n  }\n]\n"}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[240,1168],"id":"bfb71d11-1673-4e2b-8e77-96deaad1080b","name":"OpenAI1"},{"parameters":{"jsCode":"const messages = $input.all().flatMap(node => node.json);\n\n// Organizar mensagens por ordem de envio\nmessages.sort((a, b) => new Date(a.created_at) - new Date(b.created_at));\n\nlet lastMessage = messages[messages.length - 1]; // √öltima mensagem no hist√≥rico\nlet unansweredMessages = messages.filter(msg => msg.resposta_agente === null && msg.msg_cliente !== null);\nlet lastAgentReply = messages.reverse().find(msg => msg.resposta_agente !== null);\n\n// Criar um resumo\nlet summary = `üìå **Resumo do Hist√≥rico do Cliente:**\\n\\n`;\nsummary += `üÜî Cliente: ${lastMessage.nome_cliente}\\n`;\nsummary += `üìÖ √öltima intera√ß√£o: ${lastMessage.created_at}\\n`;\n\nif (unansweredMessages.length > 0) {\n    summary += `üö® **Mensagens pendentes de resposta**: ${unansweredMessages.length}\\n`;\n    summary += `üì© √öltima mensagem do cliente: \"${lastMessage.msg_cliente}\"\\n`;\n} else {\n    summary += `‚úÖ **Sem mensagens pendentes**. Atendimento atualizado.\\n`;\n}\n\nif (lastAgentReply) {\n    summary += `üí¨ √öltima resposta do agente: \"${lastAgentReply.resposta_agente}\"\\n`;\n}\n\nreturn [{ summary }];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-128,1168],"id":"42892f0b-20f0-4373-9d9b-7720e30423d4","name":"Code1"},{"parameters":{"descriptionType":"manual","toolDescription":"Utilize est√° tool quando passar por todos os passos da estrat√©gia BANT, para criar um card da reuni√£o com o cliente no trello.","listId":"67902cfe8b3e1daefa239f4b","name":"=Call Marcada - {{ $('setData').item.json.cliente.nome }}","description":"=Telefone: {{ $('setarAgente').item.json.sessionId.split(\"@\").first() }}\nEmail: {{ $fromAI('email_do_cliente', 'captar o email do cliente ao final para agendar a reuniao') }}","additionalFields":{}},"type":"n8n-nodes-base.trelloTool","typeVersion":1,"position":[5456,848],"id":"6f1e2ad4-2130-48df-bf74-09284af3e379","name":"Criar_card_trello"},{"parameters":{"operation":"update","tableId":"N8N [gg] - LEADS SDR","filters":{"conditions":[{"keyName":"telefone","condition":"eq","keyValue":"={{ $('setData').item.json.cliente.telefone }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"tipo_automacao","fieldValue":"={{ $fromAI('tipo_automacao', 'verificar qual tipo de automacao o cliente precisa') }}"},{"fieldId":"email","fieldValue":"={{ $fromAI('email_do_cliente', 'captar o email e atualizar o cadastro dele no banco de dados') }}"},{"fieldId":"prazo","fieldValue":"={{ $fromAI('prazo', 'prazo que o cliente pode aguardar para implementa√ß√£o dos servi√ßos') }}"}]}},"type":"n8n-nodes-base.supabaseTool","typeVersion":1,"position":[5696,752],"id":"7c617f02-1b39-4e90-af61-6e1de44270ab","name":"atualizar_cadastro"},{"parameters":{"method":"POST","url":"=https://evolution.ggnocode.com/message/sendText/Jo√£o Teles - teste 1","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"bodyParameters":{"parameters":[{"name":"number","value":"=553195495346@s.whatsapp.net"},{"name":"text","value":"={{ $json.resumo }}"}]},"options":{"redirect":{"redirect":{}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1376,1168],"id":"565dd386-01d7-4fa8-aaa8-532e431bba99","name":"HTTP Request1"},{"parameters":{"assignments":{"assignments":[{"id":"d0ce3f1a-3df2-4d4f-aca2-07c6067ca28b","name":"resumo","value":"={{ $json.message.content }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[656,1168],"id":"f7ec6234-d16d-4c74-b2f1-67632bdca882","name":"Edit Fields"},{"parameters":{"amount":4},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1024,1168],"id":"2dcb433f-0fea-4212-be4d-82b437df2958","name":"Wait1","webhookId":"6e1c0d51-e63c-4815-8bcb-4b3c2305aed1"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"3c5e1562-b9a8-4866-8f51-cf4e0512f1e3","leftValue":"","rightValue":"","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-1056,272],"id":"2469989c-ccfd-4e88-9847-915e9d9eb7ac","name":"autenticar"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-880,560],"id":"c2c724eb-f3ae-41ab-9485-9a884875a90f","name":"No Operation, do nothing2"}],"connections":{"Webhook":{"main":[[{"node":"autenticar","type":"main","index":0}]]},"setData":{"main":[[{"node":"If1","type":"main","index":0}]]},"buscarCliente":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"verificaHumano","type":"main","index":0}],[{"node":"criarCliente","type":"main","index":0}]]},"If1":{"main":[[{"node":"buscarCliente","type":"main","index":0}],[{"node":"No Operation, do nothing","type":"main","index":0}]]},"criarCliente":{"main":[[{"node":"buscarCliente","type":"main","index":0}]]},"Switch":{"main":[[],[{"node":"mem√≥riaTexto","type":"main","index":0}]]},"mem√≥riaTexto":{"main":[[{"node":"pegarMemoria1","type":"main","index":0}]]},"pegarMemoria1":{"main":[[{"node":"Wait","type":"main","index":0}]]},"Wait":{"main":[[{"node":"pegarMemoria2","type":"main","index":0}]]},"pegarMemoria2":{"main":[[{"node":"setarMemoria","type":"main","index":0}]]},"setarMemoria":{"main":[[{"node":"comparaMemoria","type":"main","index":0}]]},"comparaMemoria":{"main":[[{"node":"Code","type":"main","index":0}]]},"Code":{"main":[[{"node":"setarAgente","type":"main","index":0}]]},"setarAgente":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Redis Chat Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"AI Agent":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"When clicking ‚ÄòTest workflow‚Äô":{"main":[[{"node":"buscarCliente1","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"Redis1","type":"main","index":0}]]},"verificaHumano":{"main":[[{"node":"If2","type":"main","index":0}]]},"If2":{"main":[[{"node":"Switch","type":"main","index":0}],[{"node":"No Operation, do nothing1","type":"main","index":0}]]},"Atendimento Humano":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Redis1":{"main":[[{"node":"historico","type":"main","index":0}]]},"buscarCliente1":{"main":[[{"node":"Code1","type":"main","index":0}]]},"Code1":{"main":[[{"node":"OpenAI1","type":"main","index":0}]]},"Criar_card_trello":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"atualizar_cadastro":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"OpenAI1":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Wait1","type":"main","index":0}]]},"Wait1":{"main":[[{"node":"HTTP Request1","type":"main","index":0}]]},"autenticar":{"main":[[{"node":"setData","type":"main","index":0}],[{"node":"No Operation, do nothing2","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"68ecb6b2-a935-49de-baa3-b958e85b6338","activeVersionId":null,"triggerCount":0,"shared":[{"updatedAt":"2025-09-11T18:31:10.346Z","createdAt":"2025-09-11T18:31:10.346Z","role":"workflow:owner","workflowId":"MYC0kkUf2kZu7qV4","projectId":"BlSED80HESP48veq"}],"activeVersion":null,"tags":[{"updatedAt":"2025-09-11T18:31:55.096Z","createdAt":"2025-09-11T18:31:55.096Z","id":"atj4aIywOEQCYx48","name":"gg-ass"},{"updatedAt":"2025-09-11T18:31:55.092Z","createdAt":"2025-09-11T18:31:55.092Z","id":"LV2xV02S0QgjZ1R7","name":"Modelos Demo"}]}