{"updatedAt":"2025-08-12T12:55:20.407Z","createdAt":"2025-08-11T17:42:18.575Z","id":"5xsR3s0CFRqW5GKz","name":"zoom 2.0","active":false,"isArchived":false,"nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-368,240],"id":"1a1c3655-4d93-4e95-b298-0ef941c597fd","name":"When clicking 'Execute workflow'"},{"parameters":{"jsCode":"// String to be encoded\nconst data = \"YgWG0v7gQY6vtcqKFjyB1w:gkgdesYMpRJtsbQ1JpyGKsBV7wC1kA2y\";\n\n// Encode the string to base64. The string is first encoded to bytes using UTF-8\nconst encodedBytes = Buffer.from(data, 'utf-8').toString('base64');\n\n// Convert the base64 bytes back to a string and print it\nconst encodedStr = encodedBytes;\nconsole.log(encodedStr);\n\n// Return the encoded string for N8N workflow\nreturn [{ json: { encoded_string: encodedStr } }];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-112,240],"id":"93958215-e254-4470-bd9e-83dceb7bace7","name":"Code"},{"parameters":{"method":"POST","url":"https://zoom.us/oauth/token","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/x-www-form-urlencoded"},{"name":"Authorization","value":"=Basic {{ $json.encoded_string }}"}]},"sendBody":true,"contentType":"form-urlencoded","bodyParameters":{"parameters":[{"name":"grant_type","value":"client_credentials"},{"name":"account_id","value":"SXvif_kOSnyCjTtBvHN6jA"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[112,240],"id":"8a74597c-7602-43dc-9baf-96be62f05f8b","name":"GET ACESS_TOKEN"},{"parameters":{"url":"https://api.zoom.us/v2/users/me/recordings","sendQuery":true,"queryParameters":{"parameters":[{"name":"page_size","value":"300"},{"name":"from","value":"={{ DateTime.now().minus({days: 30}).toISODate() }}"},{"name":"to","value":"={{ DateTime.now().toISODate() }}"},{"name":"trash","value":"false"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $json.access_token }}"},{"name":"Content-Type","value":"application/json"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[368,240],"id":"0d362b8a-85b1-40c9-8cc7-c5f9b80e0ce2","name":"ðŸ“¹ GET RECORDINGS (/me)"},{"parameters":{"jsCode":"// **ANÃLISE DOS RESULTADOS**\nconst input1 = $input.all()[0]?.json; // /me endpoint\nconst input2 = $input.all()[1]?.json; // email endpoint\n\nconsole.log('ðŸ“Š RESULTADO /users/me/recordings:');\nconsole.log(JSON.stringify(input1, null, 2));\n\nconsole.log('\\nðŸ“Š RESULTADO /users/email/recordings:');\nconsole.log(JSON.stringify(input2, null, 2));\n\n// Verificar qual funcionou\nlet workingEndpoint = null;\nlet recordings = null;\n\nif (input1?.meetings && input1.meetings.length > 0) {\n  workingEndpoint = '/users/me/recordings';\n  recordings = input1;\n} else if (input2?.meetings && input2.meetings.length > 0) {\n  workingEndpoint = '/users/{email}/recordings';\n  recordings = input2;\n} else {\n  console.log('âš ï¸ NENHUM ENDPOINT RETORNOU GRAVAÃ‡Ã•ES');\n  console.log('ðŸ” PossÃ­veis causas:');\n  console.log('1. NÃ£o hÃ¡ gravaÃ§Ãµes no perÃ­odo');\n  console.log('2. Scopes insuficientes no token');\n  console.log('3. UsuÃ¡rio nÃ£o tem permissÃ£o');\n  console.log('4. Problema de autenticaÃ§Ã£o');\n  \n  return [{ json: {\n    error: 'Nenhuma gravaÃ§Ã£o encontrada',\n    me_response: input1,\n    email_response: input2,\n    suggestions: [\n      'Verificar se existem gravaÃ§Ãµes no perÃ­odo',\n      'Verificar scopes do token OAuth',\n      'Testar com perÃ­odo menor (7 dias)',\n      'Verificar permissÃµes do usuÃ¡rio'\n    ]\n  }}];\n}\n\nconsole.log(`âœ… SUCESSO! Endpoint que funcionou: ${workingEndpoint}`);\nconsole.log(`ðŸ“¹ Total de reuniÃµes encontradas: ${recordings.meetings.length}`);\n\n// Processar gravaÃ§Ãµes\nconst processedRecordings = [];\n\nfor (const meeting of recordings.meetings) {\n  for (const file of meeting.recording_files || []) {\n    processedRecordings.push({\n      meeting_id: meeting.id,\n      meeting_topic: meeting.topic,\n      meeting_start_time: meeting.start_time,\n      meeting_duration: meeting.duration,\n      meeting_host_email: meeting.host_email,\n      file_id: file.id,\n      file_type: file.file_type,\n      file_size: file.file_size,\n      download_url: file.download_url,\n      play_url: file.play_url,\n      status: file.status,\n      formatted_date: new Date(meeting.start_time).toLocaleDateString('pt-BR'),\n      formatted_time: new Date(meeting.start_time).toLocaleTimeString('pt-BR'),\n      working_endpoint: workingEndpoint\n    });\n  }\n}\n\nconsole.log(`ðŸŽ‰ ${processedRecordings.length} arquivos de gravaÃ§Ã£o processados!`);\n\nreturn processedRecordings.map(recording => ({ json: recording }));"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[656,240],"id":"ec216ffe-8704-403a-b6c6-8e7ffb6e3b07","name":"ðŸ”„ Analyze & Process"}],"connections":{"When clicking 'Execute workflow'":{"main":[[{"node":"Code","type":"main","index":0}]]},"Code":{"main":[[{"node":"GET ACESS_TOKEN","type":"main","index":0}]]},"GET ACESS_TOKEN":{"main":[[{"node":"ðŸ“¹ GET RECORDINGS (/me)","type":"main","index":0}]]},"ðŸ“¹ GET RECORDINGS (/me)":{"main":[[{"node":"ðŸ”„ Analyze & Process","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"925978bb-cd08-4b2a-8876-b2f9389b30af","triggerCount":0,"shared":[{"updatedAt":"2025-08-11T17:42:18.575Z","createdAt":"2025-08-11T17:42:18.575Z","role":"workflow:owner","workflowId":"5xsR3s0CFRqW5GKz","projectId":"BlSED80HESP48veq"}],"tags":[]}