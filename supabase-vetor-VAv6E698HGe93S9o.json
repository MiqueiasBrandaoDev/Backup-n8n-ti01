{"updatedAt":"2025-11-16T11:23:23.559Z","createdAt":"2025-05-19T16:57:49.766Z","id":"VAv6E698HGe93S9o","name":"Supabase Vetor","active":true,"isArchived":false,"nodes":[{"parameters":{"mode":"insert","tableName":{"__rl":true,"value":"empresa1","mode":"list","cachedResultName":"empresa1"},"embeddingBatchSize":100,"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.1,"position":[400,-140],"id":"703c0bc8-0cab-4575-a66d-55c2ea946ca7","name":"Supabase Vector Store","credentials":{"supabaseApi":{"id":"ZHIMmNbYxUlvBiKp","name":"teste-vector"}}},{"parameters":{"model":"text-embedding-3-large","options":{"stripNewLines":true}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[260,60],"id":"a6a6b71f-0211-420f-a63d-80d49efbb12c","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1,"position":[520,120],"id":"c41cb808-05e8-4756-8e1f-2684b30b86b8","name":"Default Data Loader"},{"parameters":{"separator":" ","chunkSize":100},"type":"@n8n/n8n-nodes-langchain.textSplitterCharacterTextSplitter","typeVersion":1,"position":[580,260],"id":"35ac2b35-eba7-4851-82ed-8b217e161a14","name":"Character Text Splitter","disabled":true},{"parameters":{"httpMethod":"POST","path":"b1c2e5a7-198e-4577-bb44-896babd37b91","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-280,-140],"id":"54e1b953-3aab-4a24-811d-8f24113d33b1","name":"Webhook","webhookId":"b1c2e5a7-198e-4577-bb44-896babd37b91"},{"parameters":{"operation":"toBinary","sourceProperty":"body.data.message.base64","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[-60,-140],"id":"851cc516-bba9-472c-88b6-56ef8745af1d","name":"Convert to File"},{"parameters":{"content":"# INSERT - Grupo DB VETORIZADO","height":680,"width":1180},"type":"n8n-nodes-base.stickyNote","position":[-320,-260],"typeVersion":1,"id":"d05ba9aa-9266-42c2-8b98-8467dd1f1344","name":"Sticky Note"},{"parameters":{"resource":"messages-api","instanceName":"={{ $('Webhook').item.json.body.instance }}","remoteJid":"={{ $('Webhook').item.json.body.data.key.remoteJid }}","messageText":"Documento cadastrado na nossa base✅","options_message":{}},"type":"n8n-nodes-evolution-api.evolutionApi","typeVersion":1,"position":[960,-140],"id":"bb6c6d24-2b14-44ee-bf78-0dea537de073","name":"Evolution API","executeOnce":true,"credentials":{"evolutionApi":{"id":"V2fpHnZeAReBnCaU","name":"Evolution account"}}},{"parameters":{"promptType":"define","text":"={{ $json.chatInput }}","options":{"systemMessage":"=Você é um agente que faz consultas em larga escala para a Camozzi Consultoria. Você é treinado com vários documentos que está em uma banco de dados vetorizado. Seu papel é entender como é feita a construção dos documentos, o tipo de documento vai ser solicitado pelo usuario."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.9,"position":[180,720],"id":"fee762a3-2032-41b4-b619-c35eccc6d7db","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o","mode":"list","cachedResultName":"gpt-4o"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[120,940],"id":"25ce2b82-7bed-46aa-b69c-66acbcf07991","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"model":"text-embedding-3-large","options":{"stripNewLines":false}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[500,1140],"id":"d28dd11f-f60f-48c6-bd31-f17d2ad695b5","name":"Embeddings OpenAI1","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"mode":"retrieve-as-tool","toolName":"uambhjmzaoqksmdfuwgt","toolDescription":"Trabalhe com meus dados nos modelos de documentos","tableName":{"__rl":true,"value":"empresa1","mode":"list","cachedResultName":"empresa1"},"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.1,"position":[400,960],"id":"8cc3b03b-2c20-47c7-acfb-c9a7fb5a649b","name":"SELECTMODEL","credentials":{"supabaseApi":{"id":"ZHIMmNbYxUlvBiKp","name":"teste-vector"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-100,720],"id":"18761127-93b3-42f5-9286-9fe558ba523b","name":"When chat message received","webhookId":"81dad570-464f-4d4f-8196-d875675c7e66"},{"parameters":{"content":"# CONSULTA REALIZADA PELO AGENTE, POR PALAVRA","height":700,"width":1060},"type":"n8n-nodes-base.stickyNote","position":[-180,600],"typeVersion":1,"id":"a71d65ab-4727-4aad-917e-463f81116081","name":"Sticky Note1"},{"parameters":{"contextWindowLength":10},"type":"@n8n/n8n-nodes-langchain.memoryRedisChat","typeVersion":1.5,"position":[280,940],"id":"8ddaab56-ec5c-4117-ad34-74ffc3ca2110","name":"Redis Chat Memory","credentials":{"redis":{"id":"1f7hNvPJVM2bjGpi","name":"Redis account"}}},{"parameters":{"operation":"pdf","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[160,-140],"name":"Extract PDF Text","id":"e7df9dd1-67d4-4c9d-8648-74c8e039de22"},{"parameters":{"chunkOverlap":200,"options":{}},"type":"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter","typeVersion":1,"position":[400,260],"name":"Smart Text Splitter","id":"4ad64888-3562-4b11-8f5f-3dd2da207836"}],"connections":{"Embeddings OpenAI":{"ai_embedding":[[{"node":"Supabase Vector Store","type":"ai_embedding","index":0}]]},"Default Data Loader":{"ai_document":[[{"node":"Supabase Vector Store","type":"ai_document","index":0}]]},"Character Text Splitter":{"ai_textSplitter":[[]]},"Webhook":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Convert to File":{"main":[[{"node":"Extract PDF Text","type":"main","index":0}]]},"Supabase Vector Store":{"main":[[{"node":"Evolution API","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Embeddings OpenAI1":{"ai_embedding":[[{"node":"SELECTMODEL","type":"ai_embedding","index":0}]]},"SELECTMODEL":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Redis Chat Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"Extract PDF Text":{"main":[[{"node":"Supabase Vector Store","type":"main","index":0}]]},"Smart Text Splitter":{"ai_textSplitter":[[{"node":"Default Data Loader","type":"ai_textSplitter","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"6f6bf186-c88a-4093-b498-9b3f5a6ea877","activeVersionId":"6f6bf186-c88a-4093-b498-9b3f5a6ea877","triggerCount":2,"shared":[{"updatedAt":"2025-05-19T16:57:49.766Z","createdAt":"2025-05-19T16:57:49.766Z","role":"workflow:owner","workflowId":"VAv6E698HGe93S9o","projectId":"BlSED80HESP48veq"}],"activeVersion":{"updatedAt":"2025-12-01T11:56:54.083Z","createdAt":"2025-12-01T11:56:54.083Z","versionId":"6f6bf186-c88a-4093-b498-9b3f5a6ea877","workflowId":"VAv6E698HGe93S9o","nodes":[{"parameters":{"mode":"insert","tableName":{"__rl":true,"value":"empresa1","mode":"list","cachedResultName":"empresa1"},"embeddingBatchSize":100,"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.1,"position":[400,-140],"id":"703c0bc8-0cab-4575-a66d-55c2ea946ca7","name":"Supabase Vector Store","credentials":{"supabaseApi":{"id":"ZHIMmNbYxUlvBiKp","name":"teste-vector"}}},{"parameters":{"model":"text-embedding-3-large","options":{"stripNewLines":true}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[260,60],"id":"a6a6b71f-0211-420f-a63d-80d49efbb12c","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1,"position":[520,120],"id":"c41cb808-05e8-4756-8e1f-2684b30b86b8","name":"Default Data Loader"},{"parameters":{"separator":" ","chunkSize":100},"type":"@n8n/n8n-nodes-langchain.textSplitterCharacterTextSplitter","typeVersion":1,"position":[580,260],"id":"35ac2b35-eba7-4851-82ed-8b217e161a14","name":"Character Text Splitter","disabled":true},{"parameters":{"httpMethod":"POST","path":"b1c2e5a7-198e-4577-bb44-896babd37b91","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-280,-140],"id":"54e1b953-3aab-4a24-811d-8f24113d33b1","name":"Webhook","webhookId":"b1c2e5a7-198e-4577-bb44-896babd37b91"},{"parameters":{"operation":"toBinary","sourceProperty":"body.data.message.base64","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[-60,-140],"id":"851cc516-bba9-472c-88b6-56ef8745af1d","name":"Convert to File"},{"parameters":{"content":"# INSERT - Grupo DB VETORIZADO","height":680,"width":1180},"type":"n8n-nodes-base.stickyNote","position":[-320,-260],"typeVersion":1,"id":"d05ba9aa-9266-42c2-8b98-8467dd1f1344","name":"Sticky Note"},{"parameters":{"resource":"messages-api","instanceName":"={{ $('Webhook').item.json.body.instance }}","remoteJid":"={{ $('Webhook').item.json.body.data.key.remoteJid }}","messageText":"Documento cadastrado na nossa base✅","options_message":{}},"type":"n8n-nodes-evolution-api.evolutionApi","typeVersion":1,"position":[960,-140],"id":"bb6c6d24-2b14-44ee-bf78-0dea537de073","name":"Evolution API","executeOnce":true,"credentials":{"evolutionApi":{"id":"V2fpHnZeAReBnCaU","name":"Evolution account"}}},{"parameters":{"promptType":"define","text":"={{ $json.chatInput }}","options":{"systemMessage":"=Você é um agente que faz consultas em larga escala para a Camozzi Consultoria. Você é treinado com vários documentos que está em uma banco de dados vetorizado. Seu papel é entender como é feita a construção dos documentos, o tipo de documento vai ser solicitado pelo usuario."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.9,"position":[180,720],"id":"fee762a3-2032-41b4-b619-c35eccc6d7db","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o","mode":"list","cachedResultName":"gpt-4o"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[120,940],"id":"25ce2b82-7bed-46aa-b69c-66acbcf07991","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"model":"text-embedding-3-large","options":{"stripNewLines":false}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[500,1140],"id":"d28dd11f-f60f-48c6-bd31-f17d2ad695b5","name":"Embeddings OpenAI1","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"mode":"retrieve-as-tool","toolName":"uambhjmzaoqksmdfuwgt","toolDescription":"Trabalhe com meus dados nos modelos de documentos","tableName":{"__rl":true,"value":"empresa1","mode":"list","cachedResultName":"empresa1"},"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.1,"position":[400,960],"id":"8cc3b03b-2c20-47c7-acfb-c9a7fb5a649b","name":"SELECTMODEL","credentials":{"supabaseApi":{"id":"ZHIMmNbYxUlvBiKp","name":"teste-vector"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-100,720],"id":"18761127-93b3-42f5-9286-9fe558ba523b","name":"When chat message received","webhookId":"81dad570-464f-4d4f-8196-d875675c7e66"},{"parameters":{"content":"# CONSULTA REALIZADA PELO AGENTE, POR PALAVRA","height":700,"width":1060},"type":"n8n-nodes-base.stickyNote","position":[-180,600],"typeVersion":1,"id":"a71d65ab-4727-4aad-917e-463f81116081","name":"Sticky Note1"},{"parameters":{"contextWindowLength":10},"type":"@n8n/n8n-nodes-langchain.memoryRedisChat","typeVersion":1.5,"position":[280,940],"id":"8ddaab56-ec5c-4117-ad34-74ffc3ca2110","name":"Redis Chat Memory","credentials":{"redis":{"id":"1f7hNvPJVM2bjGpi","name":"Redis account"}}},{"parameters":{"operation":"pdf","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[160,-140],"name":"Extract PDF Text","id":"e7df9dd1-67d4-4c9d-8648-74c8e039de22"},{"parameters":{"chunkOverlap":200,"options":{}},"type":"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter","typeVersion":1,"position":[400,260],"name":"Smart Text Splitter","id":"4ad64888-3562-4b11-8f5f-3dd2da207836"}],"connections":{"Embeddings OpenAI":{"ai_embedding":[[{"node":"Supabase Vector Store","type":"ai_embedding","index":0}]]},"Default Data Loader":{"ai_document":[[{"node":"Supabase Vector Store","type":"ai_document","index":0}]]},"Character Text Splitter":{"ai_textSplitter":[[]]},"Webhook":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Convert to File":{"main":[[{"node":"Extract PDF Text","type":"main","index":0}]]},"Supabase Vector Store":{"main":[[{"node":"Evolution API","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Embeddings OpenAI1":{"ai_embedding":[[{"node":"SELECTMODEL","type":"ai_embedding","index":0}]]},"SELECTMODEL":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Redis Chat Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"Extract PDF Text":{"main":[[{"node":"Supabase Vector Store","type":"main","index":0}]]},"Smart Text Splitter":{"ai_textSplitter":[[{"node":"Default Data Loader","type":"ai_textSplitter","index":0}]]}},"authors":"system migration","name":null,"description":null,"autosaved":false},"tags":[{"updatedAt":"2025-05-09T14:08:08.320Z","createdAt":"2025-05-09T14:08:08.320Z","id":"saJOlgEwuuF3REbW","name":"RAG"}]}