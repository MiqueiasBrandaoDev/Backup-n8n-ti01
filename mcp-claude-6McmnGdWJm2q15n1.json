{"updatedAt":"2025-07-13T14:40:31.729Z","createdAt":"2025-06-17T18:11:23.761Z","id":"6McmnGdWJm2q15n1","name":"MCP Claude","active":true,"isArchived":false,"nodes":[{"parameters":{"path":"094cb0ec-e7be-4c62-b9ee-23d7f8170d65"},"type":"@n8n/n8n-nodes-langchain.mcpTrigger","typeVersion":1,"position":[740,-220],"id":"f9df91c5-9099-4d97-b471-6da68f021d74","name":"MCP Server Trigger","webhookId":"094cb0ec-e7be-4c62-b9ee-23d7f8170d65"},{"parameters":{"mode":"retrieve-as-tool","toolName":"uambhjmzaoqksmdfuwgt","toolDescription":"Todos os dados aqui são de tarefas do clickup feito pela Camozzi Consultoria ou pela C&D Blindagem digital(novo nome).","tableName":{"__rl":true,"value":"claude","mode":"list","cachedResultName":"claude"},"topK":20,"useReranker":true,"options":{"queryName":"search_claude_docs"}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.2,"position":[600,60],"id":"dc18c3e6-382b-473b-a9c1-fcb876712207","name":"Supabase Vector Store","credentials":{"supabaseApi":{"id":"ZHIMmNbYxUlvBiKp","name":"teste-vector"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[580,260],"id":"5867e1be-8346-4896-888b-09ce07d5164a","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.rerankerCohere","typeVersion":1,"position":[740,260],"id":"35cda039-1886-40d2-a5a2-f264a194e48f","name":"Reranker Cohere","credentials":{"cohereApi":{"id":"JUhw1jVVzyS2hZQw","name":"CohereApi account"}}},{"parameters":{"promptType":"define","text":"={{ $json.body.message }}","options":{"systemMessage":"=# **ASSISTENTE DE CARDS CLICKUP - C&D BLINDAGEM DIGITAL**\n\n## **>>> IDENTIDADE E FUNÇÃO PRINCIPAL <<<**\n\nVocê é o **Assistente Especializado em Cards do ClickUp** da **C&D Blindagem Digital**. Sua função é ser o **ponto central de consulta** para todas as informações relacionadas aos cards, tarefas e histórico da empresa através de consultas RAG na base de dados.\n\n## **!!! DIRETRIZES CRÍTICAS !!!**\n\n### **[PRIORIDADE MÁXIMA]**\n- **SEMPRE** consulte a base de dados RAG antes de responder\n- **NUNCA** invente informações - apenas use dados verificados da base\n- **MANTENHA** total precisão e confiabilidade nas respostas\n- **CONTEXTUALIZE** as informações dentro do ambiente da C&D Blindagem Digital\n\n### **{ESCOPO DE ATUAÇÃO}**\n- **Cards ativos e concluídos** no ClickUp\n- **Histórico de tarefas**\n- **Fluxos de trabalho** e processos internos\n\n## **>>> INSTRUÇÕES OPERACIONAIS <<<**\n\n### **1. CONSULTA À BASE DE DADOS**\n- **SEMPRE** realize busca RAG antes de qualquer resposta\n- **UTILIZE** palavras-chave específicas e relevantes\n- **REFINE** a busca se necessário para obter informações completas\n- **VALIDE** a consistência dos dados retornados\n\n### **2. FORMATAÇÃO DAS RESPOSTAS**\n- **INICIE** sempre com um resumo executivo\n- **ORGANIZE** informações de forma hierárquica\n- **DESTAQUE** pontos críticos com formatação especial\n- **INCLUA** IDs de cards quando relevante\n- **FORNEÇA** links diretos quando disponíveis\n\n### **3. TIPOS DE CONSULTA SUPORTADOS**\n- *\"Quais cards estão atribuídos para [pessoa]?\"*\n- *\"Qual o status do projeto [nome]?\"*\n- *\"Mostrar histórico de [cliente/empresa]\"*\n- *\"Cards vencidos ou em atraso\"*\n- *\"Tarefas concluídas no período [data]\"*\n- *\"Buscar cards com [palavra-chave]\"*\n\n## **!!! PROTOCOLOS DE RESPOSTA !!!**\n\n### **ESTRUTURA PADRÃO:**\n```\n**>>> RESUMO EXECUTIVO <<<**\n[Síntese da consulta e principais achados]\n\n**[DADOS ESPECÍFICOS]**\n- ID do Card: [número]\n- Título: [nome]\n- Status: [atual]\n- Responsável: [pessoa]\n- Prazo: [data]\n- Última atualização: [quando]\n\n**{OBSERVAÇÕES IMPORTANTES}**\n[Contexto adicional, alertas, próximos passos]\n\n**---> LINKS DIRETOS <---**\n[URLs dos cards quando disponíveis]\n```\n\n### **QUANDO NÃO ENCONTRAR INFORMAÇÕES:**\n- **INFORME** claramente que não foram encontrados dados\n- **SUGIRA** termos alternativos de busca\n- **OFEREÇA** consultas relacionadas possíveis\n- **MANTENHA** transparência sobre limitações\n\n## **>>> CARACTERÍSTICAS ESPECIAIS <<<**\n\n### **INTELIGÊNCIA CONTEXTUAL**\n- **IDENTIFIQUE** padrões nos dados históricos\n- **RELACIONE** informações entre diferentes cards\n- **ANALISE** tendências de performance\n- **PREVEJA** possíveis gargalos ou atrasos\n\n### **COMUNICAÇÃO EFICIENTE**\n- **LINGUAGEM** clara e profissional\n- **RESPOSTAS** objetivas e actionáveis\n- **FOCO** em informações que agregam valor\n- **SUPORTE** à tomada de decisões\n\n## **!!! LEMBRETES CRÍTICOS !!!**\n\n- **CONFIDENCIALIDADE:** Trate todas as informações como confidenciais\n- **PRECISÃO:** Dados incorretos podem afetar decisões importantes\n- **ATUALIZAÇÃO:** Sempre busque informações mais recentes disponíveis\n- **SUPORTE:** Seja um facilitador eficiente para a equipe\n\n---\n\n**MISSÃO:** *Ser o assistente mais confiável e eficiente para consultas de cards ClickUp, fornecendo informações precisas que impulsionem a produtividade e eficiência da C&D Blindagem Digital.*\n\n** O LINK DOS CARDS SÃO COMPOSTOS POR **\nhttps://app.clickup.com/t/[id_do_card]"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[-180,-220],"id":"03d42b83-8801-427c-8ed6-e4ca6a032708","name":"AI Agent"},{"parameters":{"httpMethod":"POST","path":"af4d9d6e-c938-4b9b-a26c-5c5d3acfa3ef","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-440,-220],"id":"53d69428-a3fb-4555-bdc3-5927c6883e35","name":"Webhook","webhookId":"af4d9d6e-c938-4b9b-a26c-5c5d3acfa3ef"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o","mode":"list","cachedResultName":"gpt-4o"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-300,-40],"id":"8d75cea1-5365-4991-a7ca-f12fe8b5d779","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $('Webhook').item.json.body.user_id }}","contextWindowLength":20},"type":"@n8n/n8n-nodes-langchain.memoryRedisChat","typeVersion":1.5,"position":[-120,-40],"id":"c6af52c3-23f0-47d4-9114-899a124a0c81","name":"Redis Chat Memory","credentials":{"redis":{"id":"1f7hNvPJVM2bjGpi","name":"Redis account"}}},{"parameters":{"options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[200,-220],"id":"89f1068c-3db9-46ce-ab1f-853a22976f5c","name":"Respond to Webhook"}],"connections":{"Supabase Vector Store":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0},{"node":"AI Agent","type":"ai_tool","index":0}]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"Supabase Vector Store","type":"ai_embedding","index":0}]]},"Reranker Cohere":{"ai_reranker":[[{"node":"Supabase Vector Store","type":"ai_reranker","index":0}]]},"Webhook":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Redis Chat Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"AI Agent":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"Webhook":[{"json":{"headers":{"host":"primary-production-70c40.up.railway.app","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36","content-length":"191","accept":"*/*","accept-encoding":"gzip, deflate, br, zstd","accept-language":"pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7","content-type":"application/json","origin":"http://localhost:8080","priority":"u=1, i","referer":"http://localhost:8080/","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\", \"Google Chrome\";v=\"138\"","sec-ch-ua-mobile":"?0","sec-ch-ua-platform":"\"Windows\"","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"cross-site","x-forwarded-for":"189.5.177.16","x-forwarded-host":"primary-production-70c40.up.railway.app","x-forwarded-proto":"https","x-railway-edge":"railway/us-east4-eqdc4a","x-railway-request-id":"QRHp1oiZRvSD55A_Aax-fw","x-real-ip":"189.5.177.16","x-request-start":"1752177827537"},"params":{},"query":{},"body":{"message":"O que vc faz","user_id":"6535b11d-84b2-4a08-8786-683ee0d08024","agent_id":"1cbfbdd0-b758-4cd4-b0a9-624a7bc60665","agent_name":"Clickup C&D","timestamp":"2025-07-10T20:03:42.636Z"},"webhookUrl":"https://primary-production-70c40.up.railway.app/webhook/af4d9d6e-c938-4b9b-a26c-5c5d3acfa3ef","executionMode":"production"}}]},"versionId":"021cef38-2c1f-453b-8c60-3fe1ff15bd63","activeVersionId":"021cef38-2c1f-453b-8c60-3fe1ff15bd63","triggerCount":2,"shared":[{"updatedAt":"2025-06-17T18:11:23.761Z","createdAt":"2025-06-17T18:11:23.761Z","role":"workflow:owner","workflowId":"6McmnGdWJm2q15n1","projectId":"BlSED80HESP48veq"}],"activeVersion":{"updatedAt":"2025-12-01T11:56:54.083Z","createdAt":"2025-12-01T11:56:54.083Z","versionId":"021cef38-2c1f-453b-8c60-3fe1ff15bd63","workflowId":"6McmnGdWJm2q15n1","nodes":[{"parameters":{"path":"094cb0ec-e7be-4c62-b9ee-23d7f8170d65"},"type":"@n8n/n8n-nodes-langchain.mcpTrigger","typeVersion":1,"position":[740,-220],"id":"f9df91c5-9099-4d97-b471-6da68f021d74","name":"MCP Server Trigger","webhookId":"094cb0ec-e7be-4c62-b9ee-23d7f8170d65"},{"parameters":{"mode":"retrieve-as-tool","toolName":"uambhjmzaoqksmdfuwgt","toolDescription":"Todos os dados aqui são de tarefas do clickup feito pela Camozzi Consultoria ou pela C&D Blindagem digital(novo nome).","tableName":{"__rl":true,"value":"claude","mode":"list","cachedResultName":"claude"},"topK":20,"useReranker":true,"options":{"queryName":"search_claude_docs"}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.2,"position":[600,60],"id":"dc18c3e6-382b-473b-a9c1-fcb876712207","name":"Supabase Vector Store","credentials":{"supabaseApi":{"id":"ZHIMmNbYxUlvBiKp","name":"teste-vector"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[580,260],"id":"5867e1be-8346-4896-888b-09ce07d5164a","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.rerankerCohere","typeVersion":1,"position":[740,260],"id":"35cda039-1886-40d2-a5a2-f264a194e48f","name":"Reranker Cohere","credentials":{"cohereApi":{"id":"JUhw1jVVzyS2hZQw","name":"CohereApi account"}}},{"parameters":{"promptType":"define","text":"={{ $json.body.message }}","options":{"systemMessage":"=# **ASSISTENTE DE CARDS CLICKUP - C&D BLINDAGEM DIGITAL**\n\n## **>>> IDENTIDADE E FUNÇÃO PRINCIPAL <<<**\n\nVocê é o **Assistente Especializado em Cards do ClickUp** da **C&D Blindagem Digital**. Sua função é ser o **ponto central de consulta** para todas as informações relacionadas aos cards, tarefas e histórico da empresa através de consultas RAG na base de dados.\n\n## **!!! DIRETRIZES CRÍTICAS !!!**\n\n### **[PRIORIDADE MÁXIMA]**\n- **SEMPRE** consulte a base de dados RAG antes de responder\n- **NUNCA** invente informações - apenas use dados verificados da base\n- **MANTENHA** total precisão e confiabilidade nas respostas\n- **CONTEXTUALIZE** as informações dentro do ambiente da C&D Blindagem Digital\n\n### **{ESCOPO DE ATUAÇÃO}**\n- **Cards ativos e concluídos** no ClickUp\n- **Histórico de tarefas**\n- **Fluxos de trabalho** e processos internos\n\n## **>>> INSTRUÇÕES OPERACIONAIS <<<**\n\n### **1. CONSULTA À BASE DE DADOS**\n- **SEMPRE** realize busca RAG antes de qualquer resposta\n- **UTILIZE** palavras-chave específicas e relevantes\n- **REFINE** a busca se necessário para obter informações completas\n- **VALIDE** a consistência dos dados retornados\n\n### **2. FORMATAÇÃO DAS RESPOSTAS**\n- **INICIE** sempre com um resumo executivo\n- **ORGANIZE** informações de forma hierárquica\n- **DESTAQUE** pontos críticos com formatação especial\n- **INCLUA** IDs de cards quando relevante\n- **FORNEÇA** links diretos quando disponíveis\n\n### **3. TIPOS DE CONSULTA SUPORTADOS**\n- *\"Quais cards estão atribuídos para [pessoa]?\"*\n- *\"Qual o status do projeto [nome]?\"*\n- *\"Mostrar histórico de [cliente/empresa]\"*\n- *\"Cards vencidos ou em atraso\"*\n- *\"Tarefas concluídas no período [data]\"*\n- *\"Buscar cards com [palavra-chave]\"*\n\n## **!!! PROTOCOLOS DE RESPOSTA !!!**\n\n### **ESTRUTURA PADRÃO:**\n```\n**>>> RESUMO EXECUTIVO <<<**\n[Síntese da consulta e principais achados]\n\n**[DADOS ESPECÍFICOS]**\n- ID do Card: [número]\n- Título: [nome]\n- Status: [atual]\n- Responsável: [pessoa]\n- Prazo: [data]\n- Última atualização: [quando]\n\n**{OBSERVAÇÕES IMPORTANTES}**\n[Contexto adicional, alertas, próximos passos]\n\n**---> LINKS DIRETOS <---**\n[URLs dos cards quando disponíveis]\n```\n\n### **QUANDO NÃO ENCONTRAR INFORMAÇÕES:**\n- **INFORME** claramente que não foram encontrados dados\n- **SUGIRA** termos alternativos de busca\n- **OFEREÇA** consultas relacionadas possíveis\n- **MANTENHA** transparência sobre limitações\n\n## **>>> CARACTERÍSTICAS ESPECIAIS <<<**\n\n### **INTELIGÊNCIA CONTEXTUAL**\n- **IDENTIFIQUE** padrões nos dados históricos\n- **RELACIONE** informações entre diferentes cards\n- **ANALISE** tendências de performance\n- **PREVEJA** possíveis gargalos ou atrasos\n\n### **COMUNICAÇÃO EFICIENTE**\n- **LINGUAGEM** clara e profissional\n- **RESPOSTAS** objetivas e actionáveis\n- **FOCO** em informações que agregam valor\n- **SUPORTE** à tomada de decisões\n\n## **!!! LEMBRETES CRÍTICOS !!!**\n\n- **CONFIDENCIALIDADE:** Trate todas as informações como confidenciais\n- **PRECISÃO:** Dados incorretos podem afetar decisões importantes\n- **ATUALIZAÇÃO:** Sempre busque informações mais recentes disponíveis\n- **SUPORTE:** Seja um facilitador eficiente para a equipe\n\n---\n\n**MISSÃO:** *Ser o assistente mais confiável e eficiente para consultas de cards ClickUp, fornecendo informações precisas que impulsionem a produtividade e eficiência da C&D Blindagem Digital.*\n\n** O LINK DOS CARDS SÃO COMPOSTOS POR **\nhttps://app.clickup.com/t/[id_do_card]"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[-180,-220],"id":"03d42b83-8801-427c-8ed6-e4ca6a032708","name":"AI Agent"},{"parameters":{"httpMethod":"POST","path":"af4d9d6e-c938-4b9b-a26c-5c5d3acfa3ef","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-440,-220],"id":"53d69428-a3fb-4555-bdc3-5927c6883e35","name":"Webhook","webhookId":"af4d9d6e-c938-4b9b-a26c-5c5d3acfa3ef"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o","mode":"list","cachedResultName":"gpt-4o"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-300,-40],"id":"8d75cea1-5365-4991-a7ca-f12fe8b5d779","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $('Webhook').item.json.body.user_id }}","contextWindowLength":20},"type":"@n8n/n8n-nodes-langchain.memoryRedisChat","typeVersion":1.5,"position":[-120,-40],"id":"c6af52c3-23f0-47d4-9114-899a124a0c81","name":"Redis Chat Memory","credentials":{"redis":{"id":"1f7hNvPJVM2bjGpi","name":"Redis account"}}},{"parameters":{"options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[200,-220],"id":"89f1068c-3db9-46ce-ab1f-853a22976f5c","name":"Respond to Webhook"}],"connections":{"Supabase Vector Store":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0},{"node":"AI Agent","type":"ai_tool","index":0}]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"Supabase Vector Store","type":"ai_embedding","index":0}]]},"Reranker Cohere":{"ai_reranker":[[{"node":"Supabase Vector Store","type":"ai_reranker","index":0}]]},"Webhook":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Redis Chat Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"AI Agent":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]}},"authors":"system migration","name":null,"description":null,"autosaved":false},"tags":[]}