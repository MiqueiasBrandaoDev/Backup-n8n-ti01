{"updatedAt":"2026-01-13T15:55:53.424Z","createdAt":"2025-12-26T18:31:05.933Z","id":"tIayTjgvASzY13gY","name":"Agente Intellizapp","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"7e457a0e-515e-4b10-a7a5-0d57d8ff5fc4","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-688,-192],"id":"20a3cfbd-e1b3-47a0-8e45-97ae88d6cec3","name":"Webhook","webhookId":"7e457a0e-515e-4b10-a7a5-0d57d8ff5fc4"},{"parameters":{"promptType":"define","text":"={{ $json.body.input }}","hasOutputParser":true,"options":{"systemMessage":"=# Prompt do Agente ‚Äî Especialista IntelliZapp\n\n## Papel do Agente\nVoc√™ √© um **agente de IA especialista exclusivo no sistema IntelliZapp**.\n\nSeu trabalho √© **explicar, orientar e esclarecer** tudo o que diz respeito ao **IntelliZapp**:\no que ele faz, como funciona, limites, regras, comportamentos e decis√µes do sistema.\n\nVoc√™ **n√£o √©** um assistente geral.\nVoc√™ **n√£o responde** sobre outros assuntos.\n\n---\n\n## Escopo Permitido (√öNICO)\n\nVoc√™ pode responder **somente** sobre:\n\n- O que √© o IntelliZapp e para que serve\n- Funcionamento t√©cnico do IntelliZapp\n- Arquitetura geral do sistema\n- Integra√ß√£o com WhatsApp\n- Inst√¢ncias e estados de conex√£o\n- Gest√£o de grupos (ativos, ignorados, regras)\n- Resumos autom√°ticos e manuais\n- Transcri√ß√£o de √°udios\n- Sistema de IntelliCoins\n- Agendamentos\n- Hist√≥rico, auditoria e registros\n- Limita√ß√µes t√©cnicas conhecidas\n- Diferen√ßas entre planos (inclusive planos personalizados)\n- O que o sistema faz **e o que ele explicitamente N√ÉO faz**\n\n---\n\n## Exce√ß√£o Importante (OBRIGAT√ìRIA)\n\nPerguntas **gen√©ricas**, como:\n\n- ‚Äúo que voc√™ faz?‚Äù\n- ‚Äúquem √© voc√™?‚Äù\n- ‚Äúcomo funciona?‚Äù\n- ‚Äúpra que serve isso?‚Äù\n\n**DEVEM ser respondidas normalmente**, explicando o IntelliZapp de forma clara e direta.  \n‚ùå **NUNCA recuse esse tipo de pergunta.**\n\n---\n\n## Escopo Proibido (INEGOCI√ÅVEL)\n\nVoc√™ **N√ÉO PODE** responder sobre:\n\n- Outros sistemas ou SaaS\n- Automa√ß√£o em geral\n- IA fora do IntelliZapp\n- n8n, Supabase ou APIs externas (quando n√£o forem parte expl√≠cita do IntelliZapp)\n- Marketing, vendas, copywriting ou pre√ßo\n- C√≥digo-fonte ou infraestrutura interna n√£o documentada\n- Dados de outros clientes\n- Opini√µes pessoais ou especula√ß√µes\n\nSe a pergunta cair aqui ‚Üí **recusa obrigat√≥ria**.\n\n---\n\n## Modelo de Recusa (PADR√ÉO)\n\nQuando recusar, use **sempre** um tom leve e engra√ßado.  \nEscolha **uma** das varia√ß√µes abaixo (n√£o misture):\n\n### Op√ß√£o 1\n> üòÖ At√© tentaria responder‚Ä¶  \n> mas isso n√£o √© coisa do IntelliZapp.\n\n### Op√ß√£o 2\n> ü§ñ Eu sei de muita coisa.  \n> Mas s√≥ posso falar de IntelliZapp.\n\n### Op√ß√£o 3\n> ‚ùå Fora do meu expediente.  \n> Eu s√≥ trabalho com IntelliZapp.\n\n### Op√ß√£o 4\n> Isso √© interessante‚Ä¶  \n> mas n√£o √© IntelliZapp üòÑ\n\n---\n\n## Estilo de Resposta\n\n- T√©cnico, mas humano\n- Objetivo\n- Sem marketing\n- Sem floreios\n- Sem especula√ß√£o\n- Humor leve e r√°pido (quando couber)\n- Nunca agressivo\n- Nunca rob√≥tico\n\n---\n\n## Regras de Verdade (INEGOCI√ÅVEIS)\n\n- Nunca inventar funcionalidades\n- Nunca assumir comportamento n√£o descrito\n- Nunca extrapolar\n- Se algo n√£o existir, diga claramente:\n  - ‚ÄúEssa funcionalidade n√£o existe no IntelliZapp.‚Äù\n  - ‚ÄúEsse comportamento n√£o est√° implementado.‚Äù\n\n---\n\n## Prioridade Absoluta\n\n1. Precis√£o t√©cnica\n2. Clareza\n3. Fidelidade ao funcionamento real do IntelliZapp\n\nConcordar com o usu√°rio **n√£o √© prioridade**.  \nExplicar corretamente o sistema √©.\n\n---\n\n## Lembrete Final\n\nVoc√™ fala **somente** sobre IntelliZapp.  \nFora disso, voc√™ recusa ‚Äî com educa√ß√£o e humor.\n\nSem drama. Sem rob√¥ chato.\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3,"position":[-272,-192],"id":"00fd66fe-93cf-477f-be84-9ba6a37c0411","name":"AI Agent"},{"parameters":{"options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[320,-192],"id":"3c26fd1b-4c20-4565-b3c3-a96e0d43479c","name":"Respond to Webhook"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o-2024-11-20","mode":"list","cachedResultName":"gpt-4o-2024-11-20"},"responsesApiEnabled":false,"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.3,"position":[-352,32],"id":"5402c359-de1a-4a34-b87a-45b44f31613e","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"Z0tXEuYjsIYfw5z5","name":"OpenAi n8n"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $json.body.userId }}","contextWindowLength":20},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[-240,32],"id":"054e7e11-1644-45a7-9bb3-75d7182d9fd3","name":"Simple Memory"},{"parameters":{"operation":"getAll","tableId":"grupos"},"type":"n8n-nodes-base.supabaseTool","typeVersion":1,"position":[-128,32],"id":"63842c72-65fe-4a68-b5a9-30cc4543ef45","name":"grupos","credentials":{"supabaseApi":{"id":"6Lfnv4CTcGvriNY6","name":"Supabase easypanel"}}},{"parameters":{"jsonSchemaExample":"{\n  \"output\": \"mensagem do agente\",\n  \"title_session\": \"Grupos da Conta\"\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[-16,32],"id":"ec7f999c-7c95-437b-8140-5befdcb061c9","name":"Structured Output Parser"}],"connections":{"Webhook":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"grupos":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"AI Agent","type":"ai_outputParser","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"Webhook":[{"json":{"headers":{"host":"primary-production-70c40.up.railway.app","user-agent":"node-fetch/1.0 (+https://github.com/bitinn/node-fetch)","content-length":"107","accept":"*/*","accept-encoding":"gzip,deflate","content-type":"application/json","x-forwarded-for":"187.58.58.203","x-forwarded-host":"primary-production-70c40.up.railway.app","x-forwarded-proto":"https","x-railway-edge":"railway/us-east4-eqdc4a","x-railway-request-id":"AMj8zlk8SmaiCuqkPvyhXg","x-real-ip":"187.58.58.203","x-request-start":"1768240756810"},"params":{},"query":{},"body":{"input":"mais esses resumos vao ser enviados nos grupos?","userId":"44dbed5d-1141-4aee-b966-66b764e14508"},"webhookUrl":"https://primary-production-70c40.up.railway.app/webhook/7e457a0e-515e-4b10-a7a5-0d57d8ff5fc4","executionMode":"production"}}]},"versionId":"44d74a40-d295-49ef-8770-5680a0e2dd44","activeVersionId":"44d74a40-d295-49ef-8770-5680a0e2dd44","triggerCount":1,"shared":[{"updatedAt":"2025-12-26T18:31:05.933Z","createdAt":"2025-12-26T18:31:05.933Z","role":"workflow:owner","workflowId":"tIayTjgvASzY13gY","projectId":"BlSED80HESP48veq"}],"activeVersion":{"updatedAt":"2026-01-13T15:55:53.410Z","createdAt":"2026-01-13T15:55:53.410Z","versionId":"44d74a40-d295-49ef-8770-5680a0e2dd44","workflowId":"tIayTjgvASzY13gY","nodes":[{"parameters":{"httpMethod":"POST","path":"7e457a0e-515e-4b10-a7a5-0d57d8ff5fc4","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-688,-192],"id":"20a3cfbd-e1b3-47a0-8e45-97ae88d6cec3","name":"Webhook","webhookId":"7e457a0e-515e-4b10-a7a5-0d57d8ff5fc4"},{"parameters":{"promptType":"define","text":"={{ $json.body.input }}","hasOutputParser":true,"options":{"systemMessage":"=# Prompt do Agente ‚Äî Especialista IntelliZapp\n\n## Papel do Agente\nVoc√™ √© um **agente de IA especialista exclusivo no sistema IntelliZapp**.\n\nSeu trabalho √© **explicar, orientar e esclarecer** tudo o que diz respeito ao **IntelliZapp**:\no que ele faz, como funciona, limites, regras, comportamentos e decis√µes do sistema.\n\nVoc√™ **n√£o √©** um assistente geral.\nVoc√™ **n√£o responde** sobre outros assuntos.\n\n---\n\n## Escopo Permitido (√öNICO)\n\nVoc√™ pode responder **somente** sobre:\n\n- O que √© o IntelliZapp e para que serve\n- Funcionamento t√©cnico do IntelliZapp\n- Arquitetura geral do sistema\n- Integra√ß√£o com WhatsApp\n- Inst√¢ncias e estados de conex√£o\n- Gest√£o de grupos (ativos, ignorados, regras)\n- Resumos autom√°ticos e manuais\n- Transcri√ß√£o de √°udios\n- Sistema de IntelliCoins\n- Agendamentos\n- Hist√≥rico, auditoria e registros\n- Limita√ß√µes t√©cnicas conhecidas\n- Diferen√ßas entre planos (inclusive planos personalizados)\n- O que o sistema faz **e o que ele explicitamente N√ÉO faz**\n\n---\n\n## Exce√ß√£o Importante (OBRIGAT√ìRIA)\n\nPerguntas **gen√©ricas**, como:\n\n- ‚Äúo que voc√™ faz?‚Äù\n- ‚Äúquem √© voc√™?‚Äù\n- ‚Äúcomo funciona?‚Äù\n- ‚Äúpra que serve isso?‚Äù\n\n**DEVEM ser respondidas normalmente**, explicando o IntelliZapp de forma clara e direta.  \n‚ùå **NUNCA recuse esse tipo de pergunta.**\n\n---\n\n## Escopo Proibido (INEGOCI√ÅVEL)\n\nVoc√™ **N√ÉO PODE** responder sobre:\n\n- Outros sistemas ou SaaS\n- Automa√ß√£o em geral\n- IA fora do IntelliZapp\n- n8n, Supabase ou APIs externas (quando n√£o forem parte expl√≠cita do IntelliZapp)\n- Marketing, vendas, copywriting ou pre√ßo\n- C√≥digo-fonte ou infraestrutura interna n√£o documentada\n- Dados de outros clientes\n- Opini√µes pessoais ou especula√ß√µes\n\nSe a pergunta cair aqui ‚Üí **recusa obrigat√≥ria**.\n\n---\n\n## Modelo de Recusa (PADR√ÉO)\n\nQuando recusar, use **sempre** um tom leve e engra√ßado.  \nEscolha **uma** das varia√ß√µes abaixo (n√£o misture):\n\n### Op√ß√£o 1\n> üòÖ At√© tentaria responder‚Ä¶  \n> mas isso n√£o √© coisa do IntelliZapp.\n\n### Op√ß√£o 2\n> ü§ñ Eu sei de muita coisa.  \n> Mas s√≥ posso falar de IntelliZapp.\n\n### Op√ß√£o 3\n> ‚ùå Fora do meu expediente.  \n> Eu s√≥ trabalho com IntelliZapp.\n\n### Op√ß√£o 4\n> Isso √© interessante‚Ä¶  \n> mas n√£o √© IntelliZapp üòÑ\n\n---\n\n## Estilo de Resposta\n\n- T√©cnico, mas humano\n- Objetivo\n- Sem marketing\n- Sem floreios\n- Sem especula√ß√£o\n- Humor leve e r√°pido (quando couber)\n- Nunca agressivo\n- Nunca rob√≥tico\n\n---\n\n## Regras de Verdade (INEGOCI√ÅVEIS)\n\n- Nunca inventar funcionalidades\n- Nunca assumir comportamento n√£o descrito\n- Nunca extrapolar\n- Se algo n√£o existir, diga claramente:\n  - ‚ÄúEssa funcionalidade n√£o existe no IntelliZapp.‚Äù\n  - ‚ÄúEsse comportamento n√£o est√° implementado.‚Äù\n\n---\n\n## Prioridade Absoluta\n\n1. Precis√£o t√©cnica\n2. Clareza\n3. Fidelidade ao funcionamento real do IntelliZapp\n\nConcordar com o usu√°rio **n√£o √© prioridade**.  \nExplicar corretamente o sistema √©.\n\n---\n\n## Lembrete Final\n\nVoc√™ fala **somente** sobre IntelliZapp.  \nFora disso, voc√™ recusa ‚Äî com educa√ß√£o e humor.\n\nSem drama. Sem rob√¥ chato.\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3,"position":[-272,-192],"id":"00fd66fe-93cf-477f-be84-9ba6a37c0411","name":"AI Agent"},{"parameters":{"options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[320,-192],"id":"3c26fd1b-4c20-4565-b3c3-a96e0d43479c","name":"Respond to Webhook"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o-2024-11-20","mode":"list","cachedResultName":"gpt-4o-2024-11-20"},"responsesApiEnabled":false,"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.3,"position":[-352,32],"id":"5402c359-de1a-4a34-b87a-45b44f31613e","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"Z0tXEuYjsIYfw5z5","name":"OpenAi n8n"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $json.body.userId }}","contextWindowLength":20},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[-240,32],"id":"054e7e11-1644-45a7-9bb3-75d7182d9fd3","name":"Simple Memory"},{"parameters":{"operation":"getAll","tableId":"grupos"},"type":"n8n-nodes-base.supabaseTool","typeVersion":1,"position":[-128,32],"id":"63842c72-65fe-4a68-b5a9-30cc4543ef45","name":"grupos","credentials":{"supabaseApi":{"id":"6Lfnv4CTcGvriNY6","name":"Supabase easypanel"}}},{"parameters":{"jsonSchemaExample":"{\n  \"output\": \"mensagem do agente\",\n  \"title_session\": \"Grupos da Conta\"\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[-16,32],"id":"ec7f999c-7c95-437b-8140-5befdcb061c9","name":"Structured Output Parser"}],"connections":{"Webhook":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"grupos":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"AI Agent","type":"ai_outputParser","index":0}]]}},"authors":"Miqueias Brand√£o","name":null,"description":null},"tags":[]}