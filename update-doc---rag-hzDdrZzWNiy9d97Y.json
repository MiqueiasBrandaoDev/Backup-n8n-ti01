{"updatedAt":"2025-06-18T18:33:27.209Z","createdAt":"2025-06-17T14:00:37.984Z","id":"hzDdrZzWNiy9d97Y","name":"Update Doc - RAG","active":true,"isArchived":false,"nodes":[{"parameters":{"html":"<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<head>\n   <meta charset=\"UTF-8\">\n   <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n   <title>Document Upload</title>\n   <script src=\"https://cdn.tailwindcss.com\"></script>\n</head>\n<body>\n   <div class=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n       <div class=\"bg-white rounded-lg shadow-lg border border-gray-200 p-8 w-full max-w-md\">\n           <div class=\"text-center mb-6\">\n               <div class=\"w-12 h-12 bg-green-500 rounded-md flex items-center justify-center mx-auto mb-4\">\n                   <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                       <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                   </svg>\n               </div>\n               <h1 class=\"text-xl font-semibold text-gray-900\">Upload Document AGENT CREATOR CONTENT</h1>\n               <p class=\"text-sm text-gray-500\">PDF, DOC, DOCX, TXT, MD</p>\n           </div>\n\n           <form id=\"uploadForm\" class=\"space-y-4\">\n               <div>\n                   <input \n                       type=\"file\" \n                       id=\"fileInput\" \n                       accept=\".pdf,.doc,.docx,.txt,.md\"\n                       class=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\n                       required\n                   />\n               </div>\n               \n               <button \n                   type=\"submit\" \n                   id=\"uploadBtn\"\n                   class=\"w-full bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-md transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\"\n               >\n                   Upload Document\n               </button>\n           </form>\n\n           <!-- Status message -->\n           <div id=\"statusMessage\" class=\"mt-4 hidden\"></div>\n       </div>\n   </div>\n\n   <script>\n       const form = document.getElementById('uploadForm');\n       const fileInput = document.getElementById('fileInput');\n       const uploadBtn = document.getElementById('uploadBtn');\n       const statusMessage = document.getElementById('statusMessage');\n       const webhookUrl = 'https://primary-production-70c40.up.railway.app/webhook/4cc6bde9-4039-480b-8f7e-38d9f0a1955c';\n\n       form.addEventListener('submit', async (e) => {\n           e.preventDefault();\n           \n           const file = fileInput.files[0];\n           if (!file) {\n               showMessage('Please select a file', 'error');\n               return;\n           }\n\n           // Validate file\n           if (!validateFile(file)) {\n               return;\n           }\n\n           // Disable button and show loading\n           uploadBtn.disabled = true;\n           uploadBtn.textContent = 'Uploading...';\n           showMessage('Uploading document...', 'loading');\n\n           try {\n               const formData = new FormData();\n               formData.append('file', file);\n\n               const response = await fetch(webhookUrl, {\n                   method: 'POST',\n                   body: formData\n               });\n\n               if (response.ok) {\n                   showMessage('Document uploaded successfully!', 'success');\n                   form.reset();\n               } else {\n                   throw new Error(`Upload failed: ${response.status}`);\n               }\n           } catch (error) {\n               console.error('Upload error:', error);\n               showMessage('Upload failed. Please try again.', 'error');\n           } finally {\n               uploadBtn.disabled = false;\n               uploadBtn.textContent = 'Upload Document';\n           }\n       });\n\n       function validateFile(file) {\n           const allowedTypes = [\n               'application/pdf',\n               'application/msword',\n               'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n               'text/plain',\n               'text/markdown'\n           ];\n           \n           const maxSize = 10 * 1024 * 1024; // 10MB\n\n           if (!allowedTypes.includes(file.type)) {\n               showMessage('File type not supported: ' + file.name, 'error');\n               return false;\n           }\n\n           if (file.size > maxSize) {\n               showMessage('File too large: ' + file.name + '. Maximum 10MB.', 'error');\n               return false;\n           }\n\n           return true;\n       }\n\n       function showMessage(message, type) {\n           statusMessage.className = 'mt-4 p-3 rounded-md text-sm';\n           statusMessage.classList.remove('hidden');\n           \n           switch (type) {\n               case 'success':\n                   statusMessage.className += ' bg-green-100 text-green-800 border border-green-200';\n                   break;\n               case 'error':\n                   statusMessage.className += ' bg-red-100 text-red-800 border border-red-200';\n                   break;\n               case 'loading':\n                   statusMessage.className += ' bg-blue-100 text-blue-800 border border-blue-200';\n                   break;\n           }\n           \n           statusMessage.textContent = message;\n       }\n   </script>\n</body>\n</html>"},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[-40,-100],"id":"a4d89c14-02cf-42a1-bd1a-b0a6f77bfc49","name":"HTML"},{"parameters":{"respondWith":"text","responseBody":"={{ $json.html }}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.3,"position":[180,-100],"id":"464a35d6-be44-417b-88fb-ddac7aca021c","name":"Respond to Webhook"},{"parameters":{"mode":"insert","tableName":{"__rl":true,"value":"content_automation","mode":"list","cachedResultName":"content_automation"},"options":{"queryName":"content_automation_function"}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.2,"position":[420,260],"id":"f72254c1-af81-4643-94f0-9760ea941c87","name":"Supabase Vector Store","credentials":{"supabaseApi":{"id":"ZHIMmNbYxUlvBiKp","name":"teste-vector"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[360,480],"id":"2850f33e-8517-4cbd-82a2-86eb506c51ed","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"dataType":"binary","binaryMode":"specificField","options":{}},"type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1,"position":[560,480],"id":"06498974-ca1e-4cd0-a81d-808cdc8a482f","name":"Default Data Loader"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.textSplitterTokenSplitter","typeVersion":1,"position":[640,660],"id":"db08422a-784c-42d7-9fb0-5274a5d7ebe4","name":"Token Splitter"},{"parameters":{"httpMethod":"POST","path":"4cc6bde9-4039-480b-8f7e-38d9f0a1955c","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-260,260],"id":"7b8f812c-a93f-46e3-8cf7-6074c0abf6c6","name":"Webhook1","webhookId":"4cc6bde9-4039-480b-8f7e-38d9f0a1955c"},{"parameters":{"path":"updatefile-rag","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-260,-100],"id":"5def24bd-9019-4313-a15f-962a79ad4c7c","name":"Webhook","webhookId":"dafbd65a-b6e6-400f-a387-1af821d0bcfc"},{"parameters":{"operation":"binaryToPropery","binaryPropertyName":"file","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-40,260],"id":"1bae9fac-6a35-4d65-bb28-9a82a5e01969","name":"Extract from File"},{"parameters":{"operation":"toBinary","sourceProperty":"data","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[180,260],"id":"188a8904-a703-437e-8810-ffe9019141f5","name":"Convert to File"}],"connections":{"HTML":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"Supabase Vector Store":{"ai_tool":[[]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"Supabase Vector Store","type":"ai_embedding","index":0}]]},"Default Data Loader":{"ai_document":[[{"node":"Supabase Vector Store","type":"ai_document","index":0}]]},"Token Splitter":{"ai_textSplitter":[[{"node":"Default Data Loader","type":"ai_textSplitter","index":0}]]},"Webhook1":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"HTML","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Convert to File":{"main":[[{"node":"Supabase Vector Store","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"09fd25ca-7e1b-49f3-b1d1-0cfe16b9f60b","activeVersionId":"09fd25ca-7e1b-49f3-b1d1-0cfe16b9f60b","triggerCount":2,"shared":[{"updatedAt":"2025-06-17T14:00:37.984Z","createdAt":"2025-06-17T14:00:37.984Z","role":"workflow:owner","workflowId":"hzDdrZzWNiy9d97Y","projectId":"BlSED80HESP48veq"}],"activeVersion":{"updatedAt":"2025-12-01T11:56:54.083Z","createdAt":"2025-12-01T11:56:54.083Z","versionId":"09fd25ca-7e1b-49f3-b1d1-0cfe16b9f60b","workflowId":"hzDdrZzWNiy9d97Y","nodes":[{"parameters":{"html":"<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<head>\n   <meta charset=\"UTF-8\">\n   <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n   <title>Document Upload</title>\n   <script src=\"https://cdn.tailwindcss.com\"></script>\n</head>\n<body>\n   <div class=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n       <div class=\"bg-white rounded-lg shadow-lg border border-gray-200 p-8 w-full max-w-md\">\n           <div class=\"text-center mb-6\">\n               <div class=\"w-12 h-12 bg-green-500 rounded-md flex items-center justify-center mx-auto mb-4\">\n                   <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                       <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                   </svg>\n               </div>\n               <h1 class=\"text-xl font-semibold text-gray-900\">Upload Document AGENT CREATOR CONTENT</h1>\n               <p class=\"text-sm text-gray-500\">PDF, DOC, DOCX, TXT, MD</p>\n           </div>\n\n           <form id=\"uploadForm\" class=\"space-y-4\">\n               <div>\n                   <input \n                       type=\"file\" \n                       id=\"fileInput\" \n                       accept=\".pdf,.doc,.docx,.txt,.md\"\n                       class=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\n                       required\n                   />\n               </div>\n               \n               <button \n                   type=\"submit\" \n                   id=\"uploadBtn\"\n                   class=\"w-full bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-md transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\"\n               >\n                   Upload Document\n               </button>\n           </form>\n\n           <!-- Status message -->\n           <div id=\"statusMessage\" class=\"mt-4 hidden\"></div>\n       </div>\n   </div>\n\n   <script>\n       const form = document.getElementById('uploadForm');\n       const fileInput = document.getElementById('fileInput');\n       const uploadBtn = document.getElementById('uploadBtn');\n       const statusMessage = document.getElementById('statusMessage');\n       const webhookUrl = 'https://primary-production-70c40.up.railway.app/webhook/4cc6bde9-4039-480b-8f7e-38d9f0a1955c';\n\n       form.addEventListener('submit', async (e) => {\n           e.preventDefault();\n           \n           const file = fileInput.files[0];\n           if (!file) {\n               showMessage('Please select a file', 'error');\n               return;\n           }\n\n           // Validate file\n           if (!validateFile(file)) {\n               return;\n           }\n\n           // Disable button and show loading\n           uploadBtn.disabled = true;\n           uploadBtn.textContent = 'Uploading...';\n           showMessage('Uploading document...', 'loading');\n\n           try {\n               const formData = new FormData();\n               formData.append('file', file);\n\n               const response = await fetch(webhookUrl, {\n                   method: 'POST',\n                   body: formData\n               });\n\n               if (response.ok) {\n                   showMessage('Document uploaded successfully!', 'success');\n                   form.reset();\n               } else {\n                   throw new Error(`Upload failed: ${response.status}`);\n               }\n           } catch (error) {\n               console.error('Upload error:', error);\n               showMessage('Upload failed. Please try again.', 'error');\n           } finally {\n               uploadBtn.disabled = false;\n               uploadBtn.textContent = 'Upload Document';\n           }\n       });\n\n       function validateFile(file) {\n           const allowedTypes = [\n               'application/pdf',\n               'application/msword',\n               'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n               'text/plain',\n               'text/markdown'\n           ];\n           \n           const maxSize = 10 * 1024 * 1024; // 10MB\n\n           if (!allowedTypes.includes(file.type)) {\n               showMessage('File type not supported: ' + file.name, 'error');\n               return false;\n           }\n\n           if (file.size > maxSize) {\n               showMessage('File too large: ' + file.name + '. Maximum 10MB.', 'error');\n               return false;\n           }\n\n           return true;\n       }\n\n       function showMessage(message, type) {\n           statusMessage.className = 'mt-4 p-3 rounded-md text-sm';\n           statusMessage.classList.remove('hidden');\n           \n           switch (type) {\n               case 'success':\n                   statusMessage.className += ' bg-green-100 text-green-800 border border-green-200';\n                   break;\n               case 'error':\n                   statusMessage.className += ' bg-red-100 text-red-800 border border-red-200';\n                   break;\n               case 'loading':\n                   statusMessage.className += ' bg-blue-100 text-blue-800 border border-blue-200';\n                   break;\n           }\n           \n           statusMessage.textContent = message;\n       }\n   </script>\n</body>\n</html>"},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[-40,-100],"id":"a4d89c14-02cf-42a1-bd1a-b0a6f77bfc49","name":"HTML"},{"parameters":{"respondWith":"text","responseBody":"={{ $json.html }}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.3,"position":[180,-100],"id":"464a35d6-be44-417b-88fb-ddac7aca021c","name":"Respond to Webhook"},{"parameters":{"mode":"insert","tableName":{"__rl":true,"value":"content_automation","mode":"list","cachedResultName":"content_automation"},"options":{"queryName":"content_automation_function"}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.2,"position":[420,260],"id":"f72254c1-af81-4643-94f0-9760ea941c87","name":"Supabase Vector Store","credentials":{"supabaseApi":{"id":"ZHIMmNbYxUlvBiKp","name":"teste-vector"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[360,480],"id":"2850f33e-8517-4cbd-82a2-86eb506c51ed","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"dataType":"binary","binaryMode":"specificField","options":{}},"type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1,"position":[560,480],"id":"06498974-ca1e-4cd0-a81d-808cdc8a482f","name":"Default Data Loader"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.textSplitterTokenSplitter","typeVersion":1,"position":[640,660],"id":"db08422a-784c-42d7-9fb0-5274a5d7ebe4","name":"Token Splitter"},{"parameters":{"httpMethod":"POST","path":"4cc6bde9-4039-480b-8f7e-38d9f0a1955c","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-260,260],"id":"7b8f812c-a93f-46e3-8cf7-6074c0abf6c6","name":"Webhook1","webhookId":"4cc6bde9-4039-480b-8f7e-38d9f0a1955c"},{"parameters":{"path":"updatefile-rag","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-260,-100],"id":"5def24bd-9019-4313-a15f-962a79ad4c7c","name":"Webhook","webhookId":"dafbd65a-b6e6-400f-a387-1af821d0bcfc"},{"parameters":{"operation":"binaryToPropery","binaryPropertyName":"file","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-40,260],"id":"1bae9fac-6a35-4d65-bb28-9a82a5e01969","name":"Extract from File"},{"parameters":{"operation":"toBinary","sourceProperty":"data","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[180,260],"id":"188a8904-a703-437e-8810-ffe9019141f5","name":"Convert to File"}],"connections":{"HTML":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"Supabase Vector Store":{"ai_tool":[[]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"Supabase Vector Store","type":"ai_embedding","index":0}]]},"Default Data Loader":{"ai_document":[[{"node":"Supabase Vector Store","type":"ai_document","index":0}]]},"Token Splitter":{"ai_textSplitter":[[{"node":"Default Data Loader","type":"ai_textSplitter","index":0}]]},"Webhook1":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"HTML","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Convert to File":{"main":[[{"node":"Supabase Vector Store","type":"main","index":0}]]}},"authors":"system migration","name":null,"description":null,"autosaved":false},"tags":[]}