{"updatedAt":"2025-06-14T14:56:30.250Z","createdAt":"2025-06-11T18:33:33.713Z","id":"l3kQDFtc65BxGduY","name":"CURADORIA com GPT","active":false,"isArchived":true,"nodes":[{"parameters":{"promptType":"define","text":"={{ $json.body.data.message.conversation }}","options":{"systemMessage":"=Você é um agente especializado em criação de conteúdo educacional. Siga estas etapas OBRIGATORIAMENTE:\n\nETAPA 1 - COLETA DE INFORMAÇÕES:\nPrimeiro, pergunte ao usuário:\n\"Sobre o tema '{{ $json.body.data.message.conversation }}', você tem algum tópico específico que gostaria de incluir obrigatoriamente na lista? Responda com os tópicos desejados ou digite 'NENHUM' se não tiver preferências específicas.\"\n\nAGUARDE A RESPOSTA DO USUÁRIO antes de prosseguir para a Etapa 2.\n\nETAPA 2 - GERAÇÃO DE CONTEÚDO:\nSomente após receber a resposta do usuário, crie uma lista de tópicos sobre {{ $json.body.data.message.conversation }} com base nas seguintes configurações:\n\nConfigurações obrigatórias:\n- Quantidade de tópicos: [USUÁRIO DEVE INFORMAR O NÚMERO]\n- Tópicos específicos obrigatórios: [USAR A RESPOSTA DA ETAPA 1]\n- Tema: {{ $json.body.data.message.conversation }}\n- Nível: intermediário\n- Público-alvo: Geral\n\nCritérios de conteúdo:\n- Linguagem didática e acessível\n- Relevância prática para iniciantes/intermediários\n- Sequência lógica de aprendizado\n- Foco em conceitos fundamentais e práticos\n- Cada tópico deve ter 3-4 pontos-chave explicativos\n- Incluir uma frase resumo por tópico\n\nESTRUTURA JSON para a tool:\n{\n\"titulo_geral\": \"Título Principal do Tema\",\n\"quantidade_topicos\": X,\n\"topicos\": [\n  {\n    \"id\": 1,\n    \"titulo\": \"Título do Tópico\",\n    \"pontos_chave\": [\n      \"Ponto principal 1\",\n      \"Ponto principal 2\",\n      \"Ponto principal 3\",\n      \"Ponto principal 4 (opcional)\"\n    ],\n    \"resumo\": \"Uma frase explicativa do conceito central\"\n  }\n]\n}\n\nETAPA 3 - GERAÇÃO DE IMAGENS:\nIMEDIATAMENTE após criar o JSON, chame a tool #Gerando_Imagens passando o JSON completo como parâmetro.\n\nREGRAS CRÍTICAS:\n1. NUNCA pule a Etapa 1 - sempre pergunte primeiro\n2. Na Etapa 1: responda APENAS com a pergunta\n3. Na Etapa 2: crie o JSON internamente (não mostre ao usuário)\n4. Na Etapa 3: SEMPRE chame a tool #Gerando_Imagens com o JSON\n5. Se o usuário informou tópicos específicos, OBRIGATORIAMENTE os inclua na lista\n6. TODAS as 3 etapas devem ser executadas em sequência\n7. O usuário só deve ver a pergunta da Etapa 1 e depois o resultado da tool"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[0,-100],"id":"0beb6e20-f347-4892-963a-52ee4f193621","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o","mode":"list","cachedResultName":"gpt-4o"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-80,100],"id":"8540d6cd-b383-44ee-b3a2-e983e65835bf","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"content":"## CURADORIA DO CONTEÚDO","height":420,"width":540},"type":"n8n-nodes-base.stickyNote","position":[-140,-180],"typeVersion":1,"id":"c8210377-292c-4974-b718-edf12942fe93","name":"Sticky Note"},{"parameters":{"description":"Chame esta ferramenta quando tiver o json estruturado.\n\n{\n \"titulo_geral\": \"Título Principal do Tema\",\n \"quantidade_topicos\": X,\n \"topicos\": [\n   {\n     \"id\": 1,\n     \"titulo\": \"Título do Tópico\",\n     \"pontos_chave\": [\n       \"Ponto principal 1\",\n       \"Ponto principal 2\",\n       \"Ponto principal 3\",\n       \"Ponto principal 4 (opcional)\"\n     ],\n     \"resumo\": \"Uma frase explicativa do conceito central\"\n   }\n ]\n}","workflowId":{"__rl":true,"value":"hQZWoCu60j8KZN05","mode":"list","cachedResultName":"Criação das imagens"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2.2,"position":[260,100],"id":"cd773c8b-5cfa-480a-972f-8bf30600f8c1","name":"Gerando_Imagens"},{"parameters":{"httpMethod":"POST","path":"17014563-1555-45a7-a8dc-1d9bd5ba4bb1","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-300,-100],"id":"026912a9-b6b3-4636-9f6a-031623eca1eb","name":"Webhook","webhookId":"17014563-1555-45a7-a8dc-1d9bd5ba4bb1"},{"parameters":{"sessionIdType":"customKey","sessionKey":"=123"},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[100,100],"id":"f61ce83a-68b8-48b7-8091-eed4758e3f03","name":"Simple Memory"},{"parameters":{"resource":"messages-api","instanceName":"Miqueias","remoteJid":"120363418455505955@g.us","messageText":"={{ $json.output }}","options_message":{}},"type":"n8n-nodes-evolution-api.evolutionApi","typeVersion":1,"position":[480,-100],"id":"4e08afe2-6e04-4b20-ac81-28d6fc64cd35","name":"Evolution API","credentials":{"evolutionApi":{"id":"V2fpHnZeAReBnCaU","name":"Evolution account"}}}],"connections":{"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"AI Agent":{"main":[[{"node":"Evolution API","type":"main","index":0}]]},"Gerando_Imagens":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Webhook":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"8551c278-c77b-4f2d-9d8a-b25de110a586","triggerCount":1,"shared":[{"updatedAt":"2025-06-11T18:33:33.713Z","createdAt":"2025-06-11T18:33:33.713Z","role":"workflow:owner","workflowId":"l3kQDFtc65BxGduY","projectId":"BlSED80HESP48veq"}],"tags":[]}