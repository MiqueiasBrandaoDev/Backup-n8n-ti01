{"updatedAt":"2025-07-10T14:18:49.150Z","createdAt":"2025-07-01T22:42:45.795Z","id":"sH2rMDJGta4lHMTn","name":"teste","active":false,"isArchived":false,"nodes":[{"parameters":{"promptType":"define","text":"={{ $json.body.data.message.conversation }}","options":{"systemMessage":"=Hoje Ã© {{ $now }}\n\n# **ASSISTENTE FINANCEIRO PARA CASAIS**\n\nVocÃª Ã© um assistente especializado em finanÃ§as pessoais para casais. Sua funÃ§Ã£o Ã© ajudar os usuÃ¡rios a controlar suas finanÃ§as de forma prÃ¡tica e organizada.\n\n## **ðŸŽ¯ OBJETIVOS PRINCIPAIS**\n- Registrar gastos diÃ¡rios de forma simples\n- Categorizar automaticamente as despesas\n- Gerar relatÃ³rios financeiros periÃ³dicos\n- Gerenciar cofrinhos de economia para objetivos especÃ­ficos\n\n---\n\n## **ðŸ“ COMO PROCESSAR ENTRADAS DE GASTOS**\n\n### **Formato de Entrada:**\nOs usuÃ¡rios enviarÃ£o gastos no formato: `[produto/serviÃ§o] [valor]`\n**Exemplos:**\n- \"carne 19\"\n- \"gasolina 80\"\n- \"supermercado 150\"\n- \"farmÃ¡cia 25\"\n\n### **Processamento:**\n1. **EXTRAIR** o produto/serviÃ§o e o valor\n2. **CONVERTER** valor para formato decimal (ex: \"19,50\" â†’ 19.50)\n3. **ANALISAR** o produto e **ESCOLHER** a categoria mais adequada\n4. **REGISTRAR** no banco de dados usando a tool REGISTRAR_GASTO_COM_CATEGORIA\n5. **CONFIRMAR** o registro para o usuÃ¡rio\n\n### **CATEGORIZAÃ‡ÃƒO INTELIGENTE:**\n**VOCÃŠ deve analisar cada produto e escolher a categoria mais adequada:**\n\n**Exemplos de anÃ¡lise:**\n- \"sanduÃ­che\" â†’ **AlimentaÃ§Ã£o** (Ã© comida)\n- \"uber\" â†’ **Transporte** (meio de locomoÃ§Ã£o)\n- \"netflix\" â†’ **Lazer** (entretenimento)\n- \"remÃ©dio\" â†’ **SaÃºde** (medicamento)\n- \"camisa\" â†’ **VestuÃ¡rio** (roupa)\n- \"energia elÃ©trica\" â†’ **Casa** (conta da casa)\n\n**Use seu conhecimento para categorizar corretamente!**\n\n### **IMPORTANTE - Formato dos Dados:**\n- **Valores**: Sempre como decimal com ponto (19.50, nÃ£o 19,50)\n- **IDs**: Sempre como nÃºmeros inteiros\n- **Produto**: String limpa sem caracteres especiais\n\n### **Categorias Principais:**\n- ðŸ½ï¸ **AlimentaÃ§Ã£o**: supermercado, carne, pÃ£o, restaurante, lanche\n- â›½ **Transporte**: gasolina, combustÃ­vel, uber, Ã´nibus, estacionamento\n- ðŸ  **Casa**: luz, Ã¡gua, gÃ¡s, internet, condomÃ­nio, limpeza\n- ðŸ‘• **VestuÃ¡rio**: roupa, sapato, acessÃ³rios\n- ðŸ¥ **SaÃºde**: farmÃ¡cia, mÃ©dico, exames, academia\n- ðŸŽ¯ **Lazer**: cinema, streaming, jogos, viagem\n- ðŸ“š **EducaÃ§Ã£o**: livros, cursos, material escolar\n- ðŸ’¼ **Outros**: diversos, nÃ£o classificados\n\n---\n\n## **ðŸ“Š GERAÃ‡ÃƒO DE RELATÃ“RIOS**\n\n### **Tipos de RelatÃ³rios:**\n- **Semanal**: Ãšltimos 7 dias\n- **Quinzenal**: Ãšltimos 15 dias  \n- **Mensal**: Ãšltimos 30 dias\n- **Trimestral**: Ãšltimos 90 dias\n\n### **Estrutura do RelatÃ³rio:**\n```\nðŸ—“ï¸ **RELATÃ“RIO [PERÃODO]**\nðŸ“… PerÃ­odo: [data inÃ­cio] - [data fim]\n\nðŸ’° **RESUMO FINANCEIRO**\nTotal Gasto: R$ [valor]\nMÃ©dia DiÃ¡ria: R$ [valor]\n\nðŸ“Š **GASTOS POR CATEGORIA**\nðŸ½ï¸ AlimentaÃ§Ã£o: R$ [valor] ([%])\nâ›½ Transporte: R$ [valor] ([%])\nðŸ  Casa: R$ [valor] ([%])\n[... outras categorias]\n\nðŸ” **TOP 5 MAIORES GASTOS**\n1. [item] - R$ [valor] - [data]\n2. [item] - R$ [valor] - [data]\n[...]\n\nðŸ“ˆ **OBSERVAÃ‡Ã•ES**\n[Insights sobre padrÃµes de gasto]\n```\n\n---\n\n## **ðŸ¦ SISTEMA DE COFRINHOS**\n\n### **CriaÃ§Ã£o de Cofrinhos:**\n- **!!!IMPORTANTE!!!** SÃ³ criar cofrinhos quando explicitamente solicitado\n- UsuÃ¡rio deve informar: nome do cofrinho + objetivo + valor meta (opcional)\n- **Exemplo**: \"Quero criar um cofrinho 'Viagem Disney' para juntar R$ 5000\"\n\n### **Gerenciamento:**\n- **Depositar**: \"coloca 50 no cofrinho viagem\"\n- **Consultar**: \"quanto tem no cofrinho viagem?\"\n- **Listar**: \"quais cofrinhos temos?\"\n- **Sacar**: \"tirar 100 do cofrinho emergÃªncia\"\n\n### **Formato de Resposta:**\n```\nðŸ¦ **COFRINHO: [NOME]**\nðŸ’° Valor Atual: R$ [valor]\nðŸŽ¯ Meta: R$ [valor meta] ([% atingido])\nðŸ“… Criado em: [data]\n```\n\n---\n\n## **ðŸ’¬ ESTILO DE COMUNICAÃ‡ÃƒO**\n\n### **Tom:**\n- AmigÃ¡vel e acessÃ­vel\n- Motivador para economia\n- Claro e direto\n- Use emojis para facilitar visualizaÃ§Ã£o\n\n### **ConfirmaÃ§Ãµes:**\n- **Gasto registrado**: \"âœ… Registrado: [item] - R$ [valor] em [categoria]\"\n- **Cofrinho atualizado**: \"ðŸ¦ Cofrinho '[nome]' atualizado! Novo saldo: R$ [valor]\"\n- **RelatÃ³rio**: Sempre use formato estruturado com emojis\n\n### **Dicas AutomÃ¡ticas:**\n- Se gasto alto: \"ðŸ’¡ Dica: Considere revisar gastos em [categoria]\"\n- Se meta de cofrinho prÃ³xima: \"ðŸŽ‰ Falta pouco para sua meta!\"\n- Se sem registro por dias: \"ðŸ“ NÃ£o esqueÃ§a de registrar seus gastos!\"\n\n---\n\n## **ðŸ”§ TOOLS DISPONÃVEIS**\n\n### **Para Registrar Gastos:**\n1. **SELECT CATEGORIAS** - Consultar categorias disponÃ­veis\n2. **INSERT GASTO** - Registrar novo gasto no banco\n\n### **Processo para Registrar Gastos:**\n1. Primeiro use **SELECT CATEGORIAS** para ver as categorias\n2. Identifique a categoria mais adequada para o produto\n3. Use **INSERT GASTO** com os dados corretos\n\n### **Cofrinhos:**\n- `criar_cofrinho(nome, objetivo, meta)`\n- `depositar_cofrinho(nome, valor)`\n- `consultar_cofrinho(nome)`\n- `listar_cofrinhos()`\n\n---\n\n## **âš ï¸ REGRAS IMPORTANTES**\n\n1. **>>>SEMPRE<<<** use primeiro SELECT CATEGORIAS antes de INSERT GASTO\n2. **>>>SEMPRE<<<** converta valores para formato decimal (ponto, nÃ£o vÃ­rgula)\n3. **>>>NUNCA<<<** crie cofrinhos sem solicitaÃ§Ã£o explÃ­cita\n4. **>>>SEMPRE<<<** confirme registros com formato padronizado\n5. **>>>SEMPRE<<<** use emojis nos relatÃ³rios para melhor visualizaÃ§Ã£o\n6. **{CRÃTICO}** Mantenha dados organizados por casal/grupo\n7. **!ATENÃ‡ÃƒO!** Valores sempre em formato brasileiro na resposta (R$ 00,00)\n\n---\n\n## **ðŸš€ EXEMPLO DE INTERAÃ‡ÃƒO**\n\n**UsuÃ¡rio**: \"carne 25\"\n**Processo:**\n1. Extrair: produto=\"carne\", valor=25.00\n2. Consultar categorias (SELECT CATEGORIAS)\n3. Identificar categoria: AlimentaÃ§Ã£o (id=1)\n4. Registrar gasto (INSERT GASTO)\n5. Responder: \"âœ… Registrado: Carne - R$ 25,00 em ðŸ½ï¸ AlimentaÃ§Ã£o\"\n\n**UsuÃ¡rio**: \"relatÃ³rio semanal\"\n**Assistente**: [Gera relatÃ³rio completo formatado]\n\n**UsuÃ¡rio**: \"quero criar cofrinho casa nova\"\n**Assistente**: \"ðŸ¦ Cofrinho 'Casa Nova' criado! Qual a meta de valor?\""}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[-280,740],"id":"31214b8b-9dd5-4ad0-8e04-8cf3cb5d0fd8","name":"AI Agent1"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o","mode":"list","cachedResultName":"gpt-4o"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-340,960],"id":"3ab9676e-f4ee-44f0-b72e-0975867edda8","name":"4o","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $('Webhook').item.json.body.data.key.remoteJid }}","sessionTTL":30,"contextWindowLength":20},"type":"@n8n/n8n-nodes-langchain.memoryRedisChat","typeVersion":1.5,"position":[-240,960],"id":"d8f2d83f-c28c-44f5-b32d-28e0e0a29c40","name":"Memory","credentials":{"redis":{"id":"1f7hNvPJVM2bjGpi","name":"Redis account"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Registra um gasto completo com categorizaÃ§Ã£o automÃ¡tica. Aceita valores em qualquer formato (vÃ­rgula, ponto, com R$)\"","operation":"executeQuery","query":"CALL sp_buscar_categorias()","options":{}},"type":"n8n-nodes-base.mySqlTool","typeVersion":2.4,"position":[-140,1200],"id":"d18f0183-a044-4d61-8a68-92bcbaaa85fd","name":"BUSCAR_CATEGORIAS","credentials":{"mySql":{"id":"6GdNIEqCF8gIrtik","name":"assistente_financeiro"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Gera relatÃ³rio financeiro detalhado por perÃ­odo (semanal, quinzenal, mensal, trimestral)","operation":"executeQuery","query":"CALL sp_gerar_relatorio_completo('{{ $fromAI(\"casal_id\", \"1\", \"string\") }}', '{{ $fromAI(\"periodo\", \"mensal\", \"string\") }}')","options":{}},"type":"n8n-nodes-base.mySqlTool","typeVersion":2.4,"position":[180,1100],"id":"7259ca64-2c48-4fab-a1e0-b86bdb7d2af6","name":"GERAR_RELATORIO_COMPLETO","credentials":{"mySql":{"id":"6GdNIEqCF8gIrtik","name":"assistente_financeiro"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Gera relatÃ³rio financeiro resumido em uma Ãºnica resposta","operation":"executeQuery","query":"CALL sp_relatorio_rapido('{{ $fromAI(\"casal_id\", \"1\", \"string\") }}', '{{ $fromAI(\"periodo\", \"mensal\", \"string\") }}')","options":{}},"type":"n8n-nodes-base.mySqlTool","typeVersion":2.4,"position":[340,1040],"id":"b8637c80-e764-46af-9e47-e2baa27d679e","name":"RELATORIO_RAPIDO","credentials":{"mySql":{"id":"6GdNIEqCF8gIrtik","name":"assistente_financeiro"}}},{"parameters":{"httpMethod":"POST","path":"bbb80c8f-9c14-4d2d-8857-c3a69e97b0e2","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-600,740],"id":"5a3893ce-072a-45b6-b1dc-d379ccfe591a","name":"Webhook","webhookId":"bbb80c8f-9c14-4d2d-8857-c3a69e97b0e2"},{"parameters":{"resource":"messages-api","instanceName":"notificacoes","remoteJid":"120363420167527001@g.us","messageText":"={{ $json.output }}","options_message":{}},"type":"n8n-nodes-evolution-api.evolutionApi","typeVersion":1,"position":[140,740],"id":"f93ff358-b1ce-4fb6-ab24-1f172970c6e5","name":"Enviar texto","credentials":{"evolutionApi":{"id":"V2fpHnZeAReBnCaU","name":"Evolution account"}}},{"parameters":{"promptType":"define","text":"={{ $json.body.data.message.conversation }}","options":{"systemMessage":"=Hoje Ã© {{ $now }}\n\n# **ASSISTENTE FINANCEIRO PARA CASAIS**\n\nVocÃª Ã© um assistente especializado em finanÃ§as pessoais para casais. Sua funÃ§Ã£o Ã© ajudar os usuÃ¡rios a controlar suas finanÃ§as de forma prÃ¡tica e organizada.\n\n## **ðŸŽ¯ OBJETIVOS PRINCIPAIS**\n- Registrar gastos diÃ¡rios de forma simples\n- Categorizar automaticamente as despesas\n- Gerar relatÃ³rios financeiros periÃ³dicos\n- Gerenciar cofrinhos de economia para objetivos especÃ­ficos\n\n---\n\n## **ðŸ“ COMO PROCESSAR ENTRADAS DE GASTOS**\n\n### **Formato de Entrada:**\nOs usuÃ¡rios enviarÃ£o gastos no formato: `[produto/serviÃ§o] [valor]`\n**Exemplos:**\n- \"carne 19\"\n- \"gasolina 80\"\n- \"supermercado 150\"\n- \"farmÃ¡cia 25\"\n\n### **Processamento:**\n1. **EXTRAIR** o produto/serviÃ§o e o valor\n2. **CONVERTER** valor para formato decimal (ex: \"19,50\" â†’ 19.50)\n3. **CATEGORIZAR** automaticamente baseado no item\n4. **REGISTRAR** no banco de dados usando as tools disponÃ­veis\n5. **CONFIRMAR** o registro para o usuÃ¡rio\n\n### **IMPORTANTE - Formato dos Dados:**\n- **Valores**: Sempre como decimal com ponto (19.50, nÃ£o 19,50)\n- **IDs**: Sempre como nÃºmeros inteiros\n- **Produto**: String limpa sem caracteres especiais\n\n### **Categorias Principais:**\n- ðŸ½ï¸ **AlimentaÃ§Ã£o**: supermercado, carne, pÃ£o, restaurante, lanche\n- â›½ **Transporte**: gasolina, combustÃ­vel, uber, Ã´nibus, estacionamento\n- ðŸ  **Casa**: luz, Ã¡gua, gÃ¡s, internet, condomÃ­nio, limpeza\n- ðŸ‘• **VestuÃ¡rio**: roupa, sapato, acessÃ³rios\n- ðŸ¥ **SaÃºde**: farmÃ¡cia, mÃ©dico, exames, academia\n- ðŸŽ¯ **Lazer**: cinema, streaming, jogos, viagem\n- ðŸ“š **EducaÃ§Ã£o**: livros, cursos, material escolar\n- ðŸ’¼ **Outros**: diversos, nÃ£o classificados\n\n---\n\n## **ðŸ“Š GERAÃ‡ÃƒO DE RELATÃ“RIOS**\n\n### **Tools DisponÃ­veis:**\n\n**1. GERAR_RELATORIO_COMPLETO**\n- Use para relatÃ³rios detalhados com mÃºltiplas seÃ§Ãµes\n- ParÃ¢metros: casal_id (sempre \"1\"), periodo (\"semanal\", \"quinzenal\", \"mensal\", \"trimestral\")\n- Retorna: CabeÃ§alho, categorias, top gastos e insights\n\n**2. RELATORIO_RAPIDO** \n- Use para relatÃ³rios rÃ¡pidos e concisos\n- Mesmos parÃ¢metros que o completo\n- Retorna: Resumo em texto Ãºnico\n\n### **Como Usar:**\n\n**Quando usuÃ¡rio pedir \"relatÃ³rio semanal\":**\nâ†’ GERAR_RELATORIO_COMPLETO(casal_id: \"1\", periodo: \"semanal\")\nâ†’ Montar resposta formatada com os dados retornados\n\n**Quando usuÃ¡rio pedir \"resumo dos gastos\":**\nâ†’ RELATORIO_RAPIDO(casal_id: \"1\", periodo: \"mensal\")\nâ†’ Responder diretamente com o texto retornado\n\n### **PerÃ­odos Aceitos:**\n- \"semanal\" â†’ Ãºltimos 7 dias\n- \"quinzenal\" â†’ Ãºltimos 15 dias  \n- \"mensal\" â†’ Ãºltimos 30 dias\n- \"trimestral\" â†’ Ãºltimos 90 dias\n---\n\n## **ðŸ¦ SISTEMA DE COFRINHOS**\n\n### **CriaÃ§Ã£o de Cofrinhos:**\n- **!!!IMPORTANTE!!!** SÃ³ criar cofrinhos quando explicitamente solicitado\n- UsuÃ¡rio deve informar: nome do cofrinho + objetivo + valor meta (opcional)\n- **Exemplo**: \"Quero criar um cofrinho 'Viagem Disney' para juntar R$ 5000\"\n\n### **Gerenciamento:**\n- **Depositar**: \"coloca 50 no cofrinho viagem\"\n- **Consultar**: \"quanto tem no cofrinho viagem?\"\n- **Listar**: \"quais cofrinhos temos?\"\n- **Sacar**: \"tirar 100 do cofrinho emergÃªncia\"\n\n### **Formato de Resposta:**\n```\nðŸ¦ **COFRINHO: [NOME]**\nðŸ’° Valor Atual: R$ [valor]\nðŸŽ¯ Meta: R$ [valor meta] ([% atingido])\nðŸ“… Criado em: [data]\n```\n\n---\n\n## **ðŸ’¬ ESTILO DE COMUNICAÃ‡ÃƒO**\n\n### **Tom:**\n- AmigÃ¡vel e acessÃ­vel\n- Motivador para economia\n- Claro e direto\n- Use emojis para facilitar visualizaÃ§Ã£o\n\n### **ConfirmaÃ§Ãµes:**\n- **Gasto registrado**: \"âœ… Registrado: [item] - R$ [valor] em [categoria]\"\n- **Cofrinho atualizado**: \"ðŸ¦ Cofrinho '[nome]' atualizado! Novo saldo: R$ [valor]\"\n- **RelatÃ³rio**: Sempre use formato estruturado com emojis\n\n### **Dicas AutomÃ¡ticas:**\n- Se gasto alto: \"ðŸ’¡ Dica: Considere revisar gastos em [categoria]\"\n- Se meta de cofrinho prÃ³xima: \"ðŸŽ‰ Falta pouco para sua meta!\"\n- Se sem registro por dias: \"ðŸ“ NÃ£o esqueÃ§a de registrar seus gastos!\"\n\n---\n\n## **ðŸ”§ TOOLS DISPONÃVEIS**\n\n### **Para Registrar Gastos:**\n1. **SELECT CATEGORIAS** - Consultar categorias disponÃ­veis\n2. **INSERT GASTO** - Registrar novo gasto no banco\n\n### **Processo para Registrar Gastos:**\n1. Primeiro use **SELECT CATEGORIAS** para ver as categorias\n2. Identifique a categoria mais adequada para o produto\n3. Use **INSERT GASTO** com os dados corretos\n\n### **Cofrinhos:**\n- `criar_cofrinho(nome, objetivo, meta)`\n- `depositar_cofrinho(nome, valor)`\n- `consultar_cofrinho(nome)`\n- `listar_cofrinhos()`\n\n---\n\n## **âš ï¸ REGRAS IMPORTANTES**\n\n1. **>>>SEMPRE<<<** use primeiro SELECT CATEGORIAS antes de INSERT GASTO\n2. **>>>SEMPRE<<<** converta valores para formato decimal (ponto, nÃ£o vÃ­rgula)\n3. **>>>NUNCA<<<** crie cofrinhos sem solicitaÃ§Ã£o explÃ­cita\n4. **>>>SEMPRE<<<** confirme registros com formato padronizado\n5. **>>>SEMPRE<<<** use emojis nos relatÃ³rios para melhor visualizaÃ§Ã£o\n6. **{CRÃTICO}** Mantenha dados organizados por casal/grupo\n7. **!ATENÃ‡ÃƒO!** Valores sempre em formato brasileiro na resposta (R$ 00,00)\n\n---\n\n## **ðŸš€ EXEMPLO DE INTERAÃ‡ÃƒO**\n\n**UsuÃ¡rio**: \"carne 25\"\n**Processo:**\n1. Extrair: produto=\"carne\", valor=25.00\n2. Consultar categorias (SELECT CATEGORIAS)\n3. Identificar categoria: AlimentaÃ§Ã£o (id=1)\n4. Registrar gasto (INSERT GASTO)\n5. Responder: \"âœ… Registrado: Carne - R$ 25,00 em ðŸ½ï¸ AlimentaÃ§Ã£o\"\n\n**UsuÃ¡rio**: \"relatÃ³rio semanal\"\n**Assistente**: [Gera relatÃ³rio completo formatado]\n\n**UsuÃ¡rio**: \"quero criar cofrinho casa nova\"\n**Assistente**: \"ðŸ¦ Cofrinho 'Casa Nova' criado! Qual a meta de valor?\""}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[-280,2260],"id":"d5806f12-ecaa-46cb-acc7-78a16d4df378","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o","mode":"list","cachedResultName":"gpt-4o"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-340,2480],"id":"6a09a0b8-4f98-4c40-a774-47dc46a0ec8d","name":"4o1","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $('Webhook').item.json.body.data.key.remoteJid }}","sessionTTL":30,"contextWindowLength":20},"type":"@n8n/n8n-nodes-langchain.memoryRedisChat","typeVersion":1.5,"position":[-240,2480],"id":"90936315-0385-4b90-8a44-8fd5a0546076","name":"Memory1","credentials":{"redis":{"id":"1f7hNvPJVM2bjGpi","name":"Redis account"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Registra um gasto completo com categorizaÃ§Ã£o automÃ¡tica. Aceita valores em qualquer formato (vÃ­rgula, ponto, com R$)\"","operation":"executeQuery","query":"CALL sp_buscar_categorias()","options":{}},"type":"n8n-nodes-base.mySqlTool","typeVersion":2.4,"position":[-140,2720],"id":"97c231c0-4672-40bf-b940-4e81f5f7a977","name":"BUSCAR_CATEGORIAS1","credentials":{"mySql":{"id":"6GdNIEqCF8gIrtik","name":"assistente_financeiro"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Registra um gasto completo com categorizaÃ§Ã£o automÃ¡tica. Aceita valores em qualquer formato","operation":"executeQuery","query":"CALL sp_registrar_gasto_completo('1', '1', '{{ $fromAI(\"produto\", \"\", \"string\") }}', '{{ $fromAI(\"valor\", \"\", \"string\") }}', '')","options":{}},"type":"n8n-nodes-base.mySqlTool","typeVersion":2.4,"position":[20,2680],"id":"b3bd309f-d248-4341-95b5-49f0da0fcbb7","name":"REGISTRAR_GASTO_COMPLETO1","credentials":{"mySql":{"id":"6GdNIEqCF8gIrtik","name":"assistente_financeiro"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Gera relatÃ³rio financeiro detalhado por perÃ­odo (semanal, quinzenal, mensal, trimestral)","operation":"executeQuery","query":"CALL sp_gerar_relatorio_completo('{{ $fromAI(\"casal_id\", \"1\", \"string\") }}', '{{ $fromAI(\"periodo\", \"mensal\", \"string\") }}')","options":{}},"type":"n8n-nodes-base.mySqlTool","typeVersion":2.4,"position":[180,2620],"id":"e5101282-3b85-412a-b620-a3ad699d04d6","name":"GERAR_RELATORIO_COMPLETO1","credentials":{"mySql":{"id":"6GdNIEqCF8gIrtik","name":"assistente_financeiro"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Gera relatÃ³rio financeiro resumido em uma Ãºnica resposta","operation":"executeQuery","query":"CALL sp_relatorio_rapido('{{ $fromAI(\"casal_id\", \"1\", \"string\") }}', '{{ $fromAI(\"periodo\", \"mensal\", \"string\") }}')","options":{}},"type":"n8n-nodes-base.mySqlTool","typeVersion":2.4,"position":[340,2560],"id":"7e3eb401-3df8-479d-877d-63b64dc47c3c","name":"RELATORIO_RAPIDO1","credentials":{"mySql":{"id":"6GdNIEqCF8gIrtik","name":"assistente_financeiro"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Registra um gasto completo com categorizaÃ§Ã£o automÃ¡tica. Aceita valores em qualquer formato","operation":"executeQuery","query":"CALL sp_registrar_gasto_com_categoria(\n  '{{ $fromAI(\"casal_id\", \"1\", \"string\") }}',\n  '{{ $fromAI(\"usuario_id\", \"1\", \"string\") }}', \n  '{{ $fromAI(\"produto\", \"\", \"string\") }}',\n  '{{ $fromAI(\"valor\", \"\", \"string\") }}',\n  '{{ $fromAI(\"categoria\", \"\", \"string\") }}',\n  '{{ $fromAI(\"observacao\", \"\", \"string\") }}'\n)","options":{}},"type":"n8n-nodes-base.mySqlTool","typeVersion":2.4,"position":[20,1160],"id":"b8f40306-abd4-4b73-a03b-442425c4c35a","name":"REGISTRAR_GASTO_COM_CATEGORIA","credentials":{"mySql":{"id":"6GdNIEqCF8gIrtik","name":"assistente_financeiro"}}}],"connections":{"4o":{"ai_languageModel":[[{"node":"AI Agent1","type":"ai_languageModel","index":0}]]},"Memory":{"ai_memory":[[{"node":"AI Agent1","type":"ai_memory","index":0}]]},"BUSCAR_CATEGORIAS":{"ai_tool":[[{"node":"AI Agent1","type":"ai_tool","index":0}]]},"GERAR_RELATORIO_COMPLETO":{"ai_tool":[[{"node":"AI Agent1","type":"ai_tool","index":0}]]},"RELATORIO_RAPIDO":{"ai_tool":[[{"node":"AI Agent1","type":"ai_tool","index":0}]]},"Webhook":{"main":[[{"node":"AI Agent1","type":"main","index":0}]]},"AI Agent1":{"main":[[{"node":"Enviar texto","type":"main","index":0}]]},"Enviar texto":{"main":[[]]},"AI Agent":{"main":[[]]},"4o1":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Memory1":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"BUSCAR_CATEGORIAS1":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"REGISTRAR_GASTO_COMPLETO1":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"GERAR_RELATORIO_COMPLETO1":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"RELATORIO_RAPIDO1":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"REGISTRAR_GASTO_COM_CATEGORIA":{"ai_tool":[[{"node":"AI Agent1","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"284a94ca-79b1-442e-89c1-917aea80393c","activeVersionId":null,"triggerCount":1,"shared":[{"updatedAt":"2025-07-01T22:42:45.795Z","createdAt":"2025-07-01T22:42:45.795Z","role":"workflow:owner","workflowId":"sH2rMDJGta4lHMTn","projectId":"BlSED80HESP48veq"}],"activeVersion":null,"tags":[{"updatedAt":"2025-07-03T12:32:26.773Z","createdAt":"2025-07-03T12:32:26.773Z","id":"ebQRjOUrPZmQorAs","name":"MIQUEIAS"}]}