{"updatedAt":"2025-11-16T11:23:18.751Z","createdAt":"2025-07-11T15:51:55.435Z","id":"I9lhB0AuDQI3RlAl","name":"Noticias de IA","active":true,"isArchived":false,"nodes":[{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"id":"7883ddeb-9967-49b3-bfd0-db0b3bf7c7e4","name":"OpenAI Chat Model","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[-1180,1020],"typeVersion":1.2,"credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"assignments":{"assignments":[{"id":"9128e9e7-d1b8-4e89-8422-849b8dd519d8","name":"query","type":"string","value":"={{ $json.output }}"}]},"options":{}},"id":"2970fb16-70f9-4436-b04b-388fa8962144","name":"Set Query","type":"n8n-nodes-base.set","position":[-620,840],"typeVersion":3.4},{"parameters":{"promptType":"define","text":"=MANDE UMA MENSAGEM SOBRE NOVIDADES DO MUNDO DE INTELIG√äNCIA ARTIFICIAL EM INGL√äS DE NO MAXIMO 30 CARACTERES...","options":{}},"id":"83b46481-7327-4ed0-b461-032ed003a8eb","name":"Crypto News & Sentiment Agent","type":"@n8n/n8n-nodes-langchain.agent","position":[-1120,840],"typeVersion":1.8},{"parameters":{"url":"https://www.404media.co/rss","options":{}},"id":"ebe40d02-c4c5-4699-bb26-f48a9be7dff5","name":"RSS Cointelegraph","type":"n8n-nodes-base.rssFeedRead","position":[0,0],"typeVersion":1.1},{"parameters":{"url":"https://magazine.sebastianraschka.com/feed","options":{}},"id":"4e9cc60b-3ac4-4028-be63-67e964d55a3b","name":"RSS Bitcoinmagazine","type":"n8n-nodes-base.rssFeedRead","position":[0,160],"typeVersion":1.1},{"parameters":{"numberInputs":10},"id":"939b506e-7572-4415-b1ec-8a673dce5474","name":"Merge All Articles","type":"n8n-nodes-base.merge","position":[660,660],"typeVersion":3.1},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4.1-mini","mode":"list","cachedResultName":"GPT-4.1-MINI"},"messages":{"values":[{"content":"={{ $json.agentPrompt }}"},{"content":"=Voc√™ √© um analista de not√≠cias da ind√∫stria de INTELIGENCIA ARTIFICIAL. Resuma o sentimento de forma clara e concisa, responda sempre em Portugu√™s BR. AP√ìS CONCLUIR, N√ÉO OFERECER MAIS NENHUMA ALTERA√á√ÉO, REMOVER ESSE PANORAMA GERAL DO QUE FOI ANALISADO. S√ì AS NOTICIAS IMPORTAM E PODE UTILIZAR EMOJIS PARA DEIXAR A LEITURA MAIS ANIMADA.","role":"assistant"}]},"options":{}},"id":"731d586e-4247-4c45-a5f6-2130fdbdbe79","name":"Summarize News & Sentiment (GPT-4o)","type":"@n8n/n8n-nodes-langchain.openAi","position":[1400,760],"typeVersion":1.8,"credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"jsCode":"// ====== C√ìDIGO PARA N8N - NOT√çCIAS DE IA ======\n// Pega os dados de entrada do n8n\nconst inputData = $input.all();\n\n// Fun√ß√£o para filtrar not√≠cias do dia atual\nfunction filterTodaysNews(newsArray) {\n    const today = new Date().toISOString().split('T')[0];\n    \n    return newsArray.filter(item => {\n        const json = item.json;\n        if (!json.isoDate) return false;\n        \n        const newsDate = new Date(json.isoDate).toISOString().split('T')[0];\n        return newsDate === today;\n    });\n}\n\n// Fun√ß√£o para processar cada item de not√≠cia\nfunction processNewsItem(item) {\n    const json = item.json;\n    \n    // Extrai termos de IA das categorias e conte√∫do\n    const aiTerms = (json.categories || []).filter(cat => \n        cat.toLowerCase().includes('ai') || \n        cat.toLowerCase().includes('artificial intelligence') ||\n        cat.toLowerCase().includes('machine learning') ||\n        cat.toLowerCase().includes('deep learning') ||\n        cat.toLowerCase().includes('neural network') ||\n        cat.toLowerCase().includes('chatgpt') ||\n        cat.toLowerCase().includes('openai') ||\n        cat.toLowerCase().includes('claude') ||\n        cat.toLowerCase().includes('gemini') ||\n        cat.toLowerCase().includes('llm') ||\n        cat.toLowerCase().includes('generative ai') ||\n        cat.toLowerCase().includes('automation') ||\n        cat.toLowerCase().includes('robotics') ||\n        cat.toLowerCase().includes('computer vision') ||\n        cat.toLowerCase().includes('nlp') ||\n        cat.toLowerCase().includes('natural language')\n    );\n    \n    // Verifica se h√° termos de IA no t√≠tulo ou conte√∫do\n    const title = (json.title || '').toLowerCase();\n    const content = (json['content:encodedSnippet'] || json.content || '').toLowerCase();\n    \n    const hasAIInContent = title.includes('ai') || \n                          title.includes('artificial intelligence') ||\n                          title.includes('machine learning') ||\n                          title.includes('chatgpt') ||\n                          title.includes('openai') ||\n                          content.includes('ai') ||\n                          content.includes('artificial intelligence') ||\n                          content.includes('machine learning');\n    \n    return {\n        json: {\n            originalDate: json.isoDate,\n            processedDate: new Date().toISOString(),\n            isToday: true,\n            title: json.title || 'T√≠tulo n√£o dispon√≠vel',\n            content: json['content:encodedSnippet'] || json.content || 'Conte√∫do n√£o dispon√≠vel',\n            contentPreview: (json['content:encodedSnippet'] || json.content || '').substring(0, 300) + '...',\n            categories: json.categories || [],\n            categoriesCount: (json.categories || []).length,\n            aiTerms: aiTerms,\n            aiTermsCount: aiTerms.length,\n            hasAIInContent: hasAIInContent,\n            source: json.source || 'Fonte n√£o identificada',\n            link: json.link || json.originalData?.link || 'Link n√£o dispon√≠vel',\n            \n            // Categorias principais de IA\n            hasGenerativeAI: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('generative ai') ||\n                cat.toLowerCase().includes('chatgpt') ||\n                cat.toLowerCase().includes('claude') ||\n                cat.toLowerCase().includes('gemini')\n            ) || title.includes('generative') || content.includes('generative'),\n            \n            hasMachineLearning: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('machine learning') ||\n                cat.toLowerCase().includes('ml') ||\n                cat.toLowerCase().includes('deep learning')\n            ) || title.includes('machine learning') || content.includes('machine learning'),\n            \n            hasOpenAI: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('openai') ||\n                cat.toLowerCase().includes('chatgpt')\n            ) || title.includes('openai') || title.includes('chatgpt'),\n            \n            hasAutomation: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('automation') ||\n                cat.toLowerCase().includes('robotics') ||\n                cat.toLowerCase().includes('rpa')\n            ) || title.includes('automation') || content.includes('automation'),\n            \n            hasComputerVision: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('computer vision') ||\n                cat.toLowerCase().includes('image recognition') ||\n                cat.toLowerCase().includes('opencv')\n            ) || title.includes('computer vision') || content.includes('computer vision'),\n            \n            hasNLP: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('nlp') ||\n                cat.toLowerCase().includes('natural language') ||\n                cat.toLowerCase().includes('text processing')\n            ) || title.includes('nlp') || content.includes('natural language'),\n            \n            // Dados originais preservados\n            originalData: json\n        }\n    };\n}\n\n// Processa os dados\nconst todaysNews = filterTodaysNews(inputData);\nconst processedNews = todaysNews.map(processNewsItem);\n\n// Filtra apenas not√≠cias que realmente cont√™m termos de IA\nconst aiRelevantNews = processedNews.filter(item => \n    item.json.aiTermsCount > 0 || item.json.hasAIInContent\n);\n\n// Fun√ß√£o para calcular score de relev√¢ncia\nfunction calculateRelevanceScore(item) {\n    let score = 0;\n    const json = item.json;\n    \n    // Pontua√ß√£o por categoria\n    if (json.hasGenerativeAI) score += 5;\n    if (json.hasMachineLearning) score += 4;\n    if (json.hasOpenAI) score += 5;\n    if (json.hasAutomation) score += 3;\n    if (json.hasComputerVision) score += 3;\n    if (json.hasNLP) score += 4;\n    \n    // Pontua√ß√£o por quantidade de termos de IA\n    score += json.aiTermsCount * 2;\n    \n    // Pontua√ß√£o por presen√ßa no t√≠tulo (mais relevante)\n    const title = (json.title || '').toLowerCase();\n    if (title.includes('ai') || title.includes('artificial intelligence')) score += 3;\n    if (title.includes('chatgpt') || title.includes('openai')) score += 4;\n    if (title.includes('machine learning') || title.includes('deep learning')) score += 3;\n    \n    // Pontua√ß√£o por tamanho do conte√∫do (mais informativo)\n    const contentLength = (json.content || '').length;\n    if (contentLength > 1000) score += 2;\n    if (contentLength > 2000) score += 1;\n    \n    return score;\n}\n\n// Adiciona score de relev√¢ncia a cada not√≠cia\nconst newsWithScore = aiRelevantNews.map(item => ({\n    ...item,\n    json: {\n        ...item.json,\n        relevanceScore: calculateRelevanceScore(item)\n    }\n}));\n\n// Encontra a not√≠cia mais relevante\nconst mostRelevantNews = newsWithScore.reduce((prev, current) => \n    prev.json.relevanceScore > current.json.relevanceScore ? prev : current\n, newsWithScore[0]);\n\n// Log para debug\nconsole.log(`üìä Total de itens recebidos: ${inputData.length}`);\nconsole.log(`üìÖ Not√≠cias de hoje: ${todaysNews.length}`);\nconsole.log(`ü§ñ Not√≠cias relevantes de IA: ${aiRelevantNews.length}`);\nconsole.log(`‚úÖ Itens processados: ${processedNews.length}`);\n\n// Estat√≠sticas adicionais\nconst stats = {\n    generativeAI: aiRelevantNews.filter(item => item.json.hasGenerativeAI).length,\n    machineLearning: aiRelevantNews.filter(item => item.json.hasMachineLearning).length,\n    openAI: aiRelevantNews.filter(item => item.json.hasOpenAI).length,\n    automation: aiRelevantNews.filter(item => item.json.hasAutomation).length,\n    computerVision: aiRelevantNews.filter(item => item.json.hasComputerVision).length,\n    nlp: aiRelevantNews.filter(item => item.json.hasNLP).length\n};\n\nconsole.log('üìà Estat√≠sticas por categoria:');\nconsole.log(`üé® IA Generativa: ${stats.generativeAI}`);\nconsole.log(`üß† Machine Learning: ${stats.machineLearning}`);\nconsole.log(`üí¨ OpenAI/ChatGPT: ${stats.openAI}`);\nconsole.log(`ü§ñ Automa√ß√£o: ${stats.automation}`);\nconsole.log(`üëÅÔ∏è Vis√£o Computacional: ${stats.computerVision}`);\nconsole.log(`üìù NLP: ${stats.nlp}`);\n\n// Log da not√≠cia mais relevante\nif (mostRelevantNews) {\n    console.log('\\n‚≠ê NOT√çCIA MAIS RELEVANTE:');\n    console.log(`üì∞ T√≠tulo: ${mostRelevantNews.json.title}`);\n    console.log(`üîó Link: ${mostRelevantNews.json.originalData.link || 'Link n√£o dispon√≠vel'}`);\n    console.log(`üìä Score: ${mostRelevantNews.json.relevanceScore}`);\n    console.log(`üìÖ Data: ${mostRelevantNews.json.originalDate}`);\n    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n}\n\n// Retorna todas as not√≠cias com score, ordenadas por relev√¢ncia\nreturn newsWithScore.sort((a, b) => b.json.relevanceScore - a.json.relevanceScore);"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[920,800],"id":"f88b3ccb-3890-45c6-96cc-cdc915d7bbef","name":"FILTRO"},{"parameters":{"jsCode":"// ====== RESUM√ÉO DE NOT√çCIAS DO MUNDO DAS IA'S ======\n// Pega os dados j√° filtrados do n√≥ anterior\nconst inputData = $input.all();\n\n// Fun√ß√£o para analisar e categorizar as not√≠cias\nfunction analyzeNews(newsArray) {\n    const analysis = {\n        totalNews: newsArray.length,\n        date: new Date().toISOString().split('T')[0],\n        \n        // Contadores por categoria\n        categories: {},\n        aiTerms: {},\n        sources: {},\n        \n        // Top not√≠cias por relev√¢ncia\n        topNews: [],\n        \n        // An√°lise de sentimento b√°sica\n        positiveNews: [],\n        neutralNews: [],\n        negativeNews: [],\n        \n        // Principais temas de IA\n        themes: {\n            generativeAI: [],\n            machineLearning: [],\n            automation: [],\n            research: [],\n            ethics: [],\n            business: [],\n            regulation: [],\n            partnerships: []\n        }\n    };\n    \n    newsArray.forEach(item => {\n        const json = item.json;\n        \n        // Conta categorias\n        (json.categories || []).forEach(cat => {\n            analysis.categories[cat] = (analysis.categories[cat] || 0) + 1;\n        });\n        \n        // Conta termos de IA\n        (json.aiTerms || []).forEach(term => {\n            analysis.aiTerms[term] = (analysis.aiTerms[term] || 0) + 1;\n        });\n        \n        // Conta fontes\n        analysis.sources[json.source] = (analysis.sources[json.source] || 0) + 1;\n        \n        // Classifica por tema\n        const content = (json.content || '').toLowerCase();\n        const title = (json.title || '').toLowerCase();\n        const text = content + ' ' + title;\n        \n        if (text.includes('generative') || text.includes('chatgpt') || text.includes('claude') || text.includes('gemini')) {\n            analysis.themes.generativeAI.push(json);\n        }\n        if (text.includes('machine learning') || text.includes('deep learning') || text.includes('neural network')) {\n            analysis.themes.machineLearning.push(json);\n        }\n        if (text.includes('automation') || text.includes('robotics') || text.includes('autonomous')) {\n            analysis.themes.automation.push(json);\n        }\n        if (text.includes('research') || text.includes('study') || text.includes('algorithm') || text.includes('model')) {\n            analysis.themes.research.push(json);\n        }\n        if (text.includes('ethics') || text.includes('bias') || text.includes('responsible ai') || text.includes('safety')) {\n            analysis.themes.ethics.push(json);\n        }\n        if (text.includes('business') || text.includes('enterprise') || text.includes('startup') || text.includes('investment')) {\n            analysis.themes.business.push(json);\n        }\n        if (text.includes('regulation') || text.includes('policy') || text.includes('government') || text.includes('law')) {\n            analysis.themes.regulation.push(json);\n        }\n        if (text.includes('partnership') || text.includes('collaboration') || text.includes('agreement') || text.includes('acquisition')) {\n            analysis.themes.partnerships.push(json);\n        }\n        \n        // An√°lise de sentimento b√°sica\n        if (text.includes('breakthrough') || text.includes('innovation') || text.includes('success') || text.includes('advance') || text.includes('improvement')) {\n            analysis.positiveNews.push(json);\n        } else if (text.includes('concern') || text.includes('risk') || text.includes('challenge') || text.includes('problem') || text.includes('failure')) {\n            analysis.negativeNews.push(json);\n        } else {\n            analysis.neutralNews.push(json);\n        }\n    });\n    \n    return analysis;\n}\n\n// Fun√ß√£o para criar o resumo executivo\nfunction createExecutiveSummary(analysis) {\n    const topCategories = Object.entries(analysis.categories)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 10);\n    \n    const topAITerms = Object.entries(analysis.aiTerms)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 8);\n    \n    const topSources = Object.entries(analysis.sources)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 5);\n    \n    return {\n        overview: {\n            totalNews: analysis.totalNews,\n            date: analysis.date,\n            sentiment: {\n                positive: analysis.positiveNews.length,\n                negative: analysis.negativeNews.length,\n                neutral: analysis.neutralNews.length\n            }\n        },\n        topCategories: topCategories.map(([cat, count]) => ({category: cat, count})),\n        topAITerms: topAITerms.map(([term, count]) => ({term, count})),\n        topSources: topSources.map(([source, count]) => ({source, count})),\n        themes: {\n            generativeAI: analysis.themes.generativeAI.length,\n            machineLearning: analysis.themes.machineLearning.length,\n            automation: analysis.themes.automation.length,\n            research: analysis.themes.research.length,\n            ethics: analysis.themes.ethics.length,\n            business: analysis.themes.business.length,\n            regulation: analysis.themes.regulation.length,\n            partnerships: analysis.themes.partnerships.length\n        }\n    };\n}\n\n// Fun√ß√£o para selecionar as not√≠cias mais relevantes\nfunction selectTopNews(analysis, limit = 15) {\n    const topNews = [];\n    \n    // Pega as melhores de cada tema\n    Object.entries(analysis.themes).forEach(([theme, news]) => {\n        if (news.length > 0) {\n            // Ordena por relev√¢ncia (mais categorias = mais relevante)\n            const sorted = news.sort((a, b) => \n                (b.relevanceScore || b.categories?.length || 0) - (a.relevanceScore || a.categories?.length || 0)\n            );\n            topNews.push(...sorted.slice(0, 2)); // Top 2 de cada tema\n        }\n    });\n    \n    // Remove duplicatas\n    const uniqueNews = topNews.filter((news, index, self) => \n        index === self.findIndex(n => n.title === news.title)\n    );\n    \n    return uniqueNews.slice(0, limit);\n}\n\n// Fun√ß√£o para encontrar a not√≠cia mais relevante de todas\nfunction findMostRelevantNews(newsArray) {\n    if (newsArray.length === 0) return null;\n    \n    return newsArray.reduce((mostRelevant, current) => {\n        const currentScore = current.relevanceScore || current.categories?.length || 0;\n        const mostRelevantScore = mostRelevant.relevanceScore || mostRelevant.categories?.length || 0;\n        \n        return currentScore > mostRelevantScore ? current : mostRelevant;\n    });\n}\n\n// Fun√ß√£o para formatar para o agente\nfunction formatForAgent(analysis, topNews) {\n    const summary = createExecutiveSummary(analysis);\n    \n    return {\n        promptForAgent: `\nRESUMO EXECUTIVO - NOT√çCIAS DE IA ${summary.overview.date}\n=======================================================\n\nüìä OVERVIEW:\n- Total de not√≠cias: ${summary.overview.totalNews}\n- Sentimento: ${summary.overview.sentiment.positive} positivas, ${summary.overview.sentiment.negative} negativas, ${summary.overview.sentiment.neutral} neutras\n\nüè∑Ô∏è PRINCIPAIS CATEGORIAS:\n${summary.topCategories.map(item => `- ${item.category}: ${item.count} not√≠cias`).join('\\n')}\n\nü§ñ TERMOS DE IA MAIS MENCIONADOS:\n${summary.topAITerms.map(item => `- ${item.term}: ${item.count} vezes`).join('\\n')}\n\nüì∞ PRINCIPAIS FONTES:\n${summary.topSources.map(item => `- ${item.source}: ${item.count} not√≠cias`).join('\\n')}\n\nüéØ TEMAS PRINCIPAIS:\n- IA Generativa: ${summary.themes.generativeAI} not√≠cias\n- Machine Learning: ${summary.themes.machineLearning} not√≠cias\n- Automa√ß√£o: ${summary.themes.automation} not√≠cias\n- Pesquisa/Algoritmos: ${summary.themes.research} not√≠cias\n- √âtica/Seguran√ßa: ${summary.themes.ethics} not√≠cias\n- Neg√≥cios/Empresas: ${summary.themes.business} not√≠cias\n- Regulamenta√ß√£o: ${summary.themes.regulation} not√≠cias\n- Parcerias: ${summary.themes.partnerships} not√≠cias\n\nüî• NOT√çCIA MAIS RELEVANTE:\nüì∞ ${mostRelevantNews?.title || 'N/A'}\nüîó ${mostRelevantNews?.link || 'Link n√£o dispon√≠vel'}\nüìä Score: ${mostRelevantNews?.relevanceScore || 'N/A'}\nüìÖ Data: ${mostRelevantNews?.originalDate || 'N/A'}\nüì∞ Fonte: ${mostRelevantNews?.source || 'N/A'}\n\nüî• TOP ${topNews.length} NOT√çCIAS MAIS RELEVANTES:\n${topNews.map((news, i) => `\n${i+1}. ${news.title}\n   Fonte: ${news.source}\n   Link: ${news.link || 'N/A'}\n   Termos IA: ${news.aiTerms?.join(', ') || 'N/A'}\n   Score: ${news.relevanceScore || 'N/A'}\n   Resumo: ${news.contentPreview?.substring(0, 200)}...\n`).join('\\n')}\n\nINSTRU√á√ÉO PARA O AGENTE:\nCom base nessas informa√ß√µes, crie um relat√≥rio executivo das principais tend√™ncias e desenvolvimentos no mercado de Intelig√™ncia Artificial de hoje. Foque nos temas mais relevantes, destaque as not√≠cias mais importantes e forne√ßa insights sobre o que isso significa para o futuro da IA e seus impactos na sociedade e nos neg√≥cios.\n        `,\n        \n        // Dados estruturados para processamento\n        structuredData: {\n            summary,\n            topNews,\n            fullAnalysis: analysis\n        }\n    };\n}\n\n// Processa os dados\nconsole.log(`üîç Processando ${inputData.length} not√≠cias de IA...`);\n\nconst analysis = analyzeNews(inputData);\nconst topNews = selectTopNews(analysis, 15);\n\n// Encontra a not√≠cia MAIS relevante de todas\nconst mostRelevantNews = findMostRelevantNews(inputData);\n\nconst agentData = formatForAgent(analysis, topNews);\n\nconsole.log(`üìä An√°lise completa: ${analysis.totalNews} not√≠cias`);\nconsole.log(`üî• Selecionadas ${topNews.length} not√≠cias top`);\nconsole.log(`üìù Prompt preparado para o agente`);\n\n// Log da not√≠cia mais relevante\nif (mostRelevantNews) {\n    console.log('\\n‚≠ê NOT√çCIA MAIS RELEVANTE DE TODAS:');\n    console.log(`üì∞ T√≠tulo: ${mostRelevantNews.title}`);\n    console.log(`üîó Link: ${mostRelevantNews.link || 'Link n√£o dispon√≠vel'}`);\n    console.log(`üìä Score: ${mostRelevantNews.relevanceScore || 'N/A'}`);\n    console.log(`üìÖ Data: ${mostRelevantNews.originalDate || 'N/A'}`);\n    console.log(`üì∞ Fonte: ${mostRelevantNews.source || 'N/A'}`);\n    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n}\n\nconsole.log(`üìä An√°lise completa: ${analysis.totalNews} not√≠cias`);\nconsole.log(`üî• Selecionadas ${topNews.length} not√≠cias top`);\nconsole.log(`üìù Prompt preparado para o agente`);\n\n// Estat√≠sticas detalhadas por tema\nconsole.log('\\nüéØ DISTRIBUI√á√ÉO POR TEMAS:');\nconsole.log(`üé® IA Generativa: ${analysis.themes.generativeAI.length}`);\nconsole.log(`üß† Machine Learning: ${analysis.themes.machineLearning.length}`);\nconsole.log(`ü§ñ Automa√ß√£o: ${analysis.themes.automation.length}`);\nconsole.log(`üî¨ Pesquisa: ${analysis.themes.research.length}`);\nconsole.log(`‚öñÔ∏è √âtica/Seguran√ßa: ${analysis.themes.ethics.length}`);\nconsole.log(`üíº Neg√≥cios: ${analysis.themes.business.length}`);\nconsole.log(`üìã Regulamenta√ß√£o: ${analysis.themes.regulation.length}`);\nconsole.log(`ü§ù Parcerias: ${analysis.themes.partnerships.length}`);\n\n// Retorna um √∫nico item com o resumo para o agente\nreturn [{\n    json: {\n        type: 'ai_news_summary',\n        date: analysis.date,\n        totalNewsProcessed: analysis.totalNews,\n        topNewsSelected: topNews.length,\n        \n        // Prompt formatado para o agente\n        agentPrompt: agentData.promptForAgent,\n        \n        // Dados estruturados\n        summary: agentData.structuredData.summary,\n        topNews: agentData.structuredData.topNews,\n        \n        // Estat√≠sticas r√°pidas\n        quickStats: {\n            mainTheme: Object.entries(analysis.themes)\n                .sort(([,a], [,b]) => b.length - a.length)[0]?.[0] || 'N/A',\n            topAITerm: Object.entries(analysis.aiTerms)\n                .sort(([,a], [,b]) => b - a)[0]?.[0] || 'N/A',\n            topSource: Object.entries(analysis.sources)\n                .sort(([,a], [,b]) => b - a)[0]?.[0] || 'N/A',\n            sentimentScore: analysis.positiveNews.length - analysis.negativeNews.length,\n            mostRelevantNews: topNews[0]?.title || 'N/A'\n        },\n        \n        // NOT√çCIA MAIS RELEVANTE - DADOS COMPLETOS\n        mostRelevantNews: mostRelevantNews ? {\n            title: mostRelevantNews.title,\n            link: mostRelevantNews.link || 'Link n√£o dispon√≠vel',\n            source: mostRelevantNews.source || 'Fonte n√£o identificada',\n            relevanceScore: mostRelevantNews.relevanceScore || 0,\n            date: mostRelevantNews.originalDate || new Date().toISOString(),\n            content: mostRelevantNews.content || 'Conte√∫do n√£o dispon√≠vel',\n            contentPreview: mostRelevantNews.contentPreview || 'Preview n√£o dispon√≠vel',\n            aiTerms: mostRelevantNews.aiTerms || [],\n            categories: mostRelevantNews.categories || []\n        } : null\n    }\n}];"},"id":"1276a383-3547-4821-8d82-51c6f99cf29b","name":"RESUM√ÉO","type":"n8n-nodes-base.code","position":[1160,900],"typeVersion":2},{"parameters":{"rule":{"interval":[{"triggerAtHour":20,"triggerAtMinute":1}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-1580,840],"id":"65e12071-fde7-41cf-8ac9-612b67c9be8b","name":"Schedule Trigger"},{"parameters":{"url":"https://aiacceleratorinstitute.com/rss","options":{}},"id":"e497faad-2222-4ed8-9d52-20a1b86f3c5b","name":"aiaccelerator","type":"n8n-nodes-base.rssFeedRead","position":[0,320],"typeVersion":1.1},{"parameters":{"url":"https://ai-techpark.com/category/ai/feed","options":{}},"id":"692dc1aa-6315-43dc-9d28-771b78772483","name":"ai-techpark","type":"n8n-nodes-base.rssFeedRead","position":[0,480],"typeVersion":1.1},{"parameters":{"url":"https://knowtechie.com/category/ai/feed","options":{}},"id":"df25def5-278b-42a3-ace6-f206d1653e42","name":"knowtechie","type":"n8n-nodes-base.rssFeedRead","position":[0,640],"typeVersion":1.1},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-1580,560],"id":"67ea9972-d3b4-4dcf-888c-c75a79d481aa","name":"When chat message received","webhookId":"bcd22d17-2912-471b-ac21-2b78adceec0f"},{"parameters":{"url":"https://aibusiness.com/rss.xml","options":{}},"id":"be233b62-b2f3-451c-8a26-a02516a1eef0","name":"RSS aibusiness","type":"n8n-nodes-base.rssFeedRead","position":[0,1000],"typeVersion":1.1},{"parameters":{"url":"https://machinelearningmastery.com/blog/feed/","options":{}},"id":"12cfd914-b52d-42e6-861d-6422098ed108","name":"RSS MACHINE","type":"n8n-nodes-base.rssFeedRead","position":[0,1180],"typeVersion":1.1},{"parameters":{"url":"https://research.google/blog/rss/","options":{}},"id":"800dd794-5a1e-44f1-bd71-9297d0f5a4b7","name":"RSS GOOGLE","type":"n8n-nodes-base.rssFeedRead","position":[0,1360],"typeVersion":1.1},{"parameters":{"url":"https://www.artificial-intelligence.blog/ai-news?format=rss","options":{}},"id":"bffe9214-569b-4411-9830-7bf354946f81","name":"RSS INTELIGENCE BLOG","type":"n8n-nodes-base.rssFeedRead","position":[0,1520],"typeVersion":1.1},{"parameters":{"resource":"messages-api","instanceName":"notificacoes","remoteJid":"=556294342576","messageText":"={{ $json.message.content }}","options_message":{"mentions":{"mentionsSettings":{"mentionsEveryOne":true}}}},"type":"n8n-nodes-evolution-api.evolutionApi","typeVersion":1,"position":[1880,900],"id":"6aabdb5c-e84d-4b29-aaa8-f0e0cb4553c0","name":"Enviar texto","credentials":{"evolutionApi":{"id":"V2fpHnZeAReBnCaU","name":"Evolution account"}}},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"id":"b72a25a7-1cc3-4081-be80-3de2958a369b","name":"OpenAI Chat Model1","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[-1200,3460],"typeVersion":1.2,"credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"assignments":{"assignments":[{"id":"9128e9e7-d1b8-4e89-8422-849b8dd519d8","name":"query","type":"string","value":"={{ $json.output }}"}]},"options":{}},"id":"c0d67e29-de6e-4890-83b5-a9f3d15271c1","name":"Set Query1","type":"n8n-nodes-base.set","position":[-640,3280],"typeVersion":3.4},{"parameters":{"promptType":"define","text":"=MANDE UMA MENSAGEM SOBRE NOVIDADES DO MUNDO DOS NEGOCIOS E EMPREENDEDORISMO EM INGL√äS DE NO MAXIMO 30 CARACTERES...","options":{}},"id":"d5b95fdb-22c1-4b73-8cb9-0169a56b0205","name":"Crypto News & Sentiment Agent1","type":"@n8n/n8n-nodes-langchain.agent","position":[-1140,3280],"typeVersion":1.8},{"parameters":{"url":"https://vocesa.abril.com.br/noticias-sobre/empreendedorismo/rss","options":{}},"id":"cacd6f5b-556a-42d2-86cb-4a3b422b3195","name":"RSS Cointelegraph1","type":"n8n-nodes-base.rssFeedRead","position":[0,3000],"typeVersion":1.1},{"parameters":{"url":"https://investnews.com.br/tag/empreendedorismo/feed/","options":{}},"id":"63775acc-6152-49cf-9f8d-fc7320b1afc6","name":"RSS Bitcoinmagazine1","type":"n8n-nodes-base.rssFeedRead","position":[0,3160],"typeVersion":1.1},{"parameters":{"numberInputs":10},"id":"ae24ad5c-48af-41c7-82f8-62c396fdc7b7","name":"Merge All Articles1","type":"n8n-nodes-base.merge","position":[640,3100],"typeVersion":3.1},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4.1-mini","mode":"list","cachedResultName":"GPT-4.1-MINI"},"messages":{"values":[{"content":"={{ $json.agentPrompt }}"},{"content":"=Voc√™ √© um analista de not√≠cias da ind√∫stria de NEGOCIOS E EMPREENDEDORISMO. Resuma o sentimento de forma clara e concisa, responda sempre em Portugu√™s BR. AP√ìS CONCLUIR, N√ÉO OFERECER MAIS NENHUMA ALTERA√á√ÉO, REMOVER ESSE PANORAMA GERAL DO QUE FOI ANALISADO. S√ì AS NOTICIAS IMPORTAM E PODE UTILIZAR EMOJIS PARA DEIXAR A LEITURA MAIS ANIMADA.","role":"assistant"}]},"options":{}},"id":"83d01383-9683-454a-b613-d133bc29c97b","name":"Summarize News & Sentiment (GPT-4o)1","type":"@n8n/n8n-nodes-langchain.openAi","position":[1380,3200],"typeVersion":1.8,"credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"jsCode":"// ====== C√ìDIGO PARA N8N - NOT√çCIAS DE IA ======\n// Pega os dados de entrada do n8n\nconst inputData = $input.all();\n\n// Fun√ß√£o para filtrar not√≠cias do dia atual\nfunction filterTodaysNews(newsArray) {\n    const today = new Date().toISOString().split('T')[0];\n    \n    return newsArray.filter(item => {\n        const json = item.json;\n        if (!json.isoDate) return false;\n        \n        const newsDate = new Date(json.isoDate).toISOString().split('T')[0];\n        return newsDate === today;\n    });\n}\n\n// Fun√ß√£o para processar cada item de not√≠cia\nfunction processNewsItem(item) {\n    const json = item.json;\n    \n    // Extrai termos de IA das categorias e conte√∫do\n    const aiTerms = (json.categories || []).filter(cat => \n        cat.toLowerCase().includes('ai') || \n        cat.toLowerCase().includes('artificial intelligence') ||\n        cat.toLowerCase().includes('machine learning') ||\n        cat.toLowerCase().includes('deep learning') ||\n        cat.toLowerCase().includes('neural network') ||\n        cat.toLowerCase().includes('chatgpt') ||\n        cat.toLowerCase().includes('openai') ||\n        cat.toLowerCase().includes('claude') ||\n        cat.toLowerCase().includes('gemini') ||\n        cat.toLowerCase().includes('llm') ||\n        cat.toLowerCase().includes('generative ai') ||\n        cat.toLowerCase().includes('automation') ||\n        cat.toLowerCase().includes('robotics') ||\n        cat.toLowerCase().includes('computer vision') ||\n        cat.toLowerCase().includes('nlp') ||\n        cat.toLowerCase().includes('natural language')\n    );\n    \n    // Verifica se h√° termos de IA no t√≠tulo ou conte√∫do\n    const title = (json.title || '').toLowerCase();\n    const content = (json['content:encodedSnippet'] || json.content || '').toLowerCase();\n    \n    const hasAIInContent = title.includes('ai') || \n                          title.includes('artificial intelligence') ||\n                          title.includes('machine learning') ||\n                          title.includes('chatgpt') ||\n                          title.includes('openai') ||\n                          content.includes('ai') ||\n                          content.includes('artificial intelligence') ||\n                          content.includes('machine learning');\n    \n    return {\n        json: {\n            originalDate: json.isoDate,\n            processedDate: new Date().toISOString(),\n            isToday: true,\n            title: json.title || 'T√≠tulo n√£o dispon√≠vel',\n            content: json['content:encodedSnippet'] || json.content || 'Conte√∫do n√£o dispon√≠vel',\n            contentPreview: (json['content:encodedSnippet'] || json.content || '').substring(0, 300) + '...',\n            categories: json.categories || [],\n            categoriesCount: (json.categories || []).length,\n            aiTerms: aiTerms,\n            aiTermsCount: aiTerms.length,\n            hasAIInContent: hasAIInContent,\n            source: json.source || 'Fonte n√£o identificada',\n            link: json.link || json.originalData?.link || 'Link n√£o dispon√≠vel',\n            \n            // Categorias principais de IA\n            hasGenerativeAI: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('generative ai') ||\n                cat.toLowerCase().includes('chatgpt') ||\n                cat.toLowerCase().includes('claude') ||\n                cat.toLowerCase().includes('gemini')\n            ) || title.includes('generative') || content.includes('generative'),\n            \n            hasMachineLearning: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('machine learning') ||\n                cat.toLowerCase().includes('ml') ||\n                cat.toLowerCase().includes('deep learning')\n            ) || title.includes('machine learning') || content.includes('machine learning'),\n            \n            hasOpenAI: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('openai') ||\n                cat.toLowerCase().includes('chatgpt')\n            ) || title.includes('openai') || title.includes('chatgpt'),\n            \n            hasAutomation: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('automation') ||\n                cat.toLowerCase().includes('robotics') ||\n                cat.toLowerCase().includes('rpa')\n            ) || title.includes('automation') || content.includes('automation'),\n            \n            hasComputerVision: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('computer vision') ||\n                cat.toLowerCase().includes('image recognition') ||\n                cat.toLowerCase().includes('opencv')\n            ) || title.includes('computer vision') || content.includes('computer vision'),\n            \n            hasNLP: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('nlp') ||\n                cat.toLowerCase().includes('natural language') ||\n                cat.toLowerCase().includes('text processing')\n            ) || title.includes('nlp') || content.includes('natural language'),\n            \n            // Dados originais preservados\n            originalData: json\n        }\n    };\n}\n\n// Processa os dados\nconst todaysNews = filterTodaysNews(inputData);\nconst processedNews = todaysNews.map(processNewsItem);\n\n// Filtra apenas not√≠cias que realmente cont√™m termos de IA\nconst aiRelevantNews = processedNews.filter(item => \n    item.json.aiTermsCount > 0 || item.json.hasAIInContent\n);\n\n// Fun√ß√£o para calcular score de relev√¢ncia\nfunction calculateRelevanceScore(item) {\n    let score = 0;\n    const json = item.json;\n    \n    // Pontua√ß√£o por categoria\n    if (json.hasGenerativeAI) score += 5;\n    if (json.hasMachineLearning) score += 4;\n    if (json.hasOpenAI) score += 5;\n    if (json.hasAutomation) score += 3;\n    if (json.hasComputerVision) score += 3;\n    if (json.hasNLP) score += 4;\n    \n    // Pontua√ß√£o por quantidade de termos de IA\n    score += json.aiTermsCount * 2;\n    \n    // Pontua√ß√£o por presen√ßa no t√≠tulo (mais relevante)\n    const title = (json.title || '').toLowerCase();\n    if (title.includes('ai') || title.includes('artificial intelligence')) score += 3;\n    if (title.includes('chatgpt') || title.includes('openai')) score += 4;\n    if (title.includes('machine learning') || title.includes('deep learning')) score += 3;\n    \n    // Pontua√ß√£o por tamanho do conte√∫do (mais informativo)\n    const contentLength = (json.content || '').length;\n    if (contentLength > 1000) score += 2;\n    if (contentLength > 2000) score += 1;\n    \n    return score;\n}\n\n// Adiciona score de relev√¢ncia a cada not√≠cia\nconst newsWithScore = aiRelevantNews.map(item => ({\n    ...item,\n    json: {\n        ...item.json,\n        relevanceScore: calculateRelevanceScore(item)\n    }\n}));\n\n// Encontra a not√≠cia mais relevante\nconst mostRelevantNews = newsWithScore.reduce((prev, current) => \n    prev.json.relevanceScore > current.json.relevanceScore ? prev : current\n, newsWithScore[0]);\n\n// Log para debug\nconsole.log(`üìä Total de itens recebidos: ${inputData.length}`);\nconsole.log(`üìÖ Not√≠cias de hoje: ${todaysNews.length}`);\nconsole.log(`ü§ñ Not√≠cias relevantes de IA: ${aiRelevantNews.length}`);\nconsole.log(`‚úÖ Itens processados: ${processedNews.length}`);\n\n// Estat√≠sticas adicionais\nconst stats = {\n    generativeAI: aiRelevantNews.filter(item => item.json.hasGenerativeAI).length,\n    machineLearning: aiRelevantNews.filter(item => item.json.hasMachineLearning).length,\n    openAI: aiRelevantNews.filter(item => item.json.hasOpenAI).length,\n    automation: aiRelevantNews.filter(item => item.json.hasAutomation).length,\n    computerVision: aiRelevantNews.filter(item => item.json.hasComputerVision).length,\n    nlp: aiRelevantNews.filter(item => item.json.hasNLP).length\n};\n\nconsole.log('üìà Estat√≠sticas por categoria:');\nconsole.log(`üé® IA Generativa: ${stats.generativeAI}`);\nconsole.log(`üß† Machine Learning: ${stats.machineLearning}`);\nconsole.log(`üí¨ OpenAI/ChatGPT: ${stats.openAI}`);\nconsole.log(`ü§ñ Automa√ß√£o: ${stats.automation}`);\nconsole.log(`üëÅÔ∏è Vis√£o Computacional: ${stats.computerVision}`);\nconsole.log(`üìù NLP: ${stats.nlp}`);\n\n// Log da not√≠cia mais relevante\nif (mostRelevantNews) {\n    console.log('\\n‚≠ê NOT√çCIA MAIS RELEVANTE:');\n    console.log(`üì∞ T√≠tulo: ${mostRelevantNews.json.title}`);\n    console.log(`üîó Link: ${mostRelevantNews.json.originalData.link || 'Link n√£o dispon√≠vel'}`);\n    console.log(`üìä Score: ${mostRelevantNews.json.relevanceScore}`);\n    console.log(`üìÖ Data: ${mostRelevantNews.json.originalDate}`);\n    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n}\n\n// Retorna todas as not√≠cias com score, ordenadas por relev√¢ncia\nreturn newsWithScore.sort((a, b) => b.json.relevanceScore - a.json.relevanceScore);"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[900,3240],"id":"78c8e4c0-0652-4589-ac71-6c2c40751083","name":"FILTRO1"},{"parameters":{"jsCode":"// ====== RESUM√ÉO DE NOT√çCIAS DO MUNDO DAS IA'S ======\n// Pega os dados j√° filtrados do n√≥ anterior\nconst inputData = $input.all();\n\n// Fun√ß√£o para analisar e categorizar as not√≠cias\nfunction analyzeNews(newsArray) {\n    const analysis = {\n        totalNews: newsArray.length,\n        date: new Date().toISOString().split('T')[0],\n        \n        // Contadores por categoria\n        categories: {},\n        aiTerms: {},\n        sources: {},\n        \n        // Top not√≠cias por relev√¢ncia\n        topNews: [],\n        \n        // An√°lise de sentimento b√°sica\n        positiveNews: [],\n        neutralNews: [],\n        negativeNews: [],\n        \n        // Principais temas de IA\n        themes: {\n            generativeAI: [],\n            machineLearning: [],\n            automation: [],\n            research: [],\n            ethics: [],\n            business: [],\n            regulation: [],\n            partnerships: []\n        }\n    };\n    \n    newsArray.forEach(item => {\n        const json = item.json;\n        \n        // Conta categorias\n        (json.categories || []).forEach(cat => {\n            analysis.categories[cat] = (analysis.categories[cat] || 0) + 1;\n        });\n        \n        // Conta termos de IA\n        (json.aiTerms || []).forEach(term => {\n            analysis.aiTerms[term] = (analysis.aiTerms[term] || 0) + 1;\n        });\n        \n        // Conta fontes\n        analysis.sources[json.source] = (analysis.sources[json.source] || 0) + 1;\n        \n        // Classifica por tema\n        const content = (json.content || '').toLowerCase();\n        const title = (json.title || '').toLowerCase();\n        const text = content + ' ' + title;\n        \n        if (text.includes('generative') || text.includes('chatgpt') || text.includes('claude') || text.includes('gemini')) {\n            analysis.themes.generativeAI.push(json);\n        }\n        if (text.includes('machine learning') || text.includes('deep learning') || text.includes('neural network')) {\n            analysis.themes.machineLearning.push(json);\n        }\n        if (text.includes('automation') || text.includes('robotics') || text.includes('autonomous')) {\n            analysis.themes.automation.push(json);\n        }\n        if (text.includes('research') || text.includes('study') || text.includes('algorithm') || text.includes('model')) {\n            analysis.themes.research.push(json);\n        }\n        if (text.includes('ethics') || text.includes('bias') || text.includes('responsible ai') || text.includes('safety')) {\n            analysis.themes.ethics.push(json);\n        }\n        if (text.includes('business') || text.includes('enterprise') || text.includes('startup') || text.includes('investment')) {\n            analysis.themes.business.push(json);\n        }\n        if (text.includes('regulation') || text.includes('policy') || text.includes('government') || text.includes('law')) {\n            analysis.themes.regulation.push(json);\n        }\n        if (text.includes('partnership') || text.includes('collaboration') || text.includes('agreement') || text.includes('acquisition')) {\n            analysis.themes.partnerships.push(json);\n        }\n        \n        // An√°lise de sentimento b√°sica\n        if (text.includes('breakthrough') || text.includes('innovation') || text.includes('success') || text.includes('advance') || text.includes('improvement')) {\n            analysis.positiveNews.push(json);\n        } else if (text.includes('concern') || text.includes('risk') || text.includes('challenge') || text.includes('problem') || text.includes('failure')) {\n            analysis.negativeNews.push(json);\n        } else {\n            analysis.neutralNews.push(json);\n        }\n    });\n    \n    return analysis;\n}\n\n// Fun√ß√£o para criar o resumo executivo\nfunction createExecutiveSummary(analysis) {\n    const topCategories = Object.entries(analysis.categories)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 10);\n    \n    const topAITerms = Object.entries(analysis.aiTerms)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 8);\n    \n    const topSources = Object.entries(analysis.sources)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 5);\n    \n    return {\n        overview: {\n            totalNews: analysis.totalNews,\n            date: analysis.date,\n            sentiment: {\n                positive: analysis.positiveNews.length,\n                negative: analysis.negativeNews.length,\n                neutral: analysis.neutralNews.length\n            }\n        },\n        topCategories: topCategories.map(([cat, count]) => ({category: cat, count})),\n        topAITerms: topAITerms.map(([term, count]) => ({term, count})),\n        topSources: topSources.map(([source, count]) => ({source, count})),\n        themes: {\n            generativeAI: analysis.themes.generativeAI.length,\n            machineLearning: analysis.themes.machineLearning.length,\n            automation: analysis.themes.automation.length,\n            research: analysis.themes.research.length,\n            ethics: analysis.themes.ethics.length,\n            business: analysis.themes.business.length,\n            regulation: analysis.themes.regulation.length,\n            partnerships: analysis.themes.partnerships.length\n        }\n    };\n}\n\n// Fun√ß√£o para selecionar as not√≠cias mais relevantes\nfunction selectTopNews(analysis, limit = 15) {\n    const topNews = [];\n    \n    // Pega as melhores de cada tema\n    Object.entries(analysis.themes).forEach(([theme, news]) => {\n        if (news.length > 0) {\n            // Ordena por relev√¢ncia (mais categorias = mais relevante)\n            const sorted = news.sort((a, b) => \n                (b.relevanceScore || b.categories?.length || 0) - (a.relevanceScore || a.categories?.length || 0)\n            );\n            topNews.push(...sorted.slice(0, 2)); // Top 2 de cada tema\n        }\n    });\n    \n    // Remove duplicatas\n    const uniqueNews = topNews.filter((news, index, self) => \n        index === self.findIndex(n => n.title === news.title)\n    );\n    \n    return uniqueNews.slice(0, limit);\n}\n\n// Fun√ß√£o para encontrar a not√≠cia mais relevante de todas\nfunction findMostRelevantNews(newsArray) {\n    if (newsArray.length === 0) return null;\n    \n    return newsArray.reduce((mostRelevant, current) => {\n        const currentScore = current.relevanceScore || current.categories?.length || 0;\n        const mostRelevantScore = mostRelevant.relevanceScore || mostRelevant.categories?.length || 0;\n        \n        return currentScore > mostRelevantScore ? current : mostRelevant;\n    });\n}\n\n// Fun√ß√£o para formatar para o agente\nfunction formatForAgent(analysis, topNews) {\n    const summary = createExecutiveSummary(analysis);\n    \n    return {\n        promptForAgent: `\nRESUMO EXECUTIVO - NOT√çCIAS DE IA ${summary.overview.date}\n=======================================================\n\nüìä OVERVIEW:\n- Total de not√≠cias: ${summary.overview.totalNews}\n- Sentimento: ${summary.overview.sentiment.positive} positivas, ${summary.overview.sentiment.negative} negativas, ${summary.overview.sentiment.neutral} neutras\n\nüè∑Ô∏è PRINCIPAIS CATEGORIAS:\n${summary.topCategories.map(item => `- ${item.category}: ${item.count} not√≠cias`).join('\\n')}\n\nü§ñ TERMOS DE IA MAIS MENCIONADOS:\n${summary.topAITerms.map(item => `- ${item.term}: ${item.count} vezes`).join('\\n')}\n\nüì∞ PRINCIPAIS FONTES:\n${summary.topSources.map(item => `- ${item.source}: ${item.count} not√≠cias`).join('\\n')}\n\nüéØ TEMAS PRINCIPAIS:\n- IA Generativa: ${summary.themes.generativeAI} not√≠cias\n- Machine Learning: ${summary.themes.machineLearning} not√≠cias\n- Automa√ß√£o: ${summary.themes.automation} not√≠cias\n- Pesquisa/Algoritmos: ${summary.themes.research} not√≠cias\n- √âtica/Seguran√ßa: ${summary.themes.ethics} not√≠cias\n- Neg√≥cios/Empresas: ${summary.themes.business} not√≠cias\n- Regulamenta√ß√£o: ${summary.themes.regulation} not√≠cias\n- Parcerias: ${summary.themes.partnerships} not√≠cias\n\nüî• NOT√çCIA MAIS RELEVANTE:\nüì∞ ${mostRelevantNews?.title || 'N/A'}\nüîó ${mostRelevantNews?.link || 'Link n√£o dispon√≠vel'}\nüìä Score: ${mostRelevantNews?.relevanceScore || 'N/A'}\nüìÖ Data: ${mostRelevantNews?.originalDate || 'N/A'}\nüì∞ Fonte: ${mostRelevantNews?.source || 'N/A'}\n\nüî• TOP ${topNews.length} NOT√çCIAS MAIS RELEVANTES:\n${topNews.map((news, i) => `\n${i+1}. ${news.title}\n   Fonte: ${news.source}\n   Link: ${news.link || 'N/A'}\n   Termos IA: ${news.aiTerms?.join(', ') || 'N/A'}\n   Score: ${news.relevanceScore || 'N/A'}\n   Resumo: ${news.contentPreview?.substring(0, 200)}...\n`).join('\\n')}\n\nINSTRU√á√ÉO PARA O AGENTE:\nCom base nessas informa√ß√µes, crie um relat√≥rio executivo das principais tend√™ncias e desenvolvimentos no mercado dos neg√≥cios e empreendedorismo de hoje. Foque nos temas mais relevantes, destaque as not√≠cias mais importantes e forne√ßa insights sobre o que isso significa para o futuro dos neg√≥cios e seus impactos na sociedade e nos neg√≥cios.\n        `,\n        \n        // Dados estruturados para processamento\n        structuredData: {\n            summary,\n            topNews,\n            fullAnalysis: analysis\n        }\n    };\n}\n\n// Processa os dados\nconsole.log(`üîç Processando ${inputData.length} not√≠cias de IA...`);\n\nconst analysis = analyzeNews(inputData);\nconst topNews = selectTopNews(analysis, 15);\n\n// Encontra a not√≠cia MAIS relevante de todas\nconst mostRelevantNews = findMostRelevantNews(inputData);\n\nconst agentData = formatForAgent(analysis, topNews);\n\nconsole.log(`üìä An√°lise completa: ${analysis.totalNews} not√≠cias`);\nconsole.log(`üî• Selecionadas ${topNews.length} not√≠cias top`);\nconsole.log(`üìù Prompt preparado para o agente`);\n\n// Log da not√≠cia mais relevante\nif (mostRelevantNews) {\n    console.log('\\n‚≠ê NOT√çCIA MAIS RELEVANTE DE TODAS:');\n    console.log(`üì∞ T√≠tulo: ${mostRelevantNews.title}`);\n    console.log(`üîó Link: ${mostRelevantNews.link || 'Link n√£o dispon√≠vel'}`);\n    console.log(`üìä Score: ${mostRelevantNews.relevanceScore || 'N/A'}`);\n    console.log(`üìÖ Data: ${mostRelevantNews.originalDate || 'N/A'}`);\n    console.log(`üì∞ Fonte: ${mostRelevantNews.source || 'N/A'}`);\n    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n}\n\nconsole.log(`üìä An√°lise completa: ${analysis.totalNews} not√≠cias`);\nconsole.log(`üî• Selecionadas ${topNews.length} not√≠cias top`);\nconsole.log(`üìù Prompt preparado para o agente`);\n\n// Estat√≠sticas detalhadas por tema\nconsole.log('\\nüéØ DISTRIBUI√á√ÉO POR TEMAS:');\nconsole.log(`üé® IA Generativa: ${analysis.themes.generativeAI.length}`);\nconsole.log(`üß† Machine Learning: ${analysis.themes.machineLearning.length}`);\nconsole.log(`ü§ñ Automa√ß√£o: ${analysis.themes.automation.length}`);\nconsole.log(`üî¨ Pesquisa: ${analysis.themes.research.length}`);\nconsole.log(`‚öñÔ∏è √âtica/Seguran√ßa: ${analysis.themes.ethics.length}`);\nconsole.log(`üíº Neg√≥cios: ${analysis.themes.business.length}`);\nconsole.log(`üìã Regulamenta√ß√£o: ${analysis.themes.regulation.length}`);\nconsole.log(`ü§ù Parcerias: ${analysis.themes.partnerships.length}`);\n\n// Retorna um √∫nico item com o resumo para o agente\nreturn [{\n    json: {\n        type: 'ai_news_summary',\n        date: analysis.date,\n        totalNewsProcessed: analysis.totalNews,\n        topNewsSelected: topNews.length,\n        \n        // Prompt formatado para o agente\n        agentPrompt: agentData.promptForAgent,\n        \n        // Dados estruturados\n        summary: agentData.structuredData.summary,\n        topNews: agentData.structuredData.topNews,\n        \n        // Estat√≠sticas r√°pidas\n        quickStats: {\n            mainTheme: Object.entries(analysis.themes)\n                .sort(([,a], [,b]) => b.length - a.length)[0]?.[0] || 'N/A',\n            topAITerm: Object.entries(analysis.aiTerms)\n                .sort(([,a], [,b]) => b - a)[0]?.[0] || 'N/A',\n            topSource: Object.entries(analysis.sources)\n                .sort(([,a], [,b]) => b - a)[0]?.[0] || 'N/A',\n            sentimentScore: analysis.positiveNews.length - analysis.negativeNews.length,\n            mostRelevantNews: topNews[0]?.title || 'N/A'\n        },\n        \n        // NOT√çCIA MAIS RELEVANTE - DADOS COMPLETOS\n        mostRelevantNews: mostRelevantNews ? {\n            title: mostRelevantNews.title,\n            link: mostRelevantNews.link || 'Link n√£o dispon√≠vel',\n            source: mostRelevantNews.source || 'Fonte n√£o identificada',\n            relevanceScore: mostRelevantNews.relevanceScore || 0,\n            date: mostRelevantNews.originalDate || new Date().toISOString(),\n            content: mostRelevantNews.content || 'Conte√∫do n√£o dispon√≠vel',\n            contentPreview: mostRelevantNews.contentPreview || 'Preview n√£o dispon√≠vel',\n            aiTerms: mostRelevantNews.aiTerms || [],\n            categories: mostRelevantNews.categories || []\n        } : null\n    }\n}];"},"id":"618e00ca-2e90-4ba0-9c84-81eddc3859c1","name":"RESUM√ÉO1","type":"n8n-nodes-base.code","position":[1140,3340],"typeVersion":2},{"parameters":{"rule":{"interval":[{"triggerAtHour":20,"triggerAtMinute":1}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-1600,3280],"id":"1a1e5f13-0a88-47da-adc5-2102854f8af1","name":"Schedule Trigger1"},{"parameters":{"url":"https://agenciasebrae.com.br/ultimas-noticias/feed/","options":{}},"id":"c197ad4d-29d9-47c2-ad16-c656e42c8bf9","name":"aiaccelerator1","type":"n8n-nodes-base.rssFeedRead","position":[0,3320],"typeVersion":1.1},{"parameters":{"resource":"messages-api","instanceName":"notificacoes","remoteJid":"=556294342576","messageText":"={{ $json.message.content }}","options_message":{"mentions":{"mentionsSettings":{"mentionsEveryOne":true}}}},"type":"n8n-nodes-evolution-api.evolutionApi","typeVersion":1,"position":[1860,3340],"id":"db263617-73f9-4e85-a061-134e6dc5d6f0","name":"Enviar texto1","credentials":{"evolutionApi":{"id":"V2fpHnZeAReBnCaU","name":"Evolution account"}}}],"connections":{"Set Query":{"main":[[{"node":"RSS Cointelegraph","type":"main","index":0},{"node":"RSS Bitcoinmagazine","type":"main","index":0},{"node":"aiaccelerator","type":"main","index":0},{"node":"ai-techpark","type":"main","index":0},{"node":"knowtechie","type":"main","index":0},{"node":"RSS aibusiness","type":"main","index":0},{"node":"RSS MACHINE","type":"main","index":0},{"node":"RSS GOOGLE","type":"main","index":0},{"node":"RSS INTELIGENCE BLOG","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Crypto News & Sentiment Agent","type":"ai_languageModel","index":0}]]},"RSS Cointelegraph":{"main":[[{"node":"Merge All Articles","type":"main","index":0}]]},"Merge All Articles":{"main":[[{"node":"FILTRO","type":"main","index":0}]]},"RSS Bitcoinmagazine":{"main":[[{"node":"Merge All Articles","type":"main","index":1}]]},"Crypto News & Sentiment Agent":{"main":[[{"node":"Set Query","type":"main","index":0}]]},"Summarize News & Sentiment (GPT-4o)":{"main":[[{"node":"Enviar texto","type":"main","index":0}]]},"FILTRO":{"main":[[{"node":"RESUM√ÉO","type":"main","index":0}]]},"RESUM√ÉO":{"main":[[{"node":"Summarize News & Sentiment (GPT-4o)","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"Crypto News & Sentiment Agent","type":"main","index":0}]]},"aiaccelerator":{"main":[[{"node":"Merge All Articles","type":"main","index":2}]]},"ai-techpark":{"main":[[{"node":"Merge All Articles","type":"main","index":3}]]},"knowtechie":{"main":[[{"node":"Merge All Articles","type":"main","index":4}]]},"When chat message received":{"main":[[{"node":"Crypto News & Sentiment Agent","type":"main","index":0}]]},"RSS aibusiness":{"main":[[{"node":"Merge All Articles","type":"main","index":6}]]},"RSS MACHINE":{"main":[[{"node":"Merge All Articles","type":"main","index":7}]]},"RSS GOOGLE":{"main":[[{"node":"Merge All Articles","type":"main","index":8}]]},"RSS INTELIGENCE BLOG":{"main":[[{"node":"Merge All Articles","type":"main","index":9}]]},"OpenAI Chat Model1":{"ai_languageModel":[[{"node":"Crypto News & Sentiment Agent1","type":"ai_languageModel","index":0}]]},"Set Query1":{"main":[[{"node":"RSS Cointelegraph1","type":"main","index":0},{"node":"RSS Bitcoinmagazine1","type":"main","index":0},{"node":"aiaccelerator1","type":"main","index":0}]]},"Crypto News & Sentiment Agent1":{"main":[[{"node":"Set Query1","type":"main","index":0}]]},"RSS Cointelegraph1":{"main":[[{"node":"Merge All Articles1","type":"main","index":0}]]},"RSS Bitcoinmagazine1":{"main":[[{"node":"Merge All Articles1","type":"main","index":1}]]},"Merge All Articles1":{"main":[[{"node":"FILTRO1","type":"main","index":0}]]},"Summarize News & Sentiment (GPT-4o)1":{"main":[[{"node":"Enviar texto1","type":"main","index":0}]]},"FILTRO1":{"main":[[{"node":"RESUM√ÉO1","type":"main","index":0}]]},"RESUM√ÉO1":{"main":[[{"node":"Summarize News & Sentiment (GPT-4o)1","type":"main","index":0}]]},"Schedule Trigger1":{"main":[[{"node":"Crypto News & Sentiment Agent1","type":"main","index":0}]]},"aiaccelerator1":{"main":[[{"node":"Merge All Articles1","type":"main","index":2}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]},"node:Schedule Trigger1":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"cb33cd76-ec58-493b-8518-29fdd6dd31ba","activeVersionId":"cb33cd76-ec58-493b-8518-29fdd6dd31ba","triggerCount":3,"shared":[{"updatedAt":"2025-07-11T15:51:55.435Z","createdAt":"2025-07-11T15:51:55.435Z","role":"workflow:owner","workflowId":"I9lhB0AuDQI3RlAl","projectId":"BlSED80HESP48veq"}],"activeVersion":{"updatedAt":"2025-12-01T11:56:54.083Z","createdAt":"2025-12-01T11:56:54.083Z","versionId":"cb33cd76-ec58-493b-8518-29fdd6dd31ba","workflowId":"I9lhB0AuDQI3RlAl","nodes":[{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"id":"7883ddeb-9967-49b3-bfd0-db0b3bf7c7e4","name":"OpenAI Chat Model","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[-1180,1020],"typeVersion":1.2,"credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"assignments":{"assignments":[{"id":"9128e9e7-d1b8-4e89-8422-849b8dd519d8","name":"query","type":"string","value":"={{ $json.output }}"}]},"options":{}},"id":"2970fb16-70f9-4436-b04b-388fa8962144","name":"Set Query","type":"n8n-nodes-base.set","position":[-620,840],"typeVersion":3.4},{"parameters":{"promptType":"define","text":"=MANDE UMA MENSAGEM SOBRE NOVIDADES DO MUNDO DE INTELIG√äNCIA ARTIFICIAL EM INGL√äS DE NO MAXIMO 30 CARACTERES...","options":{}},"id":"83b46481-7327-4ed0-b461-032ed003a8eb","name":"Crypto News & Sentiment Agent","type":"@n8n/n8n-nodes-langchain.agent","position":[-1120,840],"typeVersion":1.8},{"parameters":{"url":"https://www.404media.co/rss","options":{}},"id":"ebe40d02-c4c5-4699-bb26-f48a9be7dff5","name":"RSS Cointelegraph","type":"n8n-nodes-base.rssFeedRead","position":[0,0],"typeVersion":1.1},{"parameters":{"url":"https://magazine.sebastianraschka.com/feed","options":{}},"id":"4e9cc60b-3ac4-4028-be63-67e964d55a3b","name":"RSS Bitcoinmagazine","type":"n8n-nodes-base.rssFeedRead","position":[0,160],"typeVersion":1.1},{"parameters":{"numberInputs":10},"id":"939b506e-7572-4415-b1ec-8a673dce5474","name":"Merge All Articles","type":"n8n-nodes-base.merge","position":[660,660],"typeVersion":3.1},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4.1-mini","mode":"list","cachedResultName":"GPT-4.1-MINI"},"messages":{"values":[{"content":"={{ $json.agentPrompt }}"},{"content":"=Voc√™ √© um analista de not√≠cias da ind√∫stria de INTELIGENCIA ARTIFICIAL. Resuma o sentimento de forma clara e concisa, responda sempre em Portugu√™s BR. AP√ìS CONCLUIR, N√ÉO OFERECER MAIS NENHUMA ALTERA√á√ÉO, REMOVER ESSE PANORAMA GERAL DO QUE FOI ANALISADO. S√ì AS NOTICIAS IMPORTAM E PODE UTILIZAR EMOJIS PARA DEIXAR A LEITURA MAIS ANIMADA.","role":"assistant"}]},"options":{}},"id":"731d586e-4247-4c45-a5f6-2130fdbdbe79","name":"Summarize News & Sentiment (GPT-4o)","type":"@n8n/n8n-nodes-langchain.openAi","position":[1400,760],"typeVersion":1.8,"credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"jsCode":"// ====== C√ìDIGO PARA N8N - NOT√çCIAS DE IA ======\n// Pega os dados de entrada do n8n\nconst inputData = $input.all();\n\n// Fun√ß√£o para filtrar not√≠cias do dia atual\nfunction filterTodaysNews(newsArray) {\n    const today = new Date().toISOString().split('T')[0];\n    \n    return newsArray.filter(item => {\n        const json = item.json;\n        if (!json.isoDate) return false;\n        \n        const newsDate = new Date(json.isoDate).toISOString().split('T')[0];\n        return newsDate === today;\n    });\n}\n\n// Fun√ß√£o para processar cada item de not√≠cia\nfunction processNewsItem(item) {\n    const json = item.json;\n    \n    // Extrai termos de IA das categorias e conte√∫do\n    const aiTerms = (json.categories || []).filter(cat => \n        cat.toLowerCase().includes('ai') || \n        cat.toLowerCase().includes('artificial intelligence') ||\n        cat.toLowerCase().includes('machine learning') ||\n        cat.toLowerCase().includes('deep learning') ||\n        cat.toLowerCase().includes('neural network') ||\n        cat.toLowerCase().includes('chatgpt') ||\n        cat.toLowerCase().includes('openai') ||\n        cat.toLowerCase().includes('claude') ||\n        cat.toLowerCase().includes('gemini') ||\n        cat.toLowerCase().includes('llm') ||\n        cat.toLowerCase().includes('generative ai') ||\n        cat.toLowerCase().includes('automation') ||\n        cat.toLowerCase().includes('robotics') ||\n        cat.toLowerCase().includes('computer vision') ||\n        cat.toLowerCase().includes('nlp') ||\n        cat.toLowerCase().includes('natural language')\n    );\n    \n    // Verifica se h√° termos de IA no t√≠tulo ou conte√∫do\n    const title = (json.title || '').toLowerCase();\n    const content = (json['content:encodedSnippet'] || json.content || '').toLowerCase();\n    \n    const hasAIInContent = title.includes('ai') || \n                          title.includes('artificial intelligence') ||\n                          title.includes('machine learning') ||\n                          title.includes('chatgpt') ||\n                          title.includes('openai') ||\n                          content.includes('ai') ||\n                          content.includes('artificial intelligence') ||\n                          content.includes('machine learning');\n    \n    return {\n        json: {\n            originalDate: json.isoDate,\n            processedDate: new Date().toISOString(),\n            isToday: true,\n            title: json.title || 'T√≠tulo n√£o dispon√≠vel',\n            content: json['content:encodedSnippet'] || json.content || 'Conte√∫do n√£o dispon√≠vel',\n            contentPreview: (json['content:encodedSnippet'] || json.content || '').substring(0, 300) + '...',\n            categories: json.categories || [],\n            categoriesCount: (json.categories || []).length,\n            aiTerms: aiTerms,\n            aiTermsCount: aiTerms.length,\n            hasAIInContent: hasAIInContent,\n            source: json.source || 'Fonte n√£o identificada',\n            link: json.link || json.originalData?.link || 'Link n√£o dispon√≠vel',\n            \n            // Categorias principais de IA\n            hasGenerativeAI: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('generative ai') ||\n                cat.toLowerCase().includes('chatgpt') ||\n                cat.toLowerCase().includes('claude') ||\n                cat.toLowerCase().includes('gemini')\n            ) || title.includes('generative') || content.includes('generative'),\n            \n            hasMachineLearning: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('machine learning') ||\n                cat.toLowerCase().includes('ml') ||\n                cat.toLowerCase().includes('deep learning')\n            ) || title.includes('machine learning') || content.includes('machine learning'),\n            \n            hasOpenAI: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('openai') ||\n                cat.toLowerCase().includes('chatgpt')\n            ) || title.includes('openai') || title.includes('chatgpt'),\n            \n            hasAutomation: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('automation') ||\n                cat.toLowerCase().includes('robotics') ||\n                cat.toLowerCase().includes('rpa')\n            ) || title.includes('automation') || content.includes('automation'),\n            \n            hasComputerVision: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('computer vision') ||\n                cat.toLowerCase().includes('image recognition') ||\n                cat.toLowerCase().includes('opencv')\n            ) || title.includes('computer vision') || content.includes('computer vision'),\n            \n            hasNLP: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('nlp') ||\n                cat.toLowerCase().includes('natural language') ||\n                cat.toLowerCase().includes('text processing')\n            ) || title.includes('nlp') || content.includes('natural language'),\n            \n            // Dados originais preservados\n            originalData: json\n        }\n    };\n}\n\n// Processa os dados\nconst todaysNews = filterTodaysNews(inputData);\nconst processedNews = todaysNews.map(processNewsItem);\n\n// Filtra apenas not√≠cias que realmente cont√™m termos de IA\nconst aiRelevantNews = processedNews.filter(item => \n    item.json.aiTermsCount > 0 || item.json.hasAIInContent\n);\n\n// Fun√ß√£o para calcular score de relev√¢ncia\nfunction calculateRelevanceScore(item) {\n    let score = 0;\n    const json = item.json;\n    \n    // Pontua√ß√£o por categoria\n    if (json.hasGenerativeAI) score += 5;\n    if (json.hasMachineLearning) score += 4;\n    if (json.hasOpenAI) score += 5;\n    if (json.hasAutomation) score += 3;\n    if (json.hasComputerVision) score += 3;\n    if (json.hasNLP) score += 4;\n    \n    // Pontua√ß√£o por quantidade de termos de IA\n    score += json.aiTermsCount * 2;\n    \n    // Pontua√ß√£o por presen√ßa no t√≠tulo (mais relevante)\n    const title = (json.title || '').toLowerCase();\n    if (title.includes('ai') || title.includes('artificial intelligence')) score += 3;\n    if (title.includes('chatgpt') || title.includes('openai')) score += 4;\n    if (title.includes('machine learning') || title.includes('deep learning')) score += 3;\n    \n    // Pontua√ß√£o por tamanho do conte√∫do (mais informativo)\n    const contentLength = (json.content || '').length;\n    if (contentLength > 1000) score += 2;\n    if (contentLength > 2000) score += 1;\n    \n    return score;\n}\n\n// Adiciona score de relev√¢ncia a cada not√≠cia\nconst newsWithScore = aiRelevantNews.map(item => ({\n    ...item,\n    json: {\n        ...item.json,\n        relevanceScore: calculateRelevanceScore(item)\n    }\n}));\n\n// Encontra a not√≠cia mais relevante\nconst mostRelevantNews = newsWithScore.reduce((prev, current) => \n    prev.json.relevanceScore > current.json.relevanceScore ? prev : current\n, newsWithScore[0]);\n\n// Log para debug\nconsole.log(`üìä Total de itens recebidos: ${inputData.length}`);\nconsole.log(`üìÖ Not√≠cias de hoje: ${todaysNews.length}`);\nconsole.log(`ü§ñ Not√≠cias relevantes de IA: ${aiRelevantNews.length}`);\nconsole.log(`‚úÖ Itens processados: ${processedNews.length}`);\n\n// Estat√≠sticas adicionais\nconst stats = {\n    generativeAI: aiRelevantNews.filter(item => item.json.hasGenerativeAI).length,\n    machineLearning: aiRelevantNews.filter(item => item.json.hasMachineLearning).length,\n    openAI: aiRelevantNews.filter(item => item.json.hasOpenAI).length,\n    automation: aiRelevantNews.filter(item => item.json.hasAutomation).length,\n    computerVision: aiRelevantNews.filter(item => item.json.hasComputerVision).length,\n    nlp: aiRelevantNews.filter(item => item.json.hasNLP).length\n};\n\nconsole.log('üìà Estat√≠sticas por categoria:');\nconsole.log(`üé® IA Generativa: ${stats.generativeAI}`);\nconsole.log(`üß† Machine Learning: ${stats.machineLearning}`);\nconsole.log(`üí¨ OpenAI/ChatGPT: ${stats.openAI}`);\nconsole.log(`ü§ñ Automa√ß√£o: ${stats.automation}`);\nconsole.log(`üëÅÔ∏è Vis√£o Computacional: ${stats.computerVision}`);\nconsole.log(`üìù NLP: ${stats.nlp}`);\n\n// Log da not√≠cia mais relevante\nif (mostRelevantNews) {\n    console.log('\\n‚≠ê NOT√çCIA MAIS RELEVANTE:');\n    console.log(`üì∞ T√≠tulo: ${mostRelevantNews.json.title}`);\n    console.log(`üîó Link: ${mostRelevantNews.json.originalData.link || 'Link n√£o dispon√≠vel'}`);\n    console.log(`üìä Score: ${mostRelevantNews.json.relevanceScore}`);\n    console.log(`üìÖ Data: ${mostRelevantNews.json.originalDate}`);\n    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n}\n\n// Retorna todas as not√≠cias com score, ordenadas por relev√¢ncia\nreturn newsWithScore.sort((a, b) => b.json.relevanceScore - a.json.relevanceScore);"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[920,800],"id":"f88b3ccb-3890-45c6-96cc-cdc915d7bbef","name":"FILTRO"},{"parameters":{"jsCode":"// ====== RESUM√ÉO DE NOT√çCIAS DO MUNDO DAS IA'S ======\n// Pega os dados j√° filtrados do n√≥ anterior\nconst inputData = $input.all();\n\n// Fun√ß√£o para analisar e categorizar as not√≠cias\nfunction analyzeNews(newsArray) {\n    const analysis = {\n        totalNews: newsArray.length,\n        date: new Date().toISOString().split('T')[0],\n        \n        // Contadores por categoria\n        categories: {},\n        aiTerms: {},\n        sources: {},\n        \n        // Top not√≠cias por relev√¢ncia\n        topNews: [],\n        \n        // An√°lise de sentimento b√°sica\n        positiveNews: [],\n        neutralNews: [],\n        negativeNews: [],\n        \n        // Principais temas de IA\n        themes: {\n            generativeAI: [],\n            machineLearning: [],\n            automation: [],\n            research: [],\n            ethics: [],\n            business: [],\n            regulation: [],\n            partnerships: []\n        }\n    };\n    \n    newsArray.forEach(item => {\n        const json = item.json;\n        \n        // Conta categorias\n        (json.categories || []).forEach(cat => {\n            analysis.categories[cat] = (analysis.categories[cat] || 0) + 1;\n        });\n        \n        // Conta termos de IA\n        (json.aiTerms || []).forEach(term => {\n            analysis.aiTerms[term] = (analysis.aiTerms[term] || 0) + 1;\n        });\n        \n        // Conta fontes\n        analysis.sources[json.source] = (analysis.sources[json.source] || 0) + 1;\n        \n        // Classifica por tema\n        const content = (json.content || '').toLowerCase();\n        const title = (json.title || '').toLowerCase();\n        const text = content + ' ' + title;\n        \n        if (text.includes('generative') || text.includes('chatgpt') || text.includes('claude') || text.includes('gemini')) {\n            analysis.themes.generativeAI.push(json);\n        }\n        if (text.includes('machine learning') || text.includes('deep learning') || text.includes('neural network')) {\n            analysis.themes.machineLearning.push(json);\n        }\n        if (text.includes('automation') || text.includes('robotics') || text.includes('autonomous')) {\n            analysis.themes.automation.push(json);\n        }\n        if (text.includes('research') || text.includes('study') || text.includes('algorithm') || text.includes('model')) {\n            analysis.themes.research.push(json);\n        }\n        if (text.includes('ethics') || text.includes('bias') || text.includes('responsible ai') || text.includes('safety')) {\n            analysis.themes.ethics.push(json);\n        }\n        if (text.includes('business') || text.includes('enterprise') || text.includes('startup') || text.includes('investment')) {\n            analysis.themes.business.push(json);\n        }\n        if (text.includes('regulation') || text.includes('policy') || text.includes('government') || text.includes('law')) {\n            analysis.themes.regulation.push(json);\n        }\n        if (text.includes('partnership') || text.includes('collaboration') || text.includes('agreement') || text.includes('acquisition')) {\n            analysis.themes.partnerships.push(json);\n        }\n        \n        // An√°lise de sentimento b√°sica\n        if (text.includes('breakthrough') || text.includes('innovation') || text.includes('success') || text.includes('advance') || text.includes('improvement')) {\n            analysis.positiveNews.push(json);\n        } else if (text.includes('concern') || text.includes('risk') || text.includes('challenge') || text.includes('problem') || text.includes('failure')) {\n            analysis.negativeNews.push(json);\n        } else {\n            analysis.neutralNews.push(json);\n        }\n    });\n    \n    return analysis;\n}\n\n// Fun√ß√£o para criar o resumo executivo\nfunction createExecutiveSummary(analysis) {\n    const topCategories = Object.entries(analysis.categories)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 10);\n    \n    const topAITerms = Object.entries(analysis.aiTerms)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 8);\n    \n    const topSources = Object.entries(analysis.sources)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 5);\n    \n    return {\n        overview: {\n            totalNews: analysis.totalNews,\n            date: analysis.date,\n            sentiment: {\n                positive: analysis.positiveNews.length,\n                negative: analysis.negativeNews.length,\n                neutral: analysis.neutralNews.length\n            }\n        },\n        topCategories: topCategories.map(([cat, count]) => ({category: cat, count})),\n        topAITerms: topAITerms.map(([term, count]) => ({term, count})),\n        topSources: topSources.map(([source, count]) => ({source, count})),\n        themes: {\n            generativeAI: analysis.themes.generativeAI.length,\n            machineLearning: analysis.themes.machineLearning.length,\n            automation: analysis.themes.automation.length,\n            research: analysis.themes.research.length,\n            ethics: analysis.themes.ethics.length,\n            business: analysis.themes.business.length,\n            regulation: analysis.themes.regulation.length,\n            partnerships: analysis.themes.partnerships.length\n        }\n    };\n}\n\n// Fun√ß√£o para selecionar as not√≠cias mais relevantes\nfunction selectTopNews(analysis, limit = 15) {\n    const topNews = [];\n    \n    // Pega as melhores de cada tema\n    Object.entries(analysis.themes).forEach(([theme, news]) => {\n        if (news.length > 0) {\n            // Ordena por relev√¢ncia (mais categorias = mais relevante)\n            const sorted = news.sort((a, b) => \n                (b.relevanceScore || b.categories?.length || 0) - (a.relevanceScore || a.categories?.length || 0)\n            );\n            topNews.push(...sorted.slice(0, 2)); // Top 2 de cada tema\n        }\n    });\n    \n    // Remove duplicatas\n    const uniqueNews = topNews.filter((news, index, self) => \n        index === self.findIndex(n => n.title === news.title)\n    );\n    \n    return uniqueNews.slice(0, limit);\n}\n\n// Fun√ß√£o para encontrar a not√≠cia mais relevante de todas\nfunction findMostRelevantNews(newsArray) {\n    if (newsArray.length === 0) return null;\n    \n    return newsArray.reduce((mostRelevant, current) => {\n        const currentScore = current.relevanceScore || current.categories?.length || 0;\n        const mostRelevantScore = mostRelevant.relevanceScore || mostRelevant.categories?.length || 0;\n        \n        return currentScore > mostRelevantScore ? current : mostRelevant;\n    });\n}\n\n// Fun√ß√£o para formatar para o agente\nfunction formatForAgent(analysis, topNews) {\n    const summary = createExecutiveSummary(analysis);\n    \n    return {\n        promptForAgent: `\nRESUMO EXECUTIVO - NOT√çCIAS DE IA ${summary.overview.date}\n=======================================================\n\nüìä OVERVIEW:\n- Total de not√≠cias: ${summary.overview.totalNews}\n- Sentimento: ${summary.overview.sentiment.positive} positivas, ${summary.overview.sentiment.negative} negativas, ${summary.overview.sentiment.neutral} neutras\n\nüè∑Ô∏è PRINCIPAIS CATEGORIAS:\n${summary.topCategories.map(item => `- ${item.category}: ${item.count} not√≠cias`).join('\\n')}\n\nü§ñ TERMOS DE IA MAIS MENCIONADOS:\n${summary.topAITerms.map(item => `- ${item.term}: ${item.count} vezes`).join('\\n')}\n\nüì∞ PRINCIPAIS FONTES:\n${summary.topSources.map(item => `- ${item.source}: ${item.count} not√≠cias`).join('\\n')}\n\nüéØ TEMAS PRINCIPAIS:\n- IA Generativa: ${summary.themes.generativeAI} not√≠cias\n- Machine Learning: ${summary.themes.machineLearning} not√≠cias\n- Automa√ß√£o: ${summary.themes.automation} not√≠cias\n- Pesquisa/Algoritmos: ${summary.themes.research} not√≠cias\n- √âtica/Seguran√ßa: ${summary.themes.ethics} not√≠cias\n- Neg√≥cios/Empresas: ${summary.themes.business} not√≠cias\n- Regulamenta√ß√£o: ${summary.themes.regulation} not√≠cias\n- Parcerias: ${summary.themes.partnerships} not√≠cias\n\nüî• NOT√çCIA MAIS RELEVANTE:\nüì∞ ${mostRelevantNews?.title || 'N/A'}\nüîó ${mostRelevantNews?.link || 'Link n√£o dispon√≠vel'}\nüìä Score: ${mostRelevantNews?.relevanceScore || 'N/A'}\nüìÖ Data: ${mostRelevantNews?.originalDate || 'N/A'}\nüì∞ Fonte: ${mostRelevantNews?.source || 'N/A'}\n\nüî• TOP ${topNews.length} NOT√çCIAS MAIS RELEVANTES:\n${topNews.map((news, i) => `\n${i+1}. ${news.title}\n   Fonte: ${news.source}\n   Link: ${news.link || 'N/A'}\n   Termos IA: ${news.aiTerms?.join(', ') || 'N/A'}\n   Score: ${news.relevanceScore || 'N/A'}\n   Resumo: ${news.contentPreview?.substring(0, 200)}...\n`).join('\\n')}\n\nINSTRU√á√ÉO PARA O AGENTE:\nCom base nessas informa√ß√µes, crie um relat√≥rio executivo das principais tend√™ncias e desenvolvimentos no mercado de Intelig√™ncia Artificial de hoje. Foque nos temas mais relevantes, destaque as not√≠cias mais importantes e forne√ßa insights sobre o que isso significa para o futuro da IA e seus impactos na sociedade e nos neg√≥cios.\n        `,\n        \n        // Dados estruturados para processamento\n        structuredData: {\n            summary,\n            topNews,\n            fullAnalysis: analysis\n        }\n    };\n}\n\n// Processa os dados\nconsole.log(`üîç Processando ${inputData.length} not√≠cias de IA...`);\n\nconst analysis = analyzeNews(inputData);\nconst topNews = selectTopNews(analysis, 15);\n\n// Encontra a not√≠cia MAIS relevante de todas\nconst mostRelevantNews = findMostRelevantNews(inputData);\n\nconst agentData = formatForAgent(analysis, topNews);\n\nconsole.log(`üìä An√°lise completa: ${analysis.totalNews} not√≠cias`);\nconsole.log(`üî• Selecionadas ${topNews.length} not√≠cias top`);\nconsole.log(`üìù Prompt preparado para o agente`);\n\n// Log da not√≠cia mais relevante\nif (mostRelevantNews) {\n    console.log('\\n‚≠ê NOT√çCIA MAIS RELEVANTE DE TODAS:');\n    console.log(`üì∞ T√≠tulo: ${mostRelevantNews.title}`);\n    console.log(`üîó Link: ${mostRelevantNews.link || 'Link n√£o dispon√≠vel'}`);\n    console.log(`üìä Score: ${mostRelevantNews.relevanceScore || 'N/A'}`);\n    console.log(`üìÖ Data: ${mostRelevantNews.originalDate || 'N/A'}`);\n    console.log(`üì∞ Fonte: ${mostRelevantNews.source || 'N/A'}`);\n    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n}\n\nconsole.log(`üìä An√°lise completa: ${analysis.totalNews} not√≠cias`);\nconsole.log(`üî• Selecionadas ${topNews.length} not√≠cias top`);\nconsole.log(`üìù Prompt preparado para o agente`);\n\n// Estat√≠sticas detalhadas por tema\nconsole.log('\\nüéØ DISTRIBUI√á√ÉO POR TEMAS:');\nconsole.log(`üé® IA Generativa: ${analysis.themes.generativeAI.length}`);\nconsole.log(`üß† Machine Learning: ${analysis.themes.machineLearning.length}`);\nconsole.log(`ü§ñ Automa√ß√£o: ${analysis.themes.automation.length}`);\nconsole.log(`üî¨ Pesquisa: ${analysis.themes.research.length}`);\nconsole.log(`‚öñÔ∏è √âtica/Seguran√ßa: ${analysis.themes.ethics.length}`);\nconsole.log(`üíº Neg√≥cios: ${analysis.themes.business.length}`);\nconsole.log(`üìã Regulamenta√ß√£o: ${analysis.themes.regulation.length}`);\nconsole.log(`ü§ù Parcerias: ${analysis.themes.partnerships.length}`);\n\n// Retorna um √∫nico item com o resumo para o agente\nreturn [{\n    json: {\n        type: 'ai_news_summary',\n        date: analysis.date,\n        totalNewsProcessed: analysis.totalNews,\n        topNewsSelected: topNews.length,\n        \n        // Prompt formatado para o agente\n        agentPrompt: agentData.promptForAgent,\n        \n        // Dados estruturados\n        summary: agentData.structuredData.summary,\n        topNews: agentData.structuredData.topNews,\n        \n        // Estat√≠sticas r√°pidas\n        quickStats: {\n            mainTheme: Object.entries(analysis.themes)\n                .sort(([,a], [,b]) => b.length - a.length)[0]?.[0] || 'N/A',\n            topAITerm: Object.entries(analysis.aiTerms)\n                .sort(([,a], [,b]) => b - a)[0]?.[0] || 'N/A',\n            topSource: Object.entries(analysis.sources)\n                .sort(([,a], [,b]) => b - a)[0]?.[0] || 'N/A',\n            sentimentScore: analysis.positiveNews.length - analysis.negativeNews.length,\n            mostRelevantNews: topNews[0]?.title || 'N/A'\n        },\n        \n        // NOT√çCIA MAIS RELEVANTE - DADOS COMPLETOS\n        mostRelevantNews: mostRelevantNews ? {\n            title: mostRelevantNews.title,\n            link: mostRelevantNews.link || 'Link n√£o dispon√≠vel',\n            source: mostRelevantNews.source || 'Fonte n√£o identificada',\n            relevanceScore: mostRelevantNews.relevanceScore || 0,\n            date: mostRelevantNews.originalDate || new Date().toISOString(),\n            content: mostRelevantNews.content || 'Conte√∫do n√£o dispon√≠vel',\n            contentPreview: mostRelevantNews.contentPreview || 'Preview n√£o dispon√≠vel',\n            aiTerms: mostRelevantNews.aiTerms || [],\n            categories: mostRelevantNews.categories || []\n        } : null\n    }\n}];"},"id":"1276a383-3547-4821-8d82-51c6f99cf29b","name":"RESUM√ÉO","type":"n8n-nodes-base.code","position":[1160,900],"typeVersion":2},{"parameters":{"rule":{"interval":[{"triggerAtHour":20,"triggerAtMinute":1}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-1580,840],"id":"65e12071-fde7-41cf-8ac9-612b67c9be8b","name":"Schedule Trigger"},{"parameters":{"url":"https://aiacceleratorinstitute.com/rss","options":{}},"id":"e497faad-2222-4ed8-9d52-20a1b86f3c5b","name":"aiaccelerator","type":"n8n-nodes-base.rssFeedRead","position":[0,320],"typeVersion":1.1},{"parameters":{"url":"https://ai-techpark.com/category/ai/feed","options":{}},"id":"692dc1aa-6315-43dc-9d28-771b78772483","name":"ai-techpark","type":"n8n-nodes-base.rssFeedRead","position":[0,480],"typeVersion":1.1},{"parameters":{"url":"https://knowtechie.com/category/ai/feed","options":{}},"id":"df25def5-278b-42a3-ace6-f206d1653e42","name":"knowtechie","type":"n8n-nodes-base.rssFeedRead","position":[0,640],"typeVersion":1.1},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-1580,560],"id":"67ea9972-d3b4-4dcf-888c-c75a79d481aa","name":"When chat message received","webhookId":"bcd22d17-2912-471b-ac21-2b78adceec0f"},{"parameters":{"url":"https://aibusiness.com/rss.xml","options":{}},"id":"be233b62-b2f3-451c-8a26-a02516a1eef0","name":"RSS aibusiness","type":"n8n-nodes-base.rssFeedRead","position":[0,1000],"typeVersion":1.1},{"parameters":{"url":"https://machinelearningmastery.com/blog/feed/","options":{}},"id":"12cfd914-b52d-42e6-861d-6422098ed108","name":"RSS MACHINE","type":"n8n-nodes-base.rssFeedRead","position":[0,1180],"typeVersion":1.1},{"parameters":{"url":"https://research.google/blog/rss/","options":{}},"id":"800dd794-5a1e-44f1-bd71-9297d0f5a4b7","name":"RSS GOOGLE","type":"n8n-nodes-base.rssFeedRead","position":[0,1360],"typeVersion":1.1},{"parameters":{"url":"https://www.artificial-intelligence.blog/ai-news?format=rss","options":{}},"id":"bffe9214-569b-4411-9830-7bf354946f81","name":"RSS INTELIGENCE BLOG","type":"n8n-nodes-base.rssFeedRead","position":[0,1520],"typeVersion":1.1},{"parameters":{"resource":"messages-api","instanceName":"notificacoes","remoteJid":"=556294342576","messageText":"={{ $json.message.content }}","options_message":{"mentions":{"mentionsSettings":{"mentionsEveryOne":true}}}},"type":"n8n-nodes-evolution-api.evolutionApi","typeVersion":1,"position":[1880,900],"id":"6aabdb5c-e84d-4b29-aaa8-f0e0cb4553c0","name":"Enviar texto","credentials":{"evolutionApi":{"id":"V2fpHnZeAReBnCaU","name":"Evolution account"}}},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"id":"b72a25a7-1cc3-4081-be80-3de2958a369b","name":"OpenAI Chat Model1","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[-1200,3460],"typeVersion":1.2,"credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"assignments":{"assignments":[{"id":"9128e9e7-d1b8-4e89-8422-849b8dd519d8","name":"query","type":"string","value":"={{ $json.output }}"}]},"options":{}},"id":"c0d67e29-de6e-4890-83b5-a9f3d15271c1","name":"Set Query1","type":"n8n-nodes-base.set","position":[-640,3280],"typeVersion":3.4},{"parameters":{"promptType":"define","text":"=MANDE UMA MENSAGEM SOBRE NOVIDADES DO MUNDO DOS NEGOCIOS E EMPREENDEDORISMO EM INGL√äS DE NO MAXIMO 30 CARACTERES...","options":{}},"id":"d5b95fdb-22c1-4b73-8cb9-0169a56b0205","name":"Crypto News & Sentiment Agent1","type":"@n8n/n8n-nodes-langchain.agent","position":[-1140,3280],"typeVersion":1.8},{"parameters":{"url":"https://vocesa.abril.com.br/noticias-sobre/empreendedorismo/rss","options":{}},"id":"cacd6f5b-556a-42d2-86cb-4a3b422b3195","name":"RSS Cointelegraph1","type":"n8n-nodes-base.rssFeedRead","position":[0,3000],"typeVersion":1.1},{"parameters":{"url":"https://investnews.com.br/tag/empreendedorismo/feed/","options":{}},"id":"63775acc-6152-49cf-9f8d-fc7320b1afc6","name":"RSS Bitcoinmagazine1","type":"n8n-nodes-base.rssFeedRead","position":[0,3160],"typeVersion":1.1},{"parameters":{"numberInputs":10},"id":"ae24ad5c-48af-41c7-82f8-62c396fdc7b7","name":"Merge All Articles1","type":"n8n-nodes-base.merge","position":[640,3100],"typeVersion":3.1},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4.1-mini","mode":"list","cachedResultName":"GPT-4.1-MINI"},"messages":{"values":[{"content":"={{ $json.agentPrompt }}"},{"content":"=Voc√™ √© um analista de not√≠cias da ind√∫stria de NEGOCIOS E EMPREENDEDORISMO. Resuma o sentimento de forma clara e concisa, responda sempre em Portugu√™s BR. AP√ìS CONCLUIR, N√ÉO OFERECER MAIS NENHUMA ALTERA√á√ÉO, REMOVER ESSE PANORAMA GERAL DO QUE FOI ANALISADO. S√ì AS NOTICIAS IMPORTAM E PODE UTILIZAR EMOJIS PARA DEIXAR A LEITURA MAIS ANIMADA.","role":"assistant"}]},"options":{}},"id":"83d01383-9683-454a-b613-d133bc29c97b","name":"Summarize News & Sentiment (GPT-4o)1","type":"@n8n/n8n-nodes-langchain.openAi","position":[1380,3200],"typeVersion":1.8,"credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"jsCode":"// ====== C√ìDIGO PARA N8N - NOT√çCIAS DE IA ======\n// Pega os dados de entrada do n8n\nconst inputData = $input.all();\n\n// Fun√ß√£o para filtrar not√≠cias do dia atual\nfunction filterTodaysNews(newsArray) {\n    const today = new Date().toISOString().split('T')[0];\n    \n    return newsArray.filter(item => {\n        const json = item.json;\n        if (!json.isoDate) return false;\n        \n        const newsDate = new Date(json.isoDate).toISOString().split('T')[0];\n        return newsDate === today;\n    });\n}\n\n// Fun√ß√£o para processar cada item de not√≠cia\nfunction processNewsItem(item) {\n    const json = item.json;\n    \n    // Extrai termos de IA das categorias e conte√∫do\n    const aiTerms = (json.categories || []).filter(cat => \n        cat.toLowerCase().includes('ai') || \n        cat.toLowerCase().includes('artificial intelligence') ||\n        cat.toLowerCase().includes('machine learning') ||\n        cat.toLowerCase().includes('deep learning') ||\n        cat.toLowerCase().includes('neural network') ||\n        cat.toLowerCase().includes('chatgpt') ||\n        cat.toLowerCase().includes('openai') ||\n        cat.toLowerCase().includes('claude') ||\n        cat.toLowerCase().includes('gemini') ||\n        cat.toLowerCase().includes('llm') ||\n        cat.toLowerCase().includes('generative ai') ||\n        cat.toLowerCase().includes('automation') ||\n        cat.toLowerCase().includes('robotics') ||\n        cat.toLowerCase().includes('computer vision') ||\n        cat.toLowerCase().includes('nlp') ||\n        cat.toLowerCase().includes('natural language')\n    );\n    \n    // Verifica se h√° termos de IA no t√≠tulo ou conte√∫do\n    const title = (json.title || '').toLowerCase();\n    const content = (json['content:encodedSnippet'] || json.content || '').toLowerCase();\n    \n    const hasAIInContent = title.includes('ai') || \n                          title.includes('artificial intelligence') ||\n                          title.includes('machine learning') ||\n                          title.includes('chatgpt') ||\n                          title.includes('openai') ||\n                          content.includes('ai') ||\n                          content.includes('artificial intelligence') ||\n                          content.includes('machine learning');\n    \n    return {\n        json: {\n            originalDate: json.isoDate,\n            processedDate: new Date().toISOString(),\n            isToday: true,\n            title: json.title || 'T√≠tulo n√£o dispon√≠vel',\n            content: json['content:encodedSnippet'] || json.content || 'Conte√∫do n√£o dispon√≠vel',\n            contentPreview: (json['content:encodedSnippet'] || json.content || '').substring(0, 300) + '...',\n            categories: json.categories || [],\n            categoriesCount: (json.categories || []).length,\n            aiTerms: aiTerms,\n            aiTermsCount: aiTerms.length,\n            hasAIInContent: hasAIInContent,\n            source: json.source || 'Fonte n√£o identificada',\n            link: json.link || json.originalData?.link || 'Link n√£o dispon√≠vel',\n            \n            // Categorias principais de IA\n            hasGenerativeAI: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('generative ai') ||\n                cat.toLowerCase().includes('chatgpt') ||\n                cat.toLowerCase().includes('claude') ||\n                cat.toLowerCase().includes('gemini')\n            ) || title.includes('generative') || content.includes('generative'),\n            \n            hasMachineLearning: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('machine learning') ||\n                cat.toLowerCase().includes('ml') ||\n                cat.toLowerCase().includes('deep learning')\n            ) || title.includes('machine learning') || content.includes('machine learning'),\n            \n            hasOpenAI: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('openai') ||\n                cat.toLowerCase().includes('chatgpt')\n            ) || title.includes('openai') || title.includes('chatgpt'),\n            \n            hasAutomation: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('automation') ||\n                cat.toLowerCase().includes('robotics') ||\n                cat.toLowerCase().includes('rpa')\n            ) || title.includes('automation') || content.includes('automation'),\n            \n            hasComputerVision: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('computer vision') ||\n                cat.toLowerCase().includes('image recognition') ||\n                cat.toLowerCase().includes('opencv')\n            ) || title.includes('computer vision') || content.includes('computer vision'),\n            \n            hasNLP: (json.categories || []).some(cat => \n                cat.toLowerCase().includes('nlp') ||\n                cat.toLowerCase().includes('natural language') ||\n                cat.toLowerCase().includes('text processing')\n            ) || title.includes('nlp') || content.includes('natural language'),\n            \n            // Dados originais preservados\n            originalData: json\n        }\n    };\n}\n\n// Processa os dados\nconst todaysNews = filterTodaysNews(inputData);\nconst processedNews = todaysNews.map(processNewsItem);\n\n// Filtra apenas not√≠cias que realmente cont√™m termos de IA\nconst aiRelevantNews = processedNews.filter(item => \n    item.json.aiTermsCount > 0 || item.json.hasAIInContent\n);\n\n// Fun√ß√£o para calcular score de relev√¢ncia\nfunction calculateRelevanceScore(item) {\n    let score = 0;\n    const json = item.json;\n    \n    // Pontua√ß√£o por categoria\n    if (json.hasGenerativeAI) score += 5;\n    if (json.hasMachineLearning) score += 4;\n    if (json.hasOpenAI) score += 5;\n    if (json.hasAutomation) score += 3;\n    if (json.hasComputerVision) score += 3;\n    if (json.hasNLP) score += 4;\n    \n    // Pontua√ß√£o por quantidade de termos de IA\n    score += json.aiTermsCount * 2;\n    \n    // Pontua√ß√£o por presen√ßa no t√≠tulo (mais relevante)\n    const title = (json.title || '').toLowerCase();\n    if (title.includes('ai') || title.includes('artificial intelligence')) score += 3;\n    if (title.includes('chatgpt') || title.includes('openai')) score += 4;\n    if (title.includes('machine learning') || title.includes('deep learning')) score += 3;\n    \n    // Pontua√ß√£o por tamanho do conte√∫do (mais informativo)\n    const contentLength = (json.content || '').length;\n    if (contentLength > 1000) score += 2;\n    if (contentLength > 2000) score += 1;\n    \n    return score;\n}\n\n// Adiciona score de relev√¢ncia a cada not√≠cia\nconst newsWithScore = aiRelevantNews.map(item => ({\n    ...item,\n    json: {\n        ...item.json,\n        relevanceScore: calculateRelevanceScore(item)\n    }\n}));\n\n// Encontra a not√≠cia mais relevante\nconst mostRelevantNews = newsWithScore.reduce((prev, current) => \n    prev.json.relevanceScore > current.json.relevanceScore ? prev : current\n, newsWithScore[0]);\n\n// Log para debug\nconsole.log(`üìä Total de itens recebidos: ${inputData.length}`);\nconsole.log(`üìÖ Not√≠cias de hoje: ${todaysNews.length}`);\nconsole.log(`ü§ñ Not√≠cias relevantes de IA: ${aiRelevantNews.length}`);\nconsole.log(`‚úÖ Itens processados: ${processedNews.length}`);\n\n// Estat√≠sticas adicionais\nconst stats = {\n    generativeAI: aiRelevantNews.filter(item => item.json.hasGenerativeAI).length,\n    machineLearning: aiRelevantNews.filter(item => item.json.hasMachineLearning).length,\n    openAI: aiRelevantNews.filter(item => item.json.hasOpenAI).length,\n    automation: aiRelevantNews.filter(item => item.json.hasAutomation).length,\n    computerVision: aiRelevantNews.filter(item => item.json.hasComputerVision).length,\n    nlp: aiRelevantNews.filter(item => item.json.hasNLP).length\n};\n\nconsole.log('üìà Estat√≠sticas por categoria:');\nconsole.log(`üé® IA Generativa: ${stats.generativeAI}`);\nconsole.log(`üß† Machine Learning: ${stats.machineLearning}`);\nconsole.log(`üí¨ OpenAI/ChatGPT: ${stats.openAI}`);\nconsole.log(`ü§ñ Automa√ß√£o: ${stats.automation}`);\nconsole.log(`üëÅÔ∏è Vis√£o Computacional: ${stats.computerVision}`);\nconsole.log(`üìù NLP: ${stats.nlp}`);\n\n// Log da not√≠cia mais relevante\nif (mostRelevantNews) {\n    console.log('\\n‚≠ê NOT√çCIA MAIS RELEVANTE:');\n    console.log(`üì∞ T√≠tulo: ${mostRelevantNews.json.title}`);\n    console.log(`üîó Link: ${mostRelevantNews.json.originalData.link || 'Link n√£o dispon√≠vel'}`);\n    console.log(`üìä Score: ${mostRelevantNews.json.relevanceScore}`);\n    console.log(`üìÖ Data: ${mostRelevantNews.json.originalDate}`);\n    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n}\n\n// Retorna todas as not√≠cias com score, ordenadas por relev√¢ncia\nreturn newsWithScore.sort((a, b) => b.json.relevanceScore - a.json.relevanceScore);"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[900,3240],"id":"78c8e4c0-0652-4589-ac71-6c2c40751083","name":"FILTRO1"},{"parameters":{"jsCode":"// ====== RESUM√ÉO DE NOT√çCIAS DO MUNDO DAS IA'S ======\n// Pega os dados j√° filtrados do n√≥ anterior\nconst inputData = $input.all();\n\n// Fun√ß√£o para analisar e categorizar as not√≠cias\nfunction analyzeNews(newsArray) {\n    const analysis = {\n        totalNews: newsArray.length,\n        date: new Date().toISOString().split('T')[0],\n        \n        // Contadores por categoria\n        categories: {},\n        aiTerms: {},\n        sources: {},\n        \n        // Top not√≠cias por relev√¢ncia\n        topNews: [],\n        \n        // An√°lise de sentimento b√°sica\n        positiveNews: [],\n        neutralNews: [],\n        negativeNews: [],\n        \n        // Principais temas de IA\n        themes: {\n            generativeAI: [],\n            machineLearning: [],\n            automation: [],\n            research: [],\n            ethics: [],\n            business: [],\n            regulation: [],\n            partnerships: []\n        }\n    };\n    \n    newsArray.forEach(item => {\n        const json = item.json;\n        \n        // Conta categorias\n        (json.categories || []).forEach(cat => {\n            analysis.categories[cat] = (analysis.categories[cat] || 0) + 1;\n        });\n        \n        // Conta termos de IA\n        (json.aiTerms || []).forEach(term => {\n            analysis.aiTerms[term] = (analysis.aiTerms[term] || 0) + 1;\n        });\n        \n        // Conta fontes\n        analysis.sources[json.source] = (analysis.sources[json.source] || 0) + 1;\n        \n        // Classifica por tema\n        const content = (json.content || '').toLowerCase();\n        const title = (json.title || '').toLowerCase();\n        const text = content + ' ' + title;\n        \n        if (text.includes('generative') || text.includes('chatgpt') || text.includes('claude') || text.includes('gemini')) {\n            analysis.themes.generativeAI.push(json);\n        }\n        if (text.includes('machine learning') || text.includes('deep learning') || text.includes('neural network')) {\n            analysis.themes.machineLearning.push(json);\n        }\n        if (text.includes('automation') || text.includes('robotics') || text.includes('autonomous')) {\n            analysis.themes.automation.push(json);\n        }\n        if (text.includes('research') || text.includes('study') || text.includes('algorithm') || text.includes('model')) {\n            analysis.themes.research.push(json);\n        }\n        if (text.includes('ethics') || text.includes('bias') || text.includes('responsible ai') || text.includes('safety')) {\n            analysis.themes.ethics.push(json);\n        }\n        if (text.includes('business') || text.includes('enterprise') || text.includes('startup') || text.includes('investment')) {\n            analysis.themes.business.push(json);\n        }\n        if (text.includes('regulation') || text.includes('policy') || text.includes('government') || text.includes('law')) {\n            analysis.themes.regulation.push(json);\n        }\n        if (text.includes('partnership') || text.includes('collaboration') || text.includes('agreement') || text.includes('acquisition')) {\n            analysis.themes.partnerships.push(json);\n        }\n        \n        // An√°lise de sentimento b√°sica\n        if (text.includes('breakthrough') || text.includes('innovation') || text.includes('success') || text.includes('advance') || text.includes('improvement')) {\n            analysis.positiveNews.push(json);\n        } else if (text.includes('concern') || text.includes('risk') || text.includes('challenge') || text.includes('problem') || text.includes('failure')) {\n            analysis.negativeNews.push(json);\n        } else {\n            analysis.neutralNews.push(json);\n        }\n    });\n    \n    return analysis;\n}\n\n// Fun√ß√£o para criar o resumo executivo\nfunction createExecutiveSummary(analysis) {\n    const topCategories = Object.entries(analysis.categories)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 10);\n    \n    const topAITerms = Object.entries(analysis.aiTerms)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 8);\n    \n    const topSources = Object.entries(analysis.sources)\n        .sort(([,a], [,b]) => b - a)\n        .slice(0, 5);\n    \n    return {\n        overview: {\n            totalNews: analysis.totalNews,\n            date: analysis.date,\n            sentiment: {\n                positive: analysis.positiveNews.length,\n                negative: analysis.negativeNews.length,\n                neutral: analysis.neutralNews.length\n            }\n        },\n        topCategories: topCategories.map(([cat, count]) => ({category: cat, count})),\n        topAITerms: topAITerms.map(([term, count]) => ({term, count})),\n        topSources: topSources.map(([source, count]) => ({source, count})),\n        themes: {\n            generativeAI: analysis.themes.generativeAI.length,\n            machineLearning: analysis.themes.machineLearning.length,\n            automation: analysis.themes.automation.length,\n            research: analysis.themes.research.length,\n            ethics: analysis.themes.ethics.length,\n            business: analysis.themes.business.length,\n            regulation: analysis.themes.regulation.length,\n            partnerships: analysis.themes.partnerships.length\n        }\n    };\n}\n\n// Fun√ß√£o para selecionar as not√≠cias mais relevantes\nfunction selectTopNews(analysis, limit = 15) {\n    const topNews = [];\n    \n    // Pega as melhores de cada tema\n    Object.entries(analysis.themes).forEach(([theme, news]) => {\n        if (news.length > 0) {\n            // Ordena por relev√¢ncia (mais categorias = mais relevante)\n            const sorted = news.sort((a, b) => \n                (b.relevanceScore || b.categories?.length || 0) - (a.relevanceScore || a.categories?.length || 0)\n            );\n            topNews.push(...sorted.slice(0, 2)); // Top 2 de cada tema\n        }\n    });\n    \n    // Remove duplicatas\n    const uniqueNews = topNews.filter((news, index, self) => \n        index === self.findIndex(n => n.title === news.title)\n    );\n    \n    return uniqueNews.slice(0, limit);\n}\n\n// Fun√ß√£o para encontrar a not√≠cia mais relevante de todas\nfunction findMostRelevantNews(newsArray) {\n    if (newsArray.length === 0) return null;\n    \n    return newsArray.reduce((mostRelevant, current) => {\n        const currentScore = current.relevanceScore || current.categories?.length || 0;\n        const mostRelevantScore = mostRelevant.relevanceScore || mostRelevant.categories?.length || 0;\n        \n        return currentScore > mostRelevantScore ? current : mostRelevant;\n    });\n}\n\n// Fun√ß√£o para formatar para o agente\nfunction formatForAgent(analysis, topNews) {\n    const summary = createExecutiveSummary(analysis);\n    \n    return {\n        promptForAgent: `\nRESUMO EXECUTIVO - NOT√çCIAS DE IA ${summary.overview.date}\n=======================================================\n\nüìä OVERVIEW:\n- Total de not√≠cias: ${summary.overview.totalNews}\n- Sentimento: ${summary.overview.sentiment.positive} positivas, ${summary.overview.sentiment.negative} negativas, ${summary.overview.sentiment.neutral} neutras\n\nüè∑Ô∏è PRINCIPAIS CATEGORIAS:\n${summary.topCategories.map(item => `- ${item.category}: ${item.count} not√≠cias`).join('\\n')}\n\nü§ñ TERMOS DE IA MAIS MENCIONADOS:\n${summary.topAITerms.map(item => `- ${item.term}: ${item.count} vezes`).join('\\n')}\n\nüì∞ PRINCIPAIS FONTES:\n${summary.topSources.map(item => `- ${item.source}: ${item.count} not√≠cias`).join('\\n')}\n\nüéØ TEMAS PRINCIPAIS:\n- IA Generativa: ${summary.themes.generativeAI} not√≠cias\n- Machine Learning: ${summary.themes.machineLearning} not√≠cias\n- Automa√ß√£o: ${summary.themes.automation} not√≠cias\n- Pesquisa/Algoritmos: ${summary.themes.research} not√≠cias\n- √âtica/Seguran√ßa: ${summary.themes.ethics} not√≠cias\n- Neg√≥cios/Empresas: ${summary.themes.business} not√≠cias\n- Regulamenta√ß√£o: ${summary.themes.regulation} not√≠cias\n- Parcerias: ${summary.themes.partnerships} not√≠cias\n\nüî• NOT√çCIA MAIS RELEVANTE:\nüì∞ ${mostRelevantNews?.title || 'N/A'}\nüîó ${mostRelevantNews?.link || 'Link n√£o dispon√≠vel'}\nüìä Score: ${mostRelevantNews?.relevanceScore || 'N/A'}\nüìÖ Data: ${mostRelevantNews?.originalDate || 'N/A'}\nüì∞ Fonte: ${mostRelevantNews?.source || 'N/A'}\n\nüî• TOP ${topNews.length} NOT√çCIAS MAIS RELEVANTES:\n${topNews.map((news, i) => `\n${i+1}. ${news.title}\n   Fonte: ${news.source}\n   Link: ${news.link || 'N/A'}\n   Termos IA: ${news.aiTerms?.join(', ') || 'N/A'}\n   Score: ${news.relevanceScore || 'N/A'}\n   Resumo: ${news.contentPreview?.substring(0, 200)}...\n`).join('\\n')}\n\nINSTRU√á√ÉO PARA O AGENTE:\nCom base nessas informa√ß√µes, crie um relat√≥rio executivo das principais tend√™ncias e desenvolvimentos no mercado dos neg√≥cios e empreendedorismo de hoje. Foque nos temas mais relevantes, destaque as not√≠cias mais importantes e forne√ßa insights sobre o que isso significa para o futuro dos neg√≥cios e seus impactos na sociedade e nos neg√≥cios.\n        `,\n        \n        // Dados estruturados para processamento\n        structuredData: {\n            summary,\n            topNews,\n            fullAnalysis: analysis\n        }\n    };\n}\n\n// Processa os dados\nconsole.log(`üîç Processando ${inputData.length} not√≠cias de IA...`);\n\nconst analysis = analyzeNews(inputData);\nconst topNews = selectTopNews(analysis, 15);\n\n// Encontra a not√≠cia MAIS relevante de todas\nconst mostRelevantNews = findMostRelevantNews(inputData);\n\nconst agentData = formatForAgent(analysis, topNews);\n\nconsole.log(`üìä An√°lise completa: ${analysis.totalNews} not√≠cias`);\nconsole.log(`üî• Selecionadas ${topNews.length} not√≠cias top`);\nconsole.log(`üìù Prompt preparado para o agente`);\n\n// Log da not√≠cia mais relevante\nif (mostRelevantNews) {\n    console.log('\\n‚≠ê NOT√çCIA MAIS RELEVANTE DE TODAS:');\n    console.log(`üì∞ T√≠tulo: ${mostRelevantNews.title}`);\n    console.log(`üîó Link: ${mostRelevantNews.link || 'Link n√£o dispon√≠vel'}`);\n    console.log(`üìä Score: ${mostRelevantNews.relevanceScore || 'N/A'}`);\n    console.log(`üìÖ Data: ${mostRelevantNews.originalDate || 'N/A'}`);\n    console.log(`üì∞ Fonte: ${mostRelevantNews.source || 'N/A'}`);\n    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n}\n\nconsole.log(`üìä An√°lise completa: ${analysis.totalNews} not√≠cias`);\nconsole.log(`üî• Selecionadas ${topNews.length} not√≠cias top`);\nconsole.log(`üìù Prompt preparado para o agente`);\n\n// Estat√≠sticas detalhadas por tema\nconsole.log('\\nüéØ DISTRIBUI√á√ÉO POR TEMAS:');\nconsole.log(`üé® IA Generativa: ${analysis.themes.generativeAI.length}`);\nconsole.log(`üß† Machine Learning: ${analysis.themes.machineLearning.length}`);\nconsole.log(`ü§ñ Automa√ß√£o: ${analysis.themes.automation.length}`);\nconsole.log(`üî¨ Pesquisa: ${analysis.themes.research.length}`);\nconsole.log(`‚öñÔ∏è √âtica/Seguran√ßa: ${analysis.themes.ethics.length}`);\nconsole.log(`üíº Neg√≥cios: ${analysis.themes.business.length}`);\nconsole.log(`üìã Regulamenta√ß√£o: ${analysis.themes.regulation.length}`);\nconsole.log(`ü§ù Parcerias: ${analysis.themes.partnerships.length}`);\n\n// Retorna um √∫nico item com o resumo para o agente\nreturn [{\n    json: {\n        type: 'ai_news_summary',\n        date: analysis.date,\n        totalNewsProcessed: analysis.totalNews,\n        topNewsSelected: topNews.length,\n        \n        // Prompt formatado para o agente\n        agentPrompt: agentData.promptForAgent,\n        \n        // Dados estruturados\n        summary: agentData.structuredData.summary,\n        topNews: agentData.structuredData.topNews,\n        \n        // Estat√≠sticas r√°pidas\n        quickStats: {\n            mainTheme: Object.entries(analysis.themes)\n                .sort(([,a], [,b]) => b.length - a.length)[0]?.[0] || 'N/A',\n            topAITerm: Object.entries(analysis.aiTerms)\n                .sort(([,a], [,b]) => b - a)[0]?.[0] || 'N/A',\n            topSource: Object.entries(analysis.sources)\n                .sort(([,a], [,b]) => b - a)[0]?.[0] || 'N/A',\n            sentimentScore: analysis.positiveNews.length - analysis.negativeNews.length,\n            mostRelevantNews: topNews[0]?.title || 'N/A'\n        },\n        \n        // NOT√çCIA MAIS RELEVANTE - DADOS COMPLETOS\n        mostRelevantNews: mostRelevantNews ? {\n            title: mostRelevantNews.title,\n            link: mostRelevantNews.link || 'Link n√£o dispon√≠vel',\n            source: mostRelevantNews.source || 'Fonte n√£o identificada',\n            relevanceScore: mostRelevantNews.relevanceScore || 0,\n            date: mostRelevantNews.originalDate || new Date().toISOString(),\n            content: mostRelevantNews.content || 'Conte√∫do n√£o dispon√≠vel',\n            contentPreview: mostRelevantNews.contentPreview || 'Preview n√£o dispon√≠vel',\n            aiTerms: mostRelevantNews.aiTerms || [],\n            categories: mostRelevantNews.categories || []\n        } : null\n    }\n}];"},"id":"618e00ca-2e90-4ba0-9c84-81eddc3859c1","name":"RESUM√ÉO1","type":"n8n-nodes-base.code","position":[1140,3340],"typeVersion":2},{"parameters":{"rule":{"interval":[{"triggerAtHour":20,"triggerAtMinute":1}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-1600,3280],"id":"1a1e5f13-0a88-47da-adc5-2102854f8af1","name":"Schedule Trigger1"},{"parameters":{"url":"https://agenciasebrae.com.br/ultimas-noticias/feed/","options":{}},"id":"c197ad4d-29d9-47c2-ad16-c656e42c8bf9","name":"aiaccelerator1","type":"n8n-nodes-base.rssFeedRead","position":[0,3320],"typeVersion":1.1},{"parameters":{"resource":"messages-api","instanceName":"notificacoes","remoteJid":"=556294342576","messageText":"={{ $json.message.content }}","options_message":{"mentions":{"mentionsSettings":{"mentionsEveryOne":true}}}},"type":"n8n-nodes-evolution-api.evolutionApi","typeVersion":1,"position":[1860,3340],"id":"db263617-73f9-4e85-a061-134e6dc5d6f0","name":"Enviar texto1","credentials":{"evolutionApi":{"id":"V2fpHnZeAReBnCaU","name":"Evolution account"}}}],"connections":{"Set Query":{"main":[[{"node":"RSS Cointelegraph","type":"main","index":0},{"node":"RSS Bitcoinmagazine","type":"main","index":0},{"node":"aiaccelerator","type":"main","index":0},{"node":"ai-techpark","type":"main","index":0},{"node":"knowtechie","type":"main","index":0},{"node":"RSS aibusiness","type":"main","index":0},{"node":"RSS MACHINE","type":"main","index":0},{"node":"RSS GOOGLE","type":"main","index":0},{"node":"RSS INTELIGENCE BLOG","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Crypto News & Sentiment Agent","type":"ai_languageModel","index":0}]]},"RSS Cointelegraph":{"main":[[{"node":"Merge All Articles","type":"main","index":0}]]},"Merge All Articles":{"main":[[{"node":"FILTRO","type":"main","index":0}]]},"RSS Bitcoinmagazine":{"main":[[{"node":"Merge All Articles","type":"main","index":1}]]},"Crypto News & Sentiment Agent":{"main":[[{"node":"Set Query","type":"main","index":0}]]},"Summarize News & Sentiment (GPT-4o)":{"main":[[{"node":"Enviar texto","type":"main","index":0}]]},"FILTRO":{"main":[[{"node":"RESUM√ÉO","type":"main","index":0}]]},"RESUM√ÉO":{"main":[[{"node":"Summarize News & Sentiment (GPT-4o)","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"Crypto News & Sentiment Agent","type":"main","index":0}]]},"aiaccelerator":{"main":[[{"node":"Merge All Articles","type":"main","index":2}]]},"ai-techpark":{"main":[[{"node":"Merge All Articles","type":"main","index":3}]]},"knowtechie":{"main":[[{"node":"Merge All Articles","type":"main","index":4}]]},"When chat message received":{"main":[[{"node":"Crypto News & Sentiment Agent","type":"main","index":0}]]},"RSS aibusiness":{"main":[[{"node":"Merge All Articles","type":"main","index":6}]]},"RSS MACHINE":{"main":[[{"node":"Merge All Articles","type":"main","index":7}]]},"RSS GOOGLE":{"main":[[{"node":"Merge All Articles","type":"main","index":8}]]},"RSS INTELIGENCE BLOG":{"main":[[{"node":"Merge All Articles","type":"main","index":9}]]},"OpenAI Chat Model1":{"ai_languageModel":[[{"node":"Crypto News & Sentiment Agent1","type":"ai_languageModel","index":0}]]},"Set Query1":{"main":[[{"node":"RSS Cointelegraph1","type":"main","index":0},{"node":"RSS Bitcoinmagazine1","type":"main","index":0},{"node":"aiaccelerator1","type":"main","index":0}]]},"Crypto News & Sentiment Agent1":{"main":[[{"node":"Set Query1","type":"main","index":0}]]},"RSS Cointelegraph1":{"main":[[{"node":"Merge All Articles1","type":"main","index":0}]]},"RSS Bitcoinmagazine1":{"main":[[{"node":"Merge All Articles1","type":"main","index":1}]]},"Merge All Articles1":{"main":[[{"node":"FILTRO1","type":"main","index":0}]]},"Summarize News & Sentiment (GPT-4o)1":{"main":[[{"node":"Enviar texto1","type":"main","index":0}]]},"FILTRO1":{"main":[[{"node":"RESUM√ÉO1","type":"main","index":0}]]},"RESUM√ÉO1":{"main":[[{"node":"Summarize News & Sentiment (GPT-4o)1","type":"main","index":0}]]},"Schedule Trigger1":{"main":[[{"node":"Crypto News & Sentiment Agent1","type":"main","index":0}]]},"aiaccelerator1":{"main":[[{"node":"Merge All Articles1","type":"main","index":2}]]}},"authors":"system migration","name":null,"description":null,"autosaved":false},"tags":[]}