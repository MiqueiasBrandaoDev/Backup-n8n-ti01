{"updatedAt":"2025-05-26T17:18:13.432Z","createdAt":"2025-05-26T17:18:13.432Z","id":"NrwFHUJZawhD7kxE","name":"Criação de conteudo modelo","active":true,"isArchived":false,"nodes":[{"parameters":{},"id":"4146d8b4-9888-4904-adaa-aee263f6fb52","name":"Executar","type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-180,740],"disabled":true},{"parameters":{"content":"## TROQUE OS DADOS","height":546.090684653281,"width":266.5667270958032},"id":"d0eae02f-71b8-4238-97b2-b54ed87c05f3","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[20,640]},{"parameters":{"method":"POST","url":"={{ $node['dados'].json[\"URL do Site\"] }}/wp-json/wp/v2/posts","authentication":"predefinedCredentialType","nodeCredentialType":"wordpressApi","sendBody":true,"bodyParameters":{"parameters":[{"name":"featured_media","value":"={{ $node['Wordpress - Salvar imagem em mídia'].json[\"id\"] }}"},{"name":"date","value":"={{ $node['dados'].json.DataHoraISO ? $node['dados'].json.DataHoraISO : null }}"},{"name":"excerpt","value":"={{ $node['Dados SEO'].json[\"descricao\"] }}"},{"name":"title","value":"={{ $node['Dados SEO'].json[\"titulo\"] }}"},{"name":"content","value":"={{ $node['Dados SEO'].json[\"introducao\"] }}<br/>\n{{ $node['Dados SEO'].json[\"conteudo\"] }}"},{"name":"slug","value":"={{ $node['dados'].json[\"Palavra Chave Foco\"].replaceAll(\" \",\"-\").toLowerCase().normalize('NFD').replace(/\\p{Mn}/gu, \"\") }}"},{"name":"categories","value":"={{ $node['dados'].json[\"Categoria\"] }}"},{"name":"status","value":"={{ $node['dados'].json[\"Status\"] }}"},{"name":"tags","value":"={{ $node['dados'].json[\"Tags\"] }}"}]},"options":{"redirect":{"redirect":{}}}},"id":"4c61865b-1f9f-4696-9776-a43556a8ff8d","name":"Wordpress - Publicar Post","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[2980,740],"retryOnFail":true,"maxTries":5,"waitBetweenTries":5000},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"={{ $node['variaveis'].json[\"Planilha ID\"] }}","mode":"id"},"sheetName":{"__rl":true,"value":"={{ $node['variaveis'].json[\"Planilha Aba\"] }}","mode":"id"},"columns":{"mappingMode":"defineBelow","value":{"Execução":"=PENDENTE","row_number":"={{ $node['Google Sheets - Ler Palavras Chaves'].json[\"row_number\"] }}","Processo":"PENDENTE","ID da Execução":"={{ $execution.id }}"},"matchingColumns":["row_number"],"schema":[{"id":"Data","displayName":"Data","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Hora","displayName":"Hora","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Palavra Chave Foco","displayName":"Palavra Chave Foco","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Título","displayName":"Título","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"ID da Categoria","displayName":"ID da Categoria","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Categoria","displayName":"Categoria","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"ID das Tags","displayName":"ID das Tags","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Imagem","displayName":"Imagem","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Status","displayName":"Status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Outlines","displayName":"Outlines","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Link","displayName":"Link","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Execução","displayName":"Execução","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"ID da Execução","displayName":"ID da Execução","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Posição","displayName":"Posição","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Concorrência","displayName":"Concorrência","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"readOnly":true,"removed":false}]},"options":{}},"id":"b44a693a-d7c8-44e1-bf86-445ea0c96e1d","name":"Google Sheets - Status Executando","type":"n8n-nodes-base.googleSheets","typeVersion":4,"position":[580,740],"retryOnFail":true,"maxTries":null,"waitBetweenTries":5000},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"={{ $node['variaveis_erro'].json[\"Planilha ID\"] }}","mode":"id"},"sheetName":{"__rl":true,"value":"={{ $node['variaveis_erro'].json[\"Planilha Aba\"] }}","mode":"id"},"columns":{"mappingMode":"defineBelow","value":{"Execução":"=ERRO","Link":"={{'=HYPERLINK(\"' + $node['variaveis_erro'].json['N8N URL'] + '/workflow/' +$node['Ocorreu Erro'].json.workflow.id + '/executions/' + $node['Ocorreu Erro'].json.execution.id + '\"' + '; \"' + $(\"Ocorreu Erro\").item.json.execution.error.message.replaceAll(\"\\\"\",\"*\") +'\")' }}","ID da Execução":"={{ $node['Ocorreu Erro'].json.execution.id }}"},"matchingColumns":["ID da Execução"],"schema":[{"id":"Data","displayName":"Data","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Hora","displayName":"Hora","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Palavra Chave Foco","displayName":"Palavra Chave Foco","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Título","displayName":"Título","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"ID da Categoria","displayName":"ID da Categoria","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Categoria","displayName":"Categoria","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"ID das Tags","displayName":"ID das Tags","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Imagem","displayName":"Imagem","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Status","displayName":"Status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Outlines","displayName":"Outlines","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Link","displayName":"Link","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Execução","displayName":"Execução","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"ID da Execução","displayName":"ID da Execução","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Posição","displayName":"Posição","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Concorrência","displayName":"Concorrência","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"readOnly":true,"removed":true}]},"options":{"cellFormat":"USER_ENTERED"}},"id":"9b999ff7-180f-4ad9-8a9f-8eb63263a428","name":"Google Sheets - Status ERRO","type":"n8n-nodes-base.googleSheets","typeVersion":4,"position":[460,940]},{"parameters":{},"id":"ef235a57-a154-45a2-a359-232fafb655ba","name":"Ocorreu Erro","type":"n8n-nodes-base.errorTrigger","typeVersion":1,"position":[-180,940]},{"parameters":{"rule":{"interval":[{"field":"minutes","minutesInterval":"={{ 10 }}"}]}},"id":"d5babfa2-1d86-4118-b361-e752ea641fca","name":"A cada 10 min","type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.1,"position":[-180,560],"disabled":true},{"parameters":{"keepOnlySet":true,"values":{"string":[{"name":"Planilha ID"},{"name":"Planilha Aba"},{"name":"N8N URL"}]},"options":{}},"id":"180b65be-76ee-4b40-b76d-c58cff6c9a10","name":"variaveis_erro","type":"n8n-nodes-base.set","typeVersion":2,"position":[100,940]},{"parameters":{"documentId":{"__rl":true,"value":"={{ $('variaveis').item.json[\"Planilha ID\"] }}","mode":"id"},"sheetName":{"__rl":true,"value":"={{ $('variaveis').item.json[\"Planilha Aba\"] }}","mode":"id"},"filtersUI":{"values":[{"lookupColumn":"=Execução"}]},"options":{"returnAllMatches":"returnFirstMatch"}},"id":"6b8aaffc-301c-4ed9-b4b1-9e469906d780","name":"Google Sheets - Ler Palavras Chaves","type":"n8n-nodes-base.googleSheets","typeVersion":4,"position":[360,740],"retryOnFail":true,"waitBetweenTries":5000},{"parameters":{"content":"## ChatGPT\nSelecione a **Credencial** da OpenAI\nSelecione o **Modelo** desejado\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÉ possível **personalizar o prompt**, apenas não altere os atributos\n\n❌ [**Erros Comuns da OpenAI**](https://trello.com/c/GnzFC29M/4-openai-erros)","height":370.7053142981799,"width":802.5811604308764},"id":"a5b7afb6-ca88-49fb-812a-227691a43782","name":"Sticky Note18","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[940,620]},{"parameters":{"content":"## Wordpress\nSelecione as credenciais do Wordpress\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n❌ [**Erros Comuns do Wordpress**](https://trello.com/c/vhORuZah/9-credencial-do-wordpress)","height":353.34114173487467,"width":589.4443731756315},"id":"efadee02-e66f-4414-93d2-59f18e46cab2","name":"Sticky Note31","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[2540,640]},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"={{ $node['variaveis'].json[\"Planilha ID\"] }}","mode":"id"},"sheetName":{"__rl":true,"value":"={{ $node['variaveis'].json[\"Planilha Aba\"] }}","mode":"id"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $node['Google Sheets - Ler Palavras Chaves'].json[\"row_number\"] }}","Título":"={{ $node['Dados SEO'].json[\"titulo\"] }}","Link":"={{ $node['Wordpress - Publicar Post'].json[\"link\"] }}","Execução":"CONCLUÍDO"},"matchingColumns":["row_number"],"schema":[{"id":"Data","displayName":"Data","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Hora","displayName":"Hora","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"IA","displayName":"IA","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Palavra Chave Foco","displayName":"Palavra Chave Foco","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Título","displayName":"Título","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"ID da Categoria","displayName":"ID da Categoria","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Categoria","displayName":"Categoria","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"ID das Tags","displayName":"ID das Tags","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Banco de imagem","displayName":"Banco de imagem","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Imagem","displayName":"Imagem","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Imagens nos Subtítulos?","displayName":"Imagens nos Subtítulos?","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Quantidade de Subtítulos","displayName":"Quantidade de Subtítulos","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Subtítulos","displayName":"Subtítulos","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Status","displayName":"Status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Link","displayName":"Link","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Execução","displayName":"Execução","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"ID da Execução","displayName":"ID da Execução","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Indexação","displayName":"Indexação","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Posição","displayName":"Posição","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Concorrência","displayName":"Concorrência","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"readOnly":true,"removed":false}]},"options":{"cellFormat":"USER_ENTERED"}},"id":"e7010049-6bad-4d43-ad9d-28f3c7f6a6bf","name":"Google Sheets - Status Publicado","type":"n8n-nodes-base.googleSheets","typeVersion":4.3,"position":[3260,740]},{"parameters":{"assignments":{"assignments":[{"id":"e24ac621-e2d6-46e7-82e6-846d0f5d27f3","name":"titulo","value":"={{ $node['dados'].json[\"Título\"] ? \n$node['dados'].json[\"Título\"] : $node['ChatGPT - SEO'].json[\"message\"][\"content\"][\"titulo\"] }}","type":"string"},{"id":"4502c6f0-9081-4b33-b62f-d5d5ac78b14a","name":"descricao","value":"={{ $node['ChatGPT - SEO'].json[\"message\"][\"content\"][\"descricao\"] }}","type":"string"},{"id":"58d1dd67-0841-4736-86fd-6c874b6c6320","name":"introducao","value":"={{ $node['ChatGPT - SEO'].json[\"message\"][\"content\"][\"introducao\"] }}","type":"string"},{"id":"7110b572-fe2f-4e37-86a9-5d4087e1e142","name":"conteudo","value":"={{ $node['ChatGPT - Conteúdo'].json[\"message\"][\"content\"][\"content\"] }}","type":"string"}]},"options":{"dotNotation":true}},"id":"516dd771-e24f-4a36-9e28-986c09d03628","name":"Dados SEO","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[1780,740]},{"parameters":{"method":"POST","url":"={{ $node['dados'].json[\"URL do Site\"] }}/wp-json/wp/v2/media/","authentication":"predefinedCredentialType","nodeCredentialType":"wordpressApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"cache-control","value":"no-cache"},{"name":"content-disposition","value":"=attachment; filename={{ $node['dados'].json[\"Palavra Chave Foco\"]\n.replaceAll(\" \", \"-\")\n.toLowerCase()\n.normalize('NFD')\n.replace(/\\p{Mn}/gu, \"\")\n.replace(/[^\\w\\-]/g, \"\") // Remove todos os caracteres não permitidos\n.slice(0, 100) }}.{{ $binary.data.fileExtension }}"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{"redirect":{"redirect":{}}}},"id":"6cc3ee96-f56c-4c55-92ed-904e8a167629","name":"Wordpress - Salvar imagem em mídia","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[2580,740],"retryOnFail":true,"maxTries":5,"waitBetweenTries":5000},{"parameters":{"method":"POST","url":"={{ $node['dados'].json[\"URL do Site\"] }}/wp-json/wp/v2/media/{{ $node['Wordpress - Salvar imagem em mídia'].json[\"id\"] }}","authentication":"predefinedCredentialType","nodeCredentialType":"wordpressApi","sendBody":true,"contentType":"form-urlencoded","bodyParameters":{"parameters":[{"name":"alt_text","value":"={{ $node['dados'].json[\"Palavra Chave Foco\"] }}"},{"name":"title","value":"={{ $node['dados'].json[\"Palavra Chave Foco\"] }}"},{"name":"description","value":"={{ $node['dados'].json[\"Palavra Chave Foco\"] }}"},{"name":"caption","value":"={{ $node['dados'].json[\"Palavra Chave Foco\"] }}"}]},"options":{"redirect":{"redirect":{}}}},"id":"b1283c6b-1430-414c-bf81-6bcb11c373a0","name":"Wordpress - Atualizar Atributos da imagem","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[2800,740],"retryOnFail":true,"maxTries":5,"waitBetweenTries":5000},{"parameters":{"content":"## Imagem","height":365.54884773411055,"width":526.7233807942426,"color":2},"id":"728193a5-2c9b-4fd2-a04f-167035bb2fe8","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1940,620]},{"parameters":{"operation":"information"},"id":"23918ce2-2c39-4fed-9f83-d377b4f517b4","name":"Pega informações","type":"n8n-nodes-base.editImage","typeVersion":1,"position":[2160,740]},{"parameters":{"operation":"resize","width":"={{ $json[\"size\"][\"width\"] > 1200 ? 1200 : $json[\"size\"][\"width\"] }}","height":"={{ $json[\"size\"][\"height\"] > 630 ? 630 : $json[\"size\"][\"height\"] }}","resizeOption":"onlyIfLarger","options":{"format":"jpeg"}},"id":"81efa9e2-b874-48bb-b5b1-5f367c69d6c5","name":"redimensionar","type":"n8n-nodes-base.editImage","typeVersion":1,"position":[2320,740]},{"parameters":{"url":"={{ $node['dados'].json[\"Imagem\"] }}","options":{}},"id":"9b0bdd85-aeae-433b-8d5d-552c5a5613ac","name":"Baixar a imagem","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[1980,740],"retryOnFail":true,"maxTries":5,"waitBetweenTries":5000},{"parameters":{"assignments":{"assignments":[{"id":"0bbc1389-0f6a-4ecf-a658-1a69c9f98132","name":"Planilha ID","value":"","type":"string"},{"id":"85634c7b-03de-4486-919c-7a04197c9839","name":"Planilha Aba","value":"","type":"string"},{"id":"2d3c9387-7ddf-408e-bde2-1f659f978ba8","name":"URL do Site","value":"","type":"string"}]},"options":{}},"id":"c95d6b86-2abf-4fbd-9533-9a69993e3df7","name":"variaveis","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[100,740]},{"parameters":{"content":"Configure o **Timezone** nos 3 pontinhos ao lado do save antes de ativar","height":220.4568364843337,"width":184.478415473571},"id":"ec7d65a5-c7c7-40f1-8f11-0158501dbfdf","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-220,480]},{"parameters":{"content":"## Google Sheets\nSelecione apenas a **Credencial** do Google Sheets\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n❌ [**Erros Comuns do Google Sheets**](https://trello.com/c/V7wmteYt/11-planilha-do-google-com-erro)","height":547.4601398832745,"width":424.9063344970598},"id":"ae6c85ab-bfce-4ba0-ac99-49f15d9f7ee3","name":"Sticky Note19","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[320,640]},{"parameters":{"content":"## Google Sheets\nSelecione a **Credencial** do Google Sheets\n\n\n\n\n\n\n\n\n","height":348.13107528448137,"width":314.37982969179706},"id":"ee8c28e8-d9b3-458c-bc34-e76aef9f938b","name":"Sticky Note20","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[3160,640]},{"parameters":{"jsCode":"// Defina os campos obrigatórios conforme suas especificações\nconst requiredFields = [\"Palavra Chave Foco\", \"Categoria\", \"Status\"];\n\n// Array para armazenar erros\nlet errors = [];\n\n// Verificar se o node \"Google Sheets - Ler Palavras Chaves\" existe e tem dados\nconst sheetData = $node[\"Google Sheets - Ler Palavras Chaves\"]?.json;\nif (!sheetData) {\n  errors.push('O node \"Google Sheets - Ler Palavras Chaves\" não foi encontrado ou não contém dados.');\n}\n\n// Verificar se o node \"variaveis\" existe e tem o campo \"URL do Site\"\nlet urlSite = $node[\"variaveis\"]?.json?.[\"URL do Site\"] || '';\nif (!urlSite) {\n  errors.push('O campo \"URL do Site\" é obrigatório e não foi fornecido pelo node \"variaveis\".');\n}\n\n// Adicionar log para depuração\nconsole.log(\"Valor fornecido para URL do Site:\", urlSite);\n\n// Remover espaços em branco nas extremidades e substituir \"http\" por \"https\"\nurlSite = urlSite.trim().replace(/^http:\\/\\//, 'https://');\n\n// Remover barra final se existir\nif (urlSite.endsWith('/')) {\n  urlSite = urlSite.slice(0, -1);\n}\n\n// Verificar se o URL é válido\nif (!urlSite.match(/^https:\\/\\/[^\\s/$.?#].[^\\s]*$/)) {\n  errors.push(`O campo \"URL do Site\" está malformado. Valor fornecido: \"${urlSite}\"`);\n}\n\n// **Função para Extrair IDs das Categorias e Tags**\nfunction extractIds(field) {\n  return field\n    .split(',')\n    .map(item => item.trim().split(' - ')[0])\n    .join(',');\n}\n\n// **Tratar Categoria e Tags**\nlet categoryIds = extractIds(sheetData[\"Categoria\"] || \"\");\nlet tagIds = extractIds(sheetData[\"Tags\"] || \"\");\n\nconsole.log(`ID das Categorias Normalizado: ${categoryIds}`);\nconsole.log(`ID das Tags Normalizado: ${tagIds}`);\n\n// **Tratar Status**\nconst statusMap = {\n  \"Rascunho\": \"draft\",\n  \"Publicado\": \"publish\",\n  \"Agendado\": \"future\",\n  \"Revisão pendente\": \"pending\",\n  \"Privado\": \"private\"\n};\n\nlet status = sheetData ? sheetData[\"Status\"] || \"\" : \"\";\nlet normalizedStatus = statusMap[status] || 'future';\n\n// Adicionar log para depuração do status\nconsole.log(`Status original: \"${status}\", Status normalizado: \"${normalizedStatus}\"`);\n\n// **Validar e Detectar Valores Invertidos de Data e Hora**\nlet data = sheetData ? sheetData[\"Data\"] || \"\" : \"\";\nlet hora = sheetData ? sheetData[\"Hora\"] || \"\" : \"\";\n\n// Verificar e corrigir se data e hora estão invertidas\nif (data.match(/^\\d{2}:\\d{2}$/) && hora.match(/^\\d{2}\\/\\d{2}\\/\\d{4}$/)) {\n  console.warn(\"Detectamos que os campos Data e Hora estão invertidos. Corrigindo...\");\n  [data, hora] = [hora, data];\n}\n\n// Verificar preenchimento condicional de data e hora\nif ((data && !hora) || (!data && hora)) {\n  errors.push(`Se um dos campos \"Data\" ou \"Hora\" for preenchido, ambos devem ser fornecidos.`);\n}\n\n// Converter para ISO apenas se ambos estiverem presentes e válidos\nlet isoDateTime = \"\";\nif (data && hora) {\n  if (!data.match(/^\\d{2}\\/\\d{2}\\/\\d{4}$/)) {\n    errors.push(`A data fornecida é inválida: \"${data}\". Use o formato DD/MM/AAAA.`);\n  }\n  if (!hora.match(/^\\d{2}:\\d{2}$/)) {\n    errors.push(`A hora fornecida é inválida: \"${hora}\". Use o formato hh:mm.`);\n  }\n\n  try {\n    let [day, month, year] = data.split('/');\n    let [hour, minute] = hora.split(':');\n\n    // Converter para números inteiros\n    hour = parseInt(hour, 10);\n    minute = parseInt(minute, 10);\n\n    // Ajuste de fuso horário (UTC+3)\n    hour = (hour + 3) % 24;\n\n    isoDateTime = `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}T` +\n                  `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}:00.000Z`;\n\n    console.log(`Data e hora convertidas para ISO: ${isoDateTime}`);\n  } catch (error) {\n    console.error(`Erro ao converter data e hora: ${error.message}`);\n    errors.push(`Erro ao converter data e hora.`);\n  }\n}\n\n// Adicionar os dados ao item final\nconst finalData = {\n  ...sheetData,\n  \"URL do Site\": urlSite,\n  \"Categoria\": categoryIds,\n  \"Tags\": tagIds,\n  \"Status\": normalizedStatus,\n  \"DataHoraISO\": isoDateTime\n};\n\n// Validar campos obrigatórios\nrequiredFields.forEach(field => {\n  if (!finalData[field] || finalData[field].toString().trim() === \"\") {\n    errors.push(`O campo \"${field}\" é obrigatório e está vazio.`);\n  }\n});\n\n// Validação de \"Palavra Chave Foco\" para não ser apenas espaços em branco\nif (finalData[\"Palavra Chave Foco\"] && finalData[\"Palavra Chave Foco\"].trim() === \"\") {\n  errors.push(`O campo \"Palavra Chave Foco\" não pode ser apenas espaços em branco.`);\n}\n\n// Se houver erros, registrar e lançar exceção com tratamento adequado\nif (errors.length > 0) {\n  const errorMessage = errors.map(e => e.trim()).join(\"\\n\");\n  console.error(\"Erros encontrados:\", errorMessage);\n  throw new Error(errorMessage);\n}\n\n// Se não houver erros, retornar os dados finais\nreturn finalData;\n"},"id":"958c0006-682d-43da-bb61-9f8dd8ce1701","name":"dados","type":"n8n-nodes-base.code","typeVersion":2,"position":[780,740]},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=Crie um post para blog baseado na palavra chave '{{ $node['dados'].json[\"Palavra Chave Foco\"] }}' com o título \"{{ $node['dados'].json[\"Título\"] ? $node['dados'].json[\"Título\"] : $node['ChatGPT - SEO'].json[\"message\"][\"content\"][\"titulo\"].replaceAll('\"','') }}\", seguindo as diretrizes:\n\n1 - Quando possível utilize marcações HTML como <p>, <strong>, <em>, <h3>, <ul> e <li>;\n2 - adicione títulos <h2> no início de cada subtítulo;\n3 - Considere readability com 70 – 80 de score e 7th grade;\n4 - evite criar conclusões, evite criar introdução;\n5 - desenvolva os subtítulos: {{ $('ChatGPT - SEO').item.json[\"message\"][\"content\"][\"subtitulos\"] }};\n6 - Espefique bem o conteúdo para no mínimo ter 2000 palavras;\n7 - Não inclua o título <h1> no post;\n8 - Utilize somente marcações HTML;\n\nEscreva em português (brasileiro);\n\nExample Output: {\"content\":\"<h2>O que é SEO?</h2><p>SEO, ou <strong>otimização para mecanismos de busca</strong>, é o processo de melhorar a visibilidade de um site nos resultados orgânicos dos motores de busca, como o Google. Quando alguém procura por informações, o Google usa algoritmos para determinar quais páginas devem ser mostradas. O objetivo do SEO é fazer com que seu site apareça nas primeiras posições desses resultados.</p><h2>Por que o SEO é Importante?</h2><p>O SEO é crucial por várias razões:</p><ul> <li><strong>Aumento de Tráfego:</strong> Quanto melhor seu posicionamento, mais visitantes você receberá.</li> <li><strong>Credibilidade:</strong> Sites que aparecem nas primeiras posições são vistos como mais confiáveis.</li> <li><strong>Melhor Experiência do Usuário:</strong> Uma boa estratégia de SEO leva a um site mais organizado e fácil de navegar.</li> <li><strong>Custo-efetividade:</strong> SEO oferece um retorno sobre investimento (ROI) melhor comparado a outros métodos de marketing.</li></ul><h2>Como Funciona o SEO?</h2><p>O SEO funciona em três áreas principais:</p><ul> <li><strong>SEO On-page:</strong> Foca na otimização de conteúdo e estrutura de um site.</li> <li><strong>SEO Off-page:</strong> Envolve ações fora do seu site que impactam sua posição, como backlinks.</li> <li><strong>SEO Técnico:</strong> Garante que seu site esteja tecnicamente em conformidade com as diretrizes dos motores de busca.</li></ul><h2>SEO On-page</h2><p>O SEO On-page é uma parte fundamental da sua estratégia. Isso inclui:</p><ul> <li><strong>Palavras-chave:</strong> Identifique palavras-chave relevantes que seu público-alvo está procurando.</li> <li><strong>Títulos e Meta Descrições:</strong> Utilize títulos cativantes e meta descrições que chamem a atenção.</li> <li><strong>URL Amigáveis:</strong> Faça URLs simples e diretas que incluam palavras-chave.</li> <li><strong>Conteúdo de Qualidade:</strong> Produza conteúdo original e útil que responda às perguntas dos usuários.</li> <li><strong>Imagens Otimizadas:</strong> Use imagens de qualidade com descrições e tags alt adequadas.</li></ul><h2>SEO Off-page</h2><p>No SEO Off-page, a construção de autoridade é a prioridade. As principais práticas incluem:</p><ul> <li><strong>Backlinks:</strong> Obtenha links de outros sites relevantes que apontem para o seu.</li> <li><strong>Redes Sociais:</strong> Compartilhe seu conteúdo em plataformas sociais para aumentar a visibilidade.</li> <li><strong>Guest Blogging:</strong> Escreva artigos para outros blogs como uma forma de divulgar seu site e conquistar links.</li> <li><strong>Comentário e Participação em Fóruns:</strong> Contribua em comunidades online relevantes para sua área de atuação.</li></ul><h2>SEO Técnico</h2><p>O SEO técnico garante que seu site funcione corretamente. Isso inclui:</p><ul> <li><strong>Velocidade do Site:</strong> Um site rápido melhora a experiência do usuário e o ranking.</li> <li><strong>Mobile Friendliness:</strong> Garanta que o site seja responsivo e funcione bem em dispositivos móveis.</li> <li><strong>Arquivo Robots.txt:</strong> Use este arquivo para controlar quais páginas podem ser indexadas pelos motores de busca.</li> <li><strong>Arquivo Sitemap:</strong> Crie um sitemap XML para facilitar a indexação do seu site.</li></ul><h2>Pesquisa de Palavras-chave</h2><p>A pesquisa de palavras-chave é essencial para o sucesso do SEO. Comece com:</p><ul> <li><strong>Identificar Seu Público:</strong> Conheça as necessidades e interesses do seu público-alvo.</li> <li><strong>Ferramentas de Pesquisa:</strong> Utilize ferramentas como Google Keyword Planner, SEMrush e Ahrefs para encontrar palavras-chave.</li> <li><strong>Long Tail Keywords:</strong> Foque em palavras-chave de cauda longa que tenham menos concorrência.</li></ul><h2>Conteúdo de Qualidade</h2><p>Produzir conteúdo valioso é fundamental para o SEO. Aqui estão algumas dicas:</p><ul> <li><strong>Resolva Problemas:</strong> Seu conteúdo deve responder a perguntas e solucionar problemas dos usuários.</li> <li><strong>Atualizações:</strong> Mantenha seu conteúdo atualizado para manter a relevância com o tempo.</li> <li><strong>Formato Variado:</strong> Utilize diferentes formatos, como vídeos, infográficos e postagens de blog.</li></ul><h2>Monitoramento e Análise de Resultados</h2><p>Após implementar seu SEO, monitorar o desempenho é crucial. Considere:</p><ul> <li><strong>Google Analytics:</strong> Use para acompanhar o tráfego e o comportamento dos usuários no site.</li> <li><strong>Google Search Console:</strong> Monitore o desempenho de pesquisa e identifique problemas técnicos.</li> <li><strong>Ajustes Contínuos:</strong> Esteja preparado para ajustar sua estratégia com base nos resultados obtidos.</li></ul><h2>Ferramentas Úteis para SEO</h2><p>Existem várias ferramentas disponíveis que podem facilitar sua estratégia de SEO:</p><ul> <li><strong>SEMrush:</strong> Excelente para pesquisa de palavras-chave e análise de concorrência.</li> <li><strong>Ahrefs:</strong> Ótima para auditoria de site e backlinks.</li> <li><strong>Yoast SEO:</strong> Um plugin útil para otimização de SEO em sites WordPress.</li> <li><strong>Google Trends:</strong> Para acompanhar novas tendências e palavras-chave em alta.</li></ul><h2>Dicas para Melhorar o SEO</h2><p>Aqui estão algumas dicas práticas para otimizar seu site:</p><ul> <li><strong>Crie Conteúdo Regularmente:</strong> A consistência é chave para manter o interesse dos usuários.</li> <li><strong>Optimize para Voz:</strong> Com o aumento da busca por voz, ajuste suas palavras-chave para perguntas e frases.</li> <li><strong>Construa Sua Marca:</strong> Uma boa marca atrai mais links e tráfego.</li> <li><strong>Engajamento nas Redes Sociais:</strong> Aumente a interação para impulsionar o compartilhamento de conteúdo.</li></ul><h2>O Futuro do SEO</h2><p>O SEO está em constante evolução. Fique atento às tendências futuras, como:</p><ul> <li><strong>Inteligência Artificial:</strong> O uso de AI nas buscas deve crescer, tornando o conteúdo mais importante.</li> <li><strong>Resultados de Pesquisa Personalizados:</strong> Buscas personalizadas tornam a segmentação de público mais crítica.</li> <li><strong>Conteúdo Visual:</strong> A demanda por conteúdo visual deve continuar crescendo. Serão necessários vídeos e infográficos otimizados.</li></ul>...\"}"},{"content":"Você é um especialista em SEO, seja capaz de criar conteúdos poderosos e otimizados para SEO, que alcance as melhores posições no rank do Google.","role":"system"}]},"jsonOutput":true,"options":{}},"id":"8efa86f0-130d-4ca6-8f9d-c1d55c29c14c","name":"ChatGPT - Conteúdo","type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.6,"position":[1440,740],"credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"amount":15},"id":"c7eeed5a-fc4e-4003-9f44-7e5b78c4e1bd","name":"Aguarde","type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1280,740],"webhookId":"f81fd37f-c67e-4994-a936-3c3ccc700cd3"},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=Gere um objeto JSON com os seguintes itens para um post de blog, 'titulo', 'descricao', 'introducao' e 'subtitulos', com base na palavra chave '{{ $node['dados'].json[\"Palavra Chave Foco\"] }}' {{ $node['dados'].json[\"Título\"] ? ', título ' + $node['dados'].json[\"Título\"] : ''}} e nas regras específicas:\n\n- 'titulo': Crie um título que gere curiosidade e incentivará cliques nos resultados de busca, o título deve conter entre 45 e 63 caracteres, use a palavra chave de forma proeminente no início;\n\n- 'descricao': Crie uma descrição com até 20 palavras, use a palavra chave de forma proeminente no início;\n\n- 'introducao': Crie uma introdução para capturar a atenção do leitor, inclua palavras-chave relevante para SEO no primeiro parágrafo, evite criar títulos, use marcações HTML, considere readability com 70 – 80 de escore e 7th grade, leve em consideração os subtítulos criados;\n\n- 'subtitulos': Crie apenas 10 subtítulos distintos, evite enumerar os subtitulos;\n\n# Observações:\nNão altere o nome dos atributo;\nNão crie atributos;\nNão crie nenhuma intro nos resultados ou prefixo.\nEscreva no idioma português (brasileiro);\n\nExample Json Output: {\"titulo\":\"O que é SEO: Descubra Como Melhorar Seu Site Agora!\",\"descricao\":\"O que é SEO e como ele pode transformar o seu site?\",\"introducao\":\"<p>Você já se perguntou <strong>o que é SEO</strong> e por que é tão importante? Entender os conceitos de <em>otimização para mecanismos de busca</em> pode ser a chave para o sucesso online. Neste artigo, vamos explorar <strong>o que é SEO</strong>, seus benefícios e as melhores práticas para aplicar em seu site.</p>\",\"subtitulos\":[\"A Importância do SEO para Seu Negócio\",\"Principais Elementos do SEO\",\"Técnicas de SEO que Você Deve Conhecer\",\"Como Medir o Sucesso do SEO\"...]}"},{"content":"You are an SEO specialist with expertise in content creation.","role":"system"}]},"jsonOutput":true,"options":{}},"id":"cfe1f989-0a90-4868-bb9d-09c8e84b5777","name":"ChatGPT - SEO","type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.6,"position":[960,740],"credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}}],"connections":{"Ocorreu Erro":{"main":[[{"node":"variaveis_erro","type":"main","index":0}]]},"variaveis_erro":{"main":[[{"node":"Google Sheets - Status ERRO","type":"main","index":0}]]},"Google Sheets - Ler Palavras Chaves":{"main":[[{"node":"Google Sheets - Status Executando","type":"main","index":0}]]},"Executar":{"main":[[{"node":"variaveis","type":"main","index":0}]]},"Wordpress - Publicar Post":{"main":[[{"node":"Google Sheets - Status Publicado","type":"main","index":0}]]},"Dados SEO":{"main":[[{"node":"Baixar a imagem","type":"main","index":0}]]},"Wordpress - Salvar imagem em mídia":{"main":[[{"node":"Wordpress - Atualizar Atributos da imagem","type":"main","index":0}]]},"Wordpress - Atualizar Atributos da imagem":{"main":[[{"node":"Wordpress - Publicar Post","type":"main","index":0}]]},"Pega informações":{"main":[[{"node":"redimensionar","type":"main","index":0}]]},"redimensionar":{"main":[[{"node":"Wordpress - Salvar imagem em mídia","type":"main","index":0}]]},"Baixar a imagem":{"main":[[{"node":"Pega informações","type":"main","index":0}]]},"variaveis":{"main":[[{"node":"Google Sheets - Ler Palavras Chaves","type":"main","index":0}]]},"A cada 10 min":{"main":[[{"node":"variaveis","type":"main","index":0}]]},"dados":{"main":[[{"node":"ChatGPT - SEO","type":"main","index":0}]]},"ChatGPT - Conteúdo":{"main":[[{"node":"Dados SEO","type":"main","index":0}]]},"Google Sheets - Status Executando":{"main":[[{"node":"dados","type":"main","index":0}]]},"Aguarde":{"main":[[{"node":"ChatGPT - Conteúdo","type":"main","index":0}]]},"ChatGPT - SEO":{"main":[[{"node":"Aguarde","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"90228bf1-777e-4327-be28-89114b27af59","activeVersionId":"90228bf1-777e-4327-be28-89114b27af59","triggerCount":0,"shared":[{"updatedAt":"2025-05-26T17:18:13.432Z","createdAt":"2025-05-26T17:18:13.432Z","role":"workflow:owner","workflowId":"NrwFHUJZawhD7kxE","projectId":"BlSED80HESP48veq"}],"activeVersion":{"updatedAt":"2026-01-15T15:51:39.828Z","createdAt":"2026-01-15T15:51:39.828Z","versionId":"90228bf1-777e-4327-be28-89114b27af59","workflowId":"NrwFHUJZawhD7kxE","nodes":[{"parameters":{},"id":"4146d8b4-9888-4904-adaa-aee263f6fb52","name":"Executar","type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-180,740],"disabled":true},{"parameters":{"content":"## TROQUE OS DADOS","height":546.090684653281,"width":266.5667270958032},"id":"d0eae02f-71b8-4238-97b2-b54ed87c05f3","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[20,640]},{"parameters":{"method":"POST","url":"={{ $node['dados'].json[\"URL do Site\"] }}/wp-json/wp/v2/posts","authentication":"predefinedCredentialType","nodeCredentialType":"wordpressApi","sendBody":true,"bodyParameters":{"parameters":[{"name":"featured_media","value":"={{ $node['Wordpress - Salvar imagem em mídia'].json[\"id\"] }}"},{"name":"date","value":"={{ $node['dados'].json.DataHoraISO ? $node['dados'].json.DataHoraISO : null }}"},{"name":"excerpt","value":"={{ $node['Dados SEO'].json[\"descricao\"] }}"},{"name":"title","value":"={{ $node['Dados SEO'].json[\"titulo\"] }}"},{"name":"content","value":"={{ $node['Dados SEO'].json[\"introducao\"] }}<br/>\n{{ $node['Dados SEO'].json[\"conteudo\"] }}"},{"name":"slug","value":"={{ $node['dados'].json[\"Palavra Chave Foco\"].replaceAll(\" \",\"-\").toLowerCase().normalize('NFD').replace(/\\p{Mn}/gu, \"\") }}"},{"name":"categories","value":"={{ $node['dados'].json[\"Categoria\"] }}"},{"name":"status","value":"={{ $node['dados'].json[\"Status\"] }}"},{"name":"tags","value":"={{ $node['dados'].json[\"Tags\"] }}"}]},"options":{"redirect":{"redirect":{}}}},"id":"4c61865b-1f9f-4696-9776-a43556a8ff8d","name":"Wordpress - Publicar Post","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[2980,740],"retryOnFail":true,"maxTries":5,"waitBetweenTries":5000},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"={{ $node['variaveis'].json[\"Planilha ID\"] }}","mode":"id"},"sheetName":{"__rl":true,"value":"={{ $node['variaveis'].json[\"Planilha Aba\"] }}","mode":"id"},"columns":{"mappingMode":"defineBelow","value":{"Execução":"=PENDENTE","row_number":"={{ $node['Google Sheets - Ler Palavras Chaves'].json[\"row_number\"] }}","Processo":"PENDENTE","ID da Execução":"={{ $execution.id }}"},"matchingColumns":["row_number"],"schema":[{"id":"Data","displayName":"Data","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Hora","displayName":"Hora","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Palavra Chave Foco","displayName":"Palavra Chave Foco","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Título","displayName":"Título","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"ID da Categoria","displayName":"ID da Categoria","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Categoria","displayName":"Categoria","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"ID das Tags","displayName":"ID das Tags","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Imagem","displayName":"Imagem","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Status","displayName":"Status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Outlines","displayName":"Outlines","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Link","displayName":"Link","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Execução","displayName":"Execução","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"ID da Execução","displayName":"ID da Execução","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Posição","displayName":"Posição","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Concorrência","displayName":"Concorrência","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"readOnly":true,"removed":false}]},"options":{}},"id":"b44a693a-d7c8-44e1-bf86-445ea0c96e1d","name":"Google Sheets - Status Executando","type":"n8n-nodes-base.googleSheets","typeVersion":4,"position":[580,740],"retryOnFail":true,"maxTries":null,"waitBetweenTries":5000},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"={{ $node['variaveis_erro'].json[\"Planilha ID\"] }}","mode":"id"},"sheetName":{"__rl":true,"value":"={{ $node['variaveis_erro'].json[\"Planilha Aba\"] }}","mode":"id"},"columns":{"mappingMode":"defineBelow","value":{"Execução":"=ERRO","Link":"={{'=HYPERLINK(\"' + $node['variaveis_erro'].json['N8N URL'] + '/workflow/' +$node['Ocorreu Erro'].json.workflow.id + '/executions/' + $node['Ocorreu Erro'].json.execution.id + '\"' + '; \"' + $(\"Ocorreu Erro\").item.json.execution.error.message.replaceAll(\"\\\"\",\"*\") +'\")' }}","ID da Execução":"={{ $node['Ocorreu Erro'].json.execution.id }}"},"matchingColumns":["ID da Execução"],"schema":[{"id":"Data","displayName":"Data","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Hora","displayName":"Hora","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Palavra Chave Foco","displayName":"Palavra Chave Foco","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Título","displayName":"Título","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"ID da Categoria","displayName":"ID da Categoria","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Categoria","displayName":"Categoria","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"ID das Tags","displayName":"ID das Tags","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Imagem","displayName":"Imagem","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Status","displayName":"Status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Outlines","displayName":"Outlines","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Link","displayName":"Link","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Execução","displayName":"Execução","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"ID da Execução","displayName":"ID da Execução","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Posição","displayName":"Posição","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Concorrência","displayName":"Concorrência","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"readOnly":true,"removed":true}]},"options":{"cellFormat":"USER_ENTERED"}},"id":"9b999ff7-180f-4ad9-8a9f-8eb63263a428","name":"Google Sheets - Status ERRO","type":"n8n-nodes-base.googleSheets","typeVersion":4,"position":[460,940]},{"parameters":{},"id":"ef235a57-a154-45a2-a359-232fafb655ba","name":"Ocorreu Erro","type":"n8n-nodes-base.errorTrigger","typeVersion":1,"position":[-180,940]},{"parameters":{"rule":{"interval":[{"field":"minutes","minutesInterval":"={{ 10 }}"}]}},"id":"d5babfa2-1d86-4118-b361-e752ea641fca","name":"A cada 10 min","type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.1,"position":[-180,560],"disabled":true},{"parameters":{"keepOnlySet":true,"values":{"string":[{"name":"Planilha ID"},{"name":"Planilha Aba"},{"name":"N8N URL"}]},"options":{}},"id":"180b65be-76ee-4b40-b76d-c58cff6c9a10","name":"variaveis_erro","type":"n8n-nodes-base.set","typeVersion":2,"position":[100,940]},{"parameters":{"documentId":{"__rl":true,"value":"={{ $('variaveis').item.json[\"Planilha ID\"] }}","mode":"id"},"sheetName":{"__rl":true,"value":"={{ $('variaveis').item.json[\"Planilha Aba\"] }}","mode":"id"},"filtersUI":{"values":[{"lookupColumn":"=Execução"}]},"options":{"returnAllMatches":"returnFirstMatch"}},"id":"6b8aaffc-301c-4ed9-b4b1-9e469906d780","name":"Google Sheets - Ler Palavras Chaves","type":"n8n-nodes-base.googleSheets","typeVersion":4,"position":[360,740],"retryOnFail":true,"waitBetweenTries":5000},{"parameters":{"content":"## ChatGPT\nSelecione a **Credencial** da OpenAI\nSelecione o **Modelo** desejado\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÉ possível **personalizar o prompt**, apenas não altere os atributos\n\n❌ [**Erros Comuns da OpenAI**](https://trello.com/c/GnzFC29M/4-openai-erros)","height":370.7053142981799,"width":802.5811604308764},"id":"a5b7afb6-ca88-49fb-812a-227691a43782","name":"Sticky Note18","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[940,620]},{"parameters":{"content":"## Wordpress\nSelecione as credenciais do Wordpress\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n❌ [**Erros Comuns do Wordpress**](https://trello.com/c/vhORuZah/9-credencial-do-wordpress)","height":353.34114173487467,"width":589.4443731756315},"id":"efadee02-e66f-4414-93d2-59f18e46cab2","name":"Sticky Note31","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[2540,640]},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"={{ $node['variaveis'].json[\"Planilha ID\"] }}","mode":"id"},"sheetName":{"__rl":true,"value":"={{ $node['variaveis'].json[\"Planilha Aba\"] }}","mode":"id"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $node['Google Sheets - Ler Palavras Chaves'].json[\"row_number\"] }}","Título":"={{ $node['Dados SEO'].json[\"titulo\"] }}","Link":"={{ $node['Wordpress - Publicar Post'].json[\"link\"] }}","Execução":"CONCLUÍDO"},"matchingColumns":["row_number"],"schema":[{"id":"Data","displayName":"Data","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Hora","displayName":"Hora","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"IA","displayName":"IA","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Palavra Chave Foco","displayName":"Palavra Chave Foco","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Título","displayName":"Título","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"ID da Categoria","displayName":"ID da Categoria","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Categoria","displayName":"Categoria","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"ID das Tags","displayName":"ID das Tags","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Banco de imagem","displayName":"Banco de imagem","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Imagem","displayName":"Imagem","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Imagens nos Subtítulos?","displayName":"Imagens nos Subtítulos?","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Quantidade de Subtítulos","displayName":"Quantidade de Subtítulos","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Subtítulos","displayName":"Subtítulos","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Status","displayName":"Status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Link","displayName":"Link","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Execução","displayName":"Execução","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"ID da Execução","displayName":"ID da Execução","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Indexação","displayName":"Indexação","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Posição","displayName":"Posição","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Concorrência","displayName":"Concorrência","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"readOnly":true,"removed":false}]},"options":{"cellFormat":"USER_ENTERED"}},"id":"e7010049-6bad-4d43-ad9d-28f3c7f6a6bf","name":"Google Sheets - Status Publicado","type":"n8n-nodes-base.googleSheets","typeVersion":4.3,"position":[3260,740]},{"parameters":{"assignments":{"assignments":[{"id":"e24ac621-e2d6-46e7-82e6-846d0f5d27f3","name":"titulo","value":"={{ $node['dados'].json[\"Título\"] ? \n$node['dados'].json[\"Título\"] : $node['ChatGPT - SEO'].json[\"message\"][\"content\"][\"titulo\"] }}","type":"string"},{"id":"4502c6f0-9081-4b33-b62f-d5d5ac78b14a","name":"descricao","value":"={{ $node['ChatGPT - SEO'].json[\"message\"][\"content\"][\"descricao\"] }}","type":"string"},{"id":"58d1dd67-0841-4736-86fd-6c874b6c6320","name":"introducao","value":"={{ $node['ChatGPT - SEO'].json[\"message\"][\"content\"][\"introducao\"] }}","type":"string"},{"id":"7110b572-fe2f-4e37-86a9-5d4087e1e142","name":"conteudo","value":"={{ $node['ChatGPT - Conteúdo'].json[\"message\"][\"content\"][\"content\"] }}","type":"string"}]},"options":{"dotNotation":true}},"id":"516dd771-e24f-4a36-9e28-986c09d03628","name":"Dados SEO","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[1780,740]},{"parameters":{"method":"POST","url":"={{ $node['dados'].json[\"URL do Site\"] }}/wp-json/wp/v2/media/","authentication":"predefinedCredentialType","nodeCredentialType":"wordpressApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"cache-control","value":"no-cache"},{"name":"content-disposition","value":"=attachment; filename={{ $node['dados'].json[\"Palavra Chave Foco\"]\n.replaceAll(\" \", \"-\")\n.toLowerCase()\n.normalize('NFD')\n.replace(/\\p{Mn}/gu, \"\")\n.replace(/[^\\w\\-]/g, \"\") // Remove todos os caracteres não permitidos\n.slice(0, 100) }}.{{ $binary.data.fileExtension }}"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{"redirect":{"redirect":{}}}},"id":"6cc3ee96-f56c-4c55-92ed-904e8a167629","name":"Wordpress - Salvar imagem em mídia","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[2580,740],"retryOnFail":true,"maxTries":5,"waitBetweenTries":5000},{"parameters":{"method":"POST","url":"={{ $node['dados'].json[\"URL do Site\"] }}/wp-json/wp/v2/media/{{ $node['Wordpress - Salvar imagem em mídia'].json[\"id\"] }}","authentication":"predefinedCredentialType","nodeCredentialType":"wordpressApi","sendBody":true,"contentType":"form-urlencoded","bodyParameters":{"parameters":[{"name":"alt_text","value":"={{ $node['dados'].json[\"Palavra Chave Foco\"] }}"},{"name":"title","value":"={{ $node['dados'].json[\"Palavra Chave Foco\"] }}"},{"name":"description","value":"={{ $node['dados'].json[\"Palavra Chave Foco\"] }}"},{"name":"caption","value":"={{ $node['dados'].json[\"Palavra Chave Foco\"] }}"}]},"options":{"redirect":{"redirect":{}}}},"id":"b1283c6b-1430-414c-bf81-6bcb11c373a0","name":"Wordpress - Atualizar Atributos da imagem","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[2800,740],"retryOnFail":true,"maxTries":5,"waitBetweenTries":5000},{"parameters":{"content":"## Imagem","height":365.54884773411055,"width":526.7233807942426,"color":2},"id":"728193a5-2c9b-4fd2-a04f-167035bb2fe8","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1940,620]},{"parameters":{"operation":"information"},"id":"23918ce2-2c39-4fed-9f83-d377b4f517b4","name":"Pega informações","type":"n8n-nodes-base.editImage","typeVersion":1,"position":[2160,740]},{"parameters":{"operation":"resize","width":"={{ $json[\"size\"][\"width\"] > 1200 ? 1200 : $json[\"size\"][\"width\"] }}","height":"={{ $json[\"size\"][\"height\"] > 630 ? 630 : $json[\"size\"][\"height\"] }}","resizeOption":"onlyIfLarger","options":{"format":"jpeg"}},"id":"81efa9e2-b874-48bb-b5b1-5f367c69d6c5","name":"redimensionar","type":"n8n-nodes-base.editImage","typeVersion":1,"position":[2320,740]},{"parameters":{"url":"={{ $node['dados'].json[\"Imagem\"] }}","options":{}},"id":"9b0bdd85-aeae-433b-8d5d-552c5a5613ac","name":"Baixar a imagem","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[1980,740],"retryOnFail":true,"maxTries":5,"waitBetweenTries":5000},{"parameters":{"assignments":{"assignments":[{"id":"0bbc1389-0f6a-4ecf-a658-1a69c9f98132","name":"Planilha ID","value":"","type":"string"},{"id":"85634c7b-03de-4486-919c-7a04197c9839","name":"Planilha Aba","value":"","type":"string"},{"id":"2d3c9387-7ddf-408e-bde2-1f659f978ba8","name":"URL do Site","value":"","type":"string"}]},"options":{}},"id":"c95d6b86-2abf-4fbd-9533-9a69993e3df7","name":"variaveis","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[100,740]},{"parameters":{"content":"Configure o **Timezone** nos 3 pontinhos ao lado do save antes de ativar","height":220.4568364843337,"width":184.478415473571},"id":"ec7d65a5-c7c7-40f1-8f11-0158501dbfdf","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-220,480]},{"parameters":{"content":"## Google Sheets\nSelecione apenas a **Credencial** do Google Sheets\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n❌ [**Erros Comuns do Google Sheets**](https://trello.com/c/V7wmteYt/11-planilha-do-google-com-erro)","height":547.4601398832745,"width":424.9063344970598},"id":"ae6c85ab-bfce-4ba0-ac99-49f15d9f7ee3","name":"Sticky Note19","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[320,640]},{"parameters":{"content":"## Google Sheets\nSelecione a **Credencial** do Google Sheets\n\n\n\n\n\n\n\n\n","height":348.13107528448137,"width":314.37982969179706},"id":"ee8c28e8-d9b3-458c-bc34-e76aef9f938b","name":"Sticky Note20","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[3160,640]},{"parameters":{"jsCode":"// Defina os campos obrigatórios conforme suas especificações\nconst requiredFields = [\"Palavra Chave Foco\", \"Categoria\", \"Status\"];\n\n// Array para armazenar erros\nlet errors = [];\n\n// Verificar se o node \"Google Sheets - Ler Palavras Chaves\" existe e tem dados\nconst sheetData = $node[\"Google Sheets - Ler Palavras Chaves\"]?.json;\nif (!sheetData) {\n  errors.push('O node \"Google Sheets - Ler Palavras Chaves\" não foi encontrado ou não contém dados.');\n}\n\n// Verificar se o node \"variaveis\" existe e tem o campo \"URL do Site\"\nlet urlSite = $node[\"variaveis\"]?.json?.[\"URL do Site\"] || '';\nif (!urlSite) {\n  errors.push('O campo \"URL do Site\" é obrigatório e não foi fornecido pelo node \"variaveis\".');\n}\n\n// Adicionar log para depuração\nconsole.log(\"Valor fornecido para URL do Site:\", urlSite);\n\n// Remover espaços em branco nas extremidades e substituir \"http\" por \"https\"\nurlSite = urlSite.trim().replace(/^http:\\/\\//, 'https://');\n\n// Remover barra final se existir\nif (urlSite.endsWith('/')) {\n  urlSite = urlSite.slice(0, -1);\n}\n\n// Verificar se o URL é válido\nif (!urlSite.match(/^https:\\/\\/[^\\s/$.?#].[^\\s]*$/)) {\n  errors.push(`O campo \"URL do Site\" está malformado. Valor fornecido: \"${urlSite}\"`);\n}\n\n// **Função para Extrair IDs das Categorias e Tags**\nfunction extractIds(field) {\n  return field\n    .split(',')\n    .map(item => item.trim().split(' - ')[0])\n    .join(',');\n}\n\n// **Tratar Categoria e Tags**\nlet categoryIds = extractIds(sheetData[\"Categoria\"] || \"\");\nlet tagIds = extractIds(sheetData[\"Tags\"] || \"\");\n\nconsole.log(`ID das Categorias Normalizado: ${categoryIds}`);\nconsole.log(`ID das Tags Normalizado: ${tagIds}`);\n\n// **Tratar Status**\nconst statusMap = {\n  \"Rascunho\": \"draft\",\n  \"Publicado\": \"publish\",\n  \"Agendado\": \"future\",\n  \"Revisão pendente\": \"pending\",\n  \"Privado\": \"private\"\n};\n\nlet status = sheetData ? sheetData[\"Status\"] || \"\" : \"\";\nlet normalizedStatus = statusMap[status] || 'future';\n\n// Adicionar log para depuração do status\nconsole.log(`Status original: \"${status}\", Status normalizado: \"${normalizedStatus}\"`);\n\n// **Validar e Detectar Valores Invertidos de Data e Hora**\nlet data = sheetData ? sheetData[\"Data\"] || \"\" : \"\";\nlet hora = sheetData ? sheetData[\"Hora\"] || \"\" : \"\";\n\n// Verificar e corrigir se data e hora estão invertidas\nif (data.match(/^\\d{2}:\\d{2}$/) && hora.match(/^\\d{2}\\/\\d{2}\\/\\d{4}$/)) {\n  console.warn(\"Detectamos que os campos Data e Hora estão invertidos. Corrigindo...\");\n  [data, hora] = [hora, data];\n}\n\n// Verificar preenchimento condicional de data e hora\nif ((data && !hora) || (!data && hora)) {\n  errors.push(`Se um dos campos \"Data\" ou \"Hora\" for preenchido, ambos devem ser fornecidos.`);\n}\n\n// Converter para ISO apenas se ambos estiverem presentes e válidos\nlet isoDateTime = \"\";\nif (data && hora) {\n  if (!data.match(/^\\d{2}\\/\\d{2}\\/\\d{4}$/)) {\n    errors.push(`A data fornecida é inválida: \"${data}\". Use o formato DD/MM/AAAA.`);\n  }\n  if (!hora.match(/^\\d{2}:\\d{2}$/)) {\n    errors.push(`A hora fornecida é inválida: \"${hora}\". Use o formato hh:mm.`);\n  }\n\n  try {\n    let [day, month, year] = data.split('/');\n    let [hour, minute] = hora.split(':');\n\n    // Converter para números inteiros\n    hour = parseInt(hour, 10);\n    minute = parseInt(minute, 10);\n\n    // Ajuste de fuso horário (UTC+3)\n    hour = (hour + 3) % 24;\n\n    isoDateTime = `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}T` +\n                  `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}:00.000Z`;\n\n    console.log(`Data e hora convertidas para ISO: ${isoDateTime}`);\n  } catch (error) {\n    console.error(`Erro ao converter data e hora: ${error.message}`);\n    errors.push(`Erro ao converter data e hora.`);\n  }\n}\n\n// Adicionar os dados ao item final\nconst finalData = {\n  ...sheetData,\n  \"URL do Site\": urlSite,\n  \"Categoria\": categoryIds,\n  \"Tags\": tagIds,\n  \"Status\": normalizedStatus,\n  \"DataHoraISO\": isoDateTime\n};\n\n// Validar campos obrigatórios\nrequiredFields.forEach(field => {\n  if (!finalData[field] || finalData[field].toString().trim() === \"\") {\n    errors.push(`O campo \"${field}\" é obrigatório e está vazio.`);\n  }\n});\n\n// Validação de \"Palavra Chave Foco\" para não ser apenas espaços em branco\nif (finalData[\"Palavra Chave Foco\"] && finalData[\"Palavra Chave Foco\"].trim() === \"\") {\n  errors.push(`O campo \"Palavra Chave Foco\" não pode ser apenas espaços em branco.`);\n}\n\n// Se houver erros, registrar e lançar exceção com tratamento adequado\nif (errors.length > 0) {\n  const errorMessage = errors.map(e => e.trim()).join(\"\\n\");\n  console.error(\"Erros encontrados:\", errorMessage);\n  throw new Error(errorMessage);\n}\n\n// Se não houver erros, retornar os dados finais\nreturn finalData;\n"},"id":"958c0006-682d-43da-bb61-9f8dd8ce1701","name":"dados","type":"n8n-nodes-base.code","typeVersion":2,"position":[780,740]},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=Crie um post para blog baseado na palavra chave '{{ $node['dados'].json[\"Palavra Chave Foco\"] }}' com o título \"{{ $node['dados'].json[\"Título\"] ? $node['dados'].json[\"Título\"] : $node['ChatGPT - SEO'].json[\"message\"][\"content\"][\"titulo\"].replaceAll('\"','') }}\", seguindo as diretrizes:\n\n1 - Quando possível utilize marcações HTML como <p>, <strong>, <em>, <h3>, <ul> e <li>;\n2 - adicione títulos <h2> no início de cada subtítulo;\n3 - Considere readability com 70 – 80 de score e 7th grade;\n4 - evite criar conclusões, evite criar introdução;\n5 - desenvolva os subtítulos: {{ $('ChatGPT - SEO').item.json[\"message\"][\"content\"][\"subtitulos\"] }};\n6 - Espefique bem o conteúdo para no mínimo ter 2000 palavras;\n7 - Não inclua o título <h1> no post;\n8 - Utilize somente marcações HTML;\n\nEscreva em português (brasileiro);\n\nExample Output: {\"content\":\"<h2>O que é SEO?</h2><p>SEO, ou <strong>otimização para mecanismos de busca</strong>, é o processo de melhorar a visibilidade de um site nos resultados orgânicos dos motores de busca, como o Google. Quando alguém procura por informações, o Google usa algoritmos para determinar quais páginas devem ser mostradas. O objetivo do SEO é fazer com que seu site apareça nas primeiras posições desses resultados.</p><h2>Por que o SEO é Importante?</h2><p>O SEO é crucial por várias razões:</p><ul> <li><strong>Aumento de Tráfego:</strong> Quanto melhor seu posicionamento, mais visitantes você receberá.</li> <li><strong>Credibilidade:</strong> Sites que aparecem nas primeiras posições são vistos como mais confiáveis.</li> <li><strong>Melhor Experiência do Usuário:</strong> Uma boa estratégia de SEO leva a um site mais organizado e fácil de navegar.</li> <li><strong>Custo-efetividade:</strong> SEO oferece um retorno sobre investimento (ROI) melhor comparado a outros métodos de marketing.</li></ul><h2>Como Funciona o SEO?</h2><p>O SEO funciona em três áreas principais:</p><ul> <li><strong>SEO On-page:</strong> Foca na otimização de conteúdo e estrutura de um site.</li> <li><strong>SEO Off-page:</strong> Envolve ações fora do seu site que impactam sua posição, como backlinks.</li> <li><strong>SEO Técnico:</strong> Garante que seu site esteja tecnicamente em conformidade com as diretrizes dos motores de busca.</li></ul><h2>SEO On-page</h2><p>O SEO On-page é uma parte fundamental da sua estratégia. Isso inclui:</p><ul> <li><strong>Palavras-chave:</strong> Identifique palavras-chave relevantes que seu público-alvo está procurando.</li> <li><strong>Títulos e Meta Descrições:</strong> Utilize títulos cativantes e meta descrições que chamem a atenção.</li> <li><strong>URL Amigáveis:</strong> Faça URLs simples e diretas que incluam palavras-chave.</li> <li><strong>Conteúdo de Qualidade:</strong> Produza conteúdo original e útil que responda às perguntas dos usuários.</li> <li><strong>Imagens Otimizadas:</strong> Use imagens de qualidade com descrições e tags alt adequadas.</li></ul><h2>SEO Off-page</h2><p>No SEO Off-page, a construção de autoridade é a prioridade. As principais práticas incluem:</p><ul> <li><strong>Backlinks:</strong> Obtenha links de outros sites relevantes que apontem para o seu.</li> <li><strong>Redes Sociais:</strong> Compartilhe seu conteúdo em plataformas sociais para aumentar a visibilidade.</li> <li><strong>Guest Blogging:</strong> Escreva artigos para outros blogs como uma forma de divulgar seu site e conquistar links.</li> <li><strong>Comentário e Participação em Fóruns:</strong> Contribua em comunidades online relevantes para sua área de atuação.</li></ul><h2>SEO Técnico</h2><p>O SEO técnico garante que seu site funcione corretamente. Isso inclui:</p><ul> <li><strong>Velocidade do Site:</strong> Um site rápido melhora a experiência do usuário e o ranking.</li> <li><strong>Mobile Friendliness:</strong> Garanta que o site seja responsivo e funcione bem em dispositivos móveis.</li> <li><strong>Arquivo Robots.txt:</strong> Use este arquivo para controlar quais páginas podem ser indexadas pelos motores de busca.</li> <li><strong>Arquivo Sitemap:</strong> Crie um sitemap XML para facilitar a indexação do seu site.</li></ul><h2>Pesquisa de Palavras-chave</h2><p>A pesquisa de palavras-chave é essencial para o sucesso do SEO. Comece com:</p><ul> <li><strong>Identificar Seu Público:</strong> Conheça as necessidades e interesses do seu público-alvo.</li> <li><strong>Ferramentas de Pesquisa:</strong> Utilize ferramentas como Google Keyword Planner, SEMrush e Ahrefs para encontrar palavras-chave.</li> <li><strong>Long Tail Keywords:</strong> Foque em palavras-chave de cauda longa que tenham menos concorrência.</li></ul><h2>Conteúdo de Qualidade</h2><p>Produzir conteúdo valioso é fundamental para o SEO. Aqui estão algumas dicas:</p><ul> <li><strong>Resolva Problemas:</strong> Seu conteúdo deve responder a perguntas e solucionar problemas dos usuários.</li> <li><strong>Atualizações:</strong> Mantenha seu conteúdo atualizado para manter a relevância com o tempo.</li> <li><strong>Formato Variado:</strong> Utilize diferentes formatos, como vídeos, infográficos e postagens de blog.</li></ul><h2>Monitoramento e Análise de Resultados</h2><p>Após implementar seu SEO, monitorar o desempenho é crucial. Considere:</p><ul> <li><strong>Google Analytics:</strong> Use para acompanhar o tráfego e o comportamento dos usuários no site.</li> <li><strong>Google Search Console:</strong> Monitore o desempenho de pesquisa e identifique problemas técnicos.</li> <li><strong>Ajustes Contínuos:</strong> Esteja preparado para ajustar sua estratégia com base nos resultados obtidos.</li></ul><h2>Ferramentas Úteis para SEO</h2><p>Existem várias ferramentas disponíveis que podem facilitar sua estratégia de SEO:</p><ul> <li><strong>SEMrush:</strong> Excelente para pesquisa de palavras-chave e análise de concorrência.</li> <li><strong>Ahrefs:</strong> Ótima para auditoria de site e backlinks.</li> <li><strong>Yoast SEO:</strong> Um plugin útil para otimização de SEO em sites WordPress.</li> <li><strong>Google Trends:</strong> Para acompanhar novas tendências e palavras-chave em alta.</li></ul><h2>Dicas para Melhorar o SEO</h2><p>Aqui estão algumas dicas práticas para otimizar seu site:</p><ul> <li><strong>Crie Conteúdo Regularmente:</strong> A consistência é chave para manter o interesse dos usuários.</li> <li><strong>Optimize para Voz:</strong> Com o aumento da busca por voz, ajuste suas palavras-chave para perguntas e frases.</li> <li><strong>Construa Sua Marca:</strong> Uma boa marca atrai mais links e tráfego.</li> <li><strong>Engajamento nas Redes Sociais:</strong> Aumente a interação para impulsionar o compartilhamento de conteúdo.</li></ul><h2>O Futuro do SEO</h2><p>O SEO está em constante evolução. Fique atento às tendências futuras, como:</p><ul> <li><strong>Inteligência Artificial:</strong> O uso de AI nas buscas deve crescer, tornando o conteúdo mais importante.</li> <li><strong>Resultados de Pesquisa Personalizados:</strong> Buscas personalizadas tornam a segmentação de público mais crítica.</li> <li><strong>Conteúdo Visual:</strong> A demanda por conteúdo visual deve continuar crescendo. Serão necessários vídeos e infográficos otimizados.</li></ul>...\"}"},{"content":"Você é um especialista em SEO, seja capaz de criar conteúdos poderosos e otimizados para SEO, que alcance as melhores posições no rank do Google.","role":"system"}]},"jsonOutput":true,"options":{}},"id":"8efa86f0-130d-4ca6-8f9d-c1d55c29c14c","name":"ChatGPT - Conteúdo","type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.6,"position":[1440,740],"credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"amount":15},"id":"c7eeed5a-fc4e-4003-9f44-7e5b78c4e1bd","name":"Aguarde","type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1280,740],"webhookId":"f81fd37f-c67e-4994-a936-3c3ccc700cd3"},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"=Gere um objeto JSON com os seguintes itens para um post de blog, 'titulo', 'descricao', 'introducao' e 'subtitulos', com base na palavra chave '{{ $node['dados'].json[\"Palavra Chave Foco\"] }}' {{ $node['dados'].json[\"Título\"] ? ', título ' + $node['dados'].json[\"Título\"] : ''}} e nas regras específicas:\n\n- 'titulo': Crie um título que gere curiosidade e incentivará cliques nos resultados de busca, o título deve conter entre 45 e 63 caracteres, use a palavra chave de forma proeminente no início;\n\n- 'descricao': Crie uma descrição com até 20 palavras, use a palavra chave de forma proeminente no início;\n\n- 'introducao': Crie uma introdução para capturar a atenção do leitor, inclua palavras-chave relevante para SEO no primeiro parágrafo, evite criar títulos, use marcações HTML, considere readability com 70 – 80 de escore e 7th grade, leve em consideração os subtítulos criados;\n\n- 'subtitulos': Crie apenas 10 subtítulos distintos, evite enumerar os subtitulos;\n\n# Observações:\nNão altere o nome dos atributo;\nNão crie atributos;\nNão crie nenhuma intro nos resultados ou prefixo.\nEscreva no idioma português (brasileiro);\n\nExample Json Output: {\"titulo\":\"O que é SEO: Descubra Como Melhorar Seu Site Agora!\",\"descricao\":\"O que é SEO e como ele pode transformar o seu site?\",\"introducao\":\"<p>Você já se perguntou <strong>o que é SEO</strong> e por que é tão importante? Entender os conceitos de <em>otimização para mecanismos de busca</em> pode ser a chave para o sucesso online. Neste artigo, vamos explorar <strong>o que é SEO</strong>, seus benefícios e as melhores práticas para aplicar em seu site.</p>\",\"subtitulos\":[\"A Importância do SEO para Seu Negócio\",\"Principais Elementos do SEO\",\"Técnicas de SEO que Você Deve Conhecer\",\"Como Medir o Sucesso do SEO\"...]}"},{"content":"You are an SEO specialist with expertise in content creation.","role":"system"}]},"jsonOutput":true,"options":{}},"id":"cfe1f989-0a90-4868-bb9d-09c8e84b5777","name":"ChatGPT - SEO","type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.6,"position":[960,740],"credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}}],"connections":{"Ocorreu Erro":{"main":[[{"node":"variaveis_erro","type":"main","index":0}]]},"variaveis_erro":{"main":[[{"node":"Google Sheets - Status ERRO","type":"main","index":0}]]},"Google Sheets - Ler Palavras Chaves":{"main":[[{"node":"Google Sheets - Status Executando","type":"main","index":0}]]},"Executar":{"main":[[{"node":"variaveis","type":"main","index":0}]]},"Wordpress - Publicar Post":{"main":[[{"node":"Google Sheets - Status Publicado","type":"main","index":0}]]},"Dados SEO":{"main":[[{"node":"Baixar a imagem","type":"main","index":0}]]},"Wordpress - Salvar imagem em mídia":{"main":[[{"node":"Wordpress - Atualizar Atributos da imagem","type":"main","index":0}]]},"Wordpress - Atualizar Atributos da imagem":{"main":[[{"node":"Wordpress - Publicar Post","type":"main","index":0}]]},"Pega informações":{"main":[[{"node":"redimensionar","type":"main","index":0}]]},"redimensionar":{"main":[[{"node":"Wordpress - Salvar imagem em mídia","type":"main","index":0}]]},"Baixar a imagem":{"main":[[{"node":"Pega informações","type":"main","index":0}]]},"variaveis":{"main":[[{"node":"Google Sheets - Ler Palavras Chaves","type":"main","index":0}]]},"A cada 10 min":{"main":[[{"node":"variaveis","type":"main","index":0}]]},"dados":{"main":[[{"node":"ChatGPT - SEO","type":"main","index":0}]]},"ChatGPT - Conteúdo":{"main":[[{"node":"Dados SEO","type":"main","index":0}]]},"Google Sheets - Status Executando":{"main":[[{"node":"dados","type":"main","index":0}]]},"Aguarde":{"main":[[{"node":"ChatGPT - Conteúdo","type":"main","index":0}]]},"ChatGPT - SEO":{"main":[[{"node":"Aguarde","type":"main","index":0}]]}},"authors":"system migration","name":null,"description":null,"autosaved":false},"tags":[{"updatedAt":"2025-05-26T11:52:15.168Z","createdAt":"2025-05-26T11:52:15.168Z","id":"hOPLf9DaOSdzSnCT","name":"Robô de SEO"}]}