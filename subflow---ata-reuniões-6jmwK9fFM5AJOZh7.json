{"updatedAt":"2025-10-15T17:57:36.919Z","createdAt":"2025-10-13T11:55:34.855Z","id":"6jmwK9fFM5AJOZh7","name":"SubFlow - Ata Reuniões","active":true,"isArchived":false,"nodes":[{"parameters":{"model":{"__rl":true,"value":"gpt-4.1","mode":"list","cachedResultName":"gpt-4.1"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[1736,208],"id":"e1158d0d-f602-4fac-9344-f08bfd8abebd","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"schemaType":"manual","inputSchema":"{\n  \"type\": \"object\",\n  \"properties\": {\n    \"meta\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"data\": { \"type\": \"string\" },\n        \"horario\": { \"type\": \"string\" },\n        \"cliente\": { \"type\": \"string\" },\n        \"status_cliente\": { \"type\": \"string\", \"enum\": [\"Sim\", \"Não\", \"Prospect\"] }\n      },\n      \"required\": [\"data\", \"horario\", \"cliente\", \"status_cliente\"]\n    },\n    \"participantes\": {\n      \"type\": \"array\",\n      \"items\": { \"type\": \"string\" }\n    },\n    \"dados\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"endereco_residencial\": { \"type\": \"string\" },\n        \"endereco_comercial\": { \"type\": \"string\" },\n        \"data_aniversario_nascimento\": { \"type\": \"string\" }\n      }\n    },\n    \"conteudo\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"assunto_tratado\": { \"type\": \"string\" }\n      },\n      \"required\": [\"assunto_tratado\"]\n    },\n    \"agendamentos\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"item\": { \"type\": \"string\" },\n          \"responsavel\": { \"type\": \"string\" },\n          \"prazo\": { \"type\": \"string\" },\n          \"prioridade\": { \"type\": \"string\", \"enum\": [\"alta\", \"media\", \"baixa\"] }\n        },\n        \"required\": [\"item\", \"responsavel\", \"prazo\"]\n      }\n    },\n    \"observacao_executor\": { \"type\": \"string\" },\n    \"qualidade_extracao\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"campos_nao_informados\": {\n          \"type\": \"array\",\n          \"items\": { \"type\": \"string\" }\n        },\n        \"confianca\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"meta\": { \"type\": \"number\" },\n            \"participantes\": { \"type\": \"number\" },\n            \"conteudo\": { \"type\": \"number\" },\n            \"agendamentos\": { \"type\": \"number\" }\n          }\n        }\n      }\n    }\n  },\n  \"required\": [\n    \"meta\",\n    \"participantes\",\n    \"conteudo\",\n    \"agendamentos\",\n    \"observacao_executor\",\n    \"qualidade_extracao\"\n  ]\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[1864,208],"id":"b22c56be-b7b9-4334-818e-b1d769cfcfda","name":"Structured Output Parser"},{"parameters":{"resource":"folder","name":"={{ $now.format('dd-MM-yyyy') }}","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"value":"1F6tdXyLUeg43FVQrmCnvzTISyetbnaSJ","mode":"list","cachedResultName":"Transcrições Processadas","cachedResultUrl":"https://drive.google.com/drive/folders/1F6tdXyLUeg43FVQrmCnvzTISyetbnaSJ"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[1056,80],"id":"8404fc90-fe97-43ed-bcf3-70fe2117abb5","name":"Cria subpasta","credentials":{"googleDriveOAuth2Api":{"id":"14gGXod5FmPuZJ5h","name":"Google Drive account 2"}}},{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[384,108],"id":"3261e14a-ad50-41f2-a2da-195952270e77","name":"Pra cada reunião"},{"parameters":{"operation":"move","fileId":{"__rl":true,"value":"={{ $('Pra cada reunião').last().json.json.id }}","mode":"id"},"driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"value":"={{ $json.id }}","mode":"id"}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[1280,-16],"id":"aab30c20-523f-4d0f-9dfb-af3ef2f7d1ad","name":"Move arquivo","credentials":{"googleDriveOAuth2Api":{"id":"14gGXod5FmPuZJ5h","name":"Google Drive account 2"}}},{"parameters":{"operation":"get","documentURL":"={{ $('Pra cada reunião').last().json.json.id }}"},"type":"n8n-nodes-base.googleDocs","typeVersion":2,"position":[1504,-16],"id":"cade267b-b187-4ae2-a550-a5f0588a2259","name":"Get a document","credentials":{"googleDocsOAuth2Api":{"id":"l4JShKcRObBKsZ3G","name":"Google Docs ti01"}}},{"parameters":{"resource":"fileFolder","queryString":"={{ $now.format('dd-MM-yyyy') }}","returnAll":true,"filter":{"folderId":{"__rl":true,"value":"1F6tdXyLUeg43FVQrmCnvzTISyetbnaSJ","mode":"list","cachedResultName":"Transcrições Processadas","cachedResultUrl":"https://drive.google.com/drive/folders/1F6tdXyLUeg43FVQrmCnvzTISyetbnaSJ"},"whatToSearch":"folders"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[608,-16],"id":"77195409-dee9-41c3-aba8-066bdeb621a1","name":"Pesquisa subpasta","alwaysOutputData":true,"credentials":{"googleDriveOAuth2Api":{"id":"14gGXod5FmPuZJ5h","name":"Google Drive account 2"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"e32e26f5-3991-45a9-bdb3-67055d692530","leftValue":"={{ $('Pesquisa subpasta').item.json.id }}","rightValue":"","operator":{"type":"string","operation":"exists","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[832,-16],"id":"a59313e3-9f6a-47f6-a89d-d1488d6a915f","name":"Se existe subpasta"},{"parameters":{"promptType":"define","text":"={{ $json.content }}","hasOutputParser":true,"options":{"systemMessage":"=# PROMPT: AGENTE ESPECIALISTA EM GERAÇÃO DE ATAS DE REUNIÃO\n\n## FUNÇÃO\nVocê é um assistente especializado em transformar transcrições de reuniões (formato Tactiq.io ou similares) em atas de reunião estruturadas e profissionais.\n\n## ENTRADA QUE VOCÊ RECEBERÁ\nTranscrições de reuniões contendo:\n- Timestamps (formato 00:00)\n- Nome dos participantes seguido de dois pontos (:)\n- Conteúdo das falas\n- Possíveis highlights ou seções especiais\n\n## SUA TAREFA\nAnalisar a transcrição completa e extrair/organizar as seguintes informações em formato de tabela:\n\n### 1. INFORMAÇÕES BÁSICAS\n- **Data da reunião**: Extrair ou inferir da transcrição ou metadados\n- **Horário**: Extrair do primeiro timestamp ou horário mencionado\n- **Cliente**: Identificar o nome do cliente/empresa mencionado na reunião\n- **É cliente ou não**: Determinar se é cliente ativo, prospect ou não-cliente baseado no contexto\n\n### 2. PARTICIPANTES E DADOS\n- **Nomes dos participantes**: Listar todos os nomes identificados na transcrição\n- **Endereço residencial**: Extrair se mencionado\n- **Endereço comercial**: Extrair se mencionado\n- **Data de aniversário/nascimento**: Extrair se mencionado\n\n### 3. CONTEÚDO DA REUNIÃO\n- **Assunto tratado**: Resumir os principais tópicos discutidos (máximo 3-5 linhas)\n- **Agendamento**: Listar compromissos, tarefas ou próximos passos acordados (formato numerado)\n- **Observação importante para o Executor**: Destacar pontos críticos, decisões importantes ou ações urgentes\n\n## INSTRUÇÕES ESPECÍFICAS\n\n### Ao analisar a transcrição:\n1. Leia toda a transcrição antes de começar a extrair informações\n2. Identifique os participantes pelos nomes que aparecem antes dos dois pontos (:)\n3. Procure por menções a: datas, horários, endereços, tarefas, compromissos, decisões\n4. Ignore conversas paralelas ou off-topic que não agregam valor à ata\n5. Se alguma informação não estiver disponível, preencha com \"Não informado\"\n\n### Para o campo \"Assunto tratado\":\n- Faça um resumo objetivo e claro\n- Foque nos temas principais\n- Use linguagem profissional\n- Máximo de 5 linhas\n\n### Para o campo \"Agendamento\":\n- Liste apenas itens acionáveis (tarefas, compromissos, follow-ups)\n- Use formato: \"Item [número]. [Descrição] - [Responsável] - [Prazo]\"\n- Se não houver prazo definido, use \"A definir\"\n- Ordene por prioridade ou ordem cronológica\n\n### Para \"Observação importante para o Executor\":\n- Destaque decisões críticas\n- Mencione alertas ou riscos\n- Inclua informações que não podem ser esquecidas\n- Se não houver nada crítico, escreva \"Nenhuma observação crítica\"\n\n## FORMATO DE SAÍDA\n\nGere a ata no seguinte formato de tabela:\n\n```\n| Ata de reunião | Data: __/__/____ Horário: __:__ |\n|----------------|----------------------------------|\n| Cliente | [Nome do Cliente] |\n| É cliente ou não: | [Sim/Não/Prospect] |\n| Nomes dos participantes: | [Lista de nomes] |\n| Endereço residencial: | [Endereço ou \"Não informado\"] |\n| Endereço comercial: | [Endereço ou \"Não informado\"] |\n| Data de aniversário/nascimento: | [Data ou \"Não informado\"] |\n| Assunto tratado | [Resumo dos assuntos] |\n| Agendamento | 1. [Item 1]<br>2. [Item 2]<br>3. [Item 3]<br>4. [Item 4] |\n| Observação importante para o Executor | [Observações críticas] |\n```\n\n## BOAS PRÁTICAS\n- ✅ Seja objetivo e profissional\n- ✅ Mantenha a formatação consistente\n- ✅ Extraia apenas informações factuais\n- ✅ Use linguagem clara e direta\n- ✅ Priorize informações acionáveis\n- ❌ Não invente informações que não estão na transcrição\n- ❌ Não inclua conversas irrelevantes ou off-topic\n- ❌ Não use gírias ou linguagem informal\n\n## EXEMPLO DE PROCESSAMENTO\n\n**Input (Transcrição):**\n```\n00:00 João Silva: Boa tarde, pessoal. Hoje vamos falar sobre o projeto X.\n00:30 Maria Santos: Perfeito. Precisamos definir o prazo de entrega.\n01:00 João Silva: Sugiro até dia 15 de novembro. O cliente é a Empresa ABC.\n```\n\n**Output (Ata):**\n```\n| Ata de reunião | Data: 10/10/2025 Horário: 14:00 |\n|----------------|----------------------------------|\n| Cliente | Empresa ABC |\n| É cliente ou não: | Sim |\n| Nomes dos participantes: | João Silva, Maria Santos |\n| Endereço residencial: | Não informado |\n| Endereço comercial: | Não informado |\n| Data de aniversário/nascimento: | Não informado |\n| Assunto tratado | Discussão sobre o projeto X e definição de prazos de entrega para o cliente Empresa ABC. |\n| Agendamento | 1. Entrega do projeto X - João Silva - 15/11/2025 |\n| Observação importante para o Executor | Prazo crítico definido para 15/11. Cliente aguardando retorno. |\n```\n\n---\n\n**AGORA PROCESSE A TRANSCRIÇÃO FORNECIDA E GERE A ATA CORRESPONDENTE.**\n\nHOJE É {{ $now }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[1728,-16],"id":"742012f1-d537-4364-9c67-295c5ff03929","name":"Ata","retryOnFail":true},{"parameters":{"assignments":{"assignments":[{"id":"03fcb6ea-c7d8-4e32-9638-e0a405311817","name":"data","value":"={{ $('Start').all() }}","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-64,108],"id":"81195fb0-d7c6-435b-a3a6-607ff1f85af1","name":"Edit Fields","executeOnce":true},{"parameters":{"inputSource":"passthrough"},"id":"c977f361-36d3-4bb0-8a91-ab5e5b0d70ee","typeVersion":1.1,"name":"Start","type":"n8n-nodes-base.executeWorkflowTrigger","position":[-288,108]},{"parameters":{"fieldToSplitOut":"data","options":{}},"type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[160,108],"id":"d3388c00-bc80-4f76-8880-6207ed124cf2","name":"Split Out"},{"parameters":{"html":"<!doctype html>\n<html lang=\"pt-BR\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>{{ \n    (() => {\n      const o = $json.output ?? $json[0]?.output ?? {};\n      const d = o.meta?.data ?? '';\n      return `$('Split Out').item.json.json.name — ${d} ${h}`.trim();\n    })() \n  }}</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <style>\n    :root{\n      --white:#ffffff;\n      --soft:#f7f9fb;\n      --ink:#0f172a;\n      --muted:#6b7280;\n      --line:#e5e7eb;\n      --emerald:#10b981;\n      --emerald-600:#059669;\n      --emerald-50:#ecfdf5;\n    }\n    body{margin:0;padding:0;background:var(--soft);-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;}\n    table{border-collapse:collapse;}\n    img{border:0;line-height:100%;outline:none;text-decoration:none;}\n    .wrap{width:100%;padding:28px 12px;}\n    .card{max-width:720px;margin:0 auto;background:var(--white);border:1px solid var(--line);border-radius:16px;overflow:hidden;}\n    .bar{height:6px;background:linear-gradient(90deg,var(--emerald) 0%, var(--emerald-600) 100%);}\n    .header{padding:22px 24px 10px;border-bottom:1px solid var(--line);}\n    .title{margin:0;font:700 22px/1.3 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;}\n    .subtitle{margin:8px 0 0;font:500 13px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--muted);}\n    .meta{margin-top:10px;display:block;font:500 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--ink);}\n    .meta b{color:var(--emerald-600);}\n    .section{padding:18px 24px;}\n    .h2{margin:0 0 12px;font:700 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;letter-spacing:.6px;color:var(--ink);text-transform:uppercase;}\n    .p{margin:0;font:400 14px/1.65 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--ink);}\n    .muted{color:var(--muted);}\n    .chips{margin:-4px;}\n    .chip{display:inline-block;margin:4px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:var(--emerald-50);font:600 12px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--emerald-600);}\n    .panel{border:1px solid var(--line);border-radius:12px;overflow:hidden;}\n    .thead{background:#f8fafc;}\n    .th{padding:12px;font:700 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;text-align:left;border-bottom:1px solid var(--line);}\n    .td{padding:12px;font:400 13px/1.55 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;border-top:1px solid var(--line);vertical-align:top;}\n    .callout{padding:12px 14px;border:1px solid #d1fae5;background:var(--emerald-50);border-left:4px solid var(--emerald-600);border-radius:10px;}\n    .badge{display:inline-block;font:800 11px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--emerald-600);text-transform:uppercase;letter-spacing:.4px;margin-right:8px;}\n    .list{margin:6px 0 0 18px;padding:0;}\n    .list li{margin:4px 0;font:400 13px/1.55 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;}\n    .footer{padding:14px 24px 22px;border-top:1px solid var(--line);}\n    .tiny{margin:0;font:400 12px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--muted);}\n    a.btn{display:inline-block;text-decoration:none;background:var(--emerald);color:#052e2b;font:700 13px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;padding:12px 16px;border-radius:10px;border:1px solid var(--emerald-600);}\n    @media (max-width:640px){.header,.section,.footer{padding:16px}.title{font-size:20px}}\n  </style>\n</head>\n<body>\n  <table role=\"presentation\" class=\"wrap\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n    <tr>\n      <td align=\"center\">\n        <table role=\"presentation\" class=\"card\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n          <tr><td class=\"bar\"></td></tr>\n\n          <!-- Cabeçalho -->\n          <tr>\n            <td class=\"header\">\n              <h1 class=\"title\">ATA REUNIÂO - {{ $('Move arquivo').item.json.name }}</h1>\n              <p class=\"subtitle\">Resumo da reunião e próximos passos.</p>\n            </td>\n          </tr>\n\n          <!-- Participantes -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Participantes</h2>\n              <div class=\"chips\">\n                {{\n                  (() => {\n                    const o = $json.output ?? $json[0]?.output ?? {};\n                    const arr = Array.isArray(o.participantes) ? o.participantes : [];\n                    if (!arr.length) return '<span class=\"muted\">Nenhum participante informado.</span>';\n                    return arr.map(p => `<span class=\"chip\">${String(p)}</span>`).join('');\n                  })()\n                }}\n              </div>\n            </td>\n          </tr>\n\n          <!-- Assunto tratado -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Assunto tratado</h2>\n              <div class=\"callout\">\n                <span class=\"badge\">Pauta</span>\n                <span class=\"p\">\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      return (o.conteudo?.assunto_tratado ?? 'Não informado.');\n                    })()\n                  }}\n                </span>\n              </div>\n            </td>\n          </tr>\n\n          <!-- Agendamentos / Tarefas -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Agendamentos (Tarefas)</h2>\n              <table role=\"presentation\" class=\"panel\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n                <thead class=\"thead\">\n                  <tr>\n                    <th class=\"th\" style=\"width:50%\">Tarefa</th>\n                    <th class=\"th\" style=\"width:22%\">Responsável</th>\n                    <th class=\"th\" style=\"width:28%\">Prazo</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      const tasks = Array.isArray(o.agendamentos) ? o.agendamentos : [];\n                      if (!tasks.length) {\n                        return `<tr><td class=\"td\" colspan=\"3\"><span class=\"muted\">Nenhuma tarefa registrada.</span></td></tr>`;\n                      }\n                      return tasks.map(t => {\n                        const item = t.item ?? '—';\n                        const resp = t.responsavel ?? '—';\n                        const prazo = t.prazo ?? '—';\n                        return `<tr>\n                          <td class=\"td\">${item}</td>\n                          <td class=\"td\">${resp}</td>\n                          <td class=\"td\">${prazo}</td>\n                        </tr>`;\n                      }).join('');\n                    })()\n                  }}\n                </tbody>\n              </table>\n            </td>\n          </tr>\n\n          <!-- Observações -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Observações do executor</h2>\n              <div class=\"callout\">\n                <span class=\"badge\">Atenção</span>\n                <span class=\"p\">\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      return o.observacao_executor ?? '—';\n                    })()\n                  }}\n                </span>\n              </div>\n            </td>\n          </tr>\n\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>\n"},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[2080,-16],"id":"cb3885ae-2989-4738-8611-306564eff86d","name":"HTML1","disabled":true},{"parameters":{"fromEmail":"suporte@intellizapp.com.br","toEmail":"miqueiasbrandaogyn@gmail.com","subject":"=ATA REUNIÂO -  {{ $('Move arquivo').last().json.name }}","html":"=<!doctype html>\n<html lang=\"pt-BR\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>{{ \n    (() => {\n      const o = $json.output ?? $json[0]?.output ?? {};\n      const d = o.meta?.data ?? '';\n      return `$('Split Out').item.json.json.name — ${d} ${h}`.trim();\n    })() \n  }}</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <style>\n    :root{\n      --white:#ffffff;\n      --soft:#f7f9fb;\n      --ink:#0f172a;\n      --muted:#6b7280;\n      --line:#e5e7eb;\n      --emerald:#10b981;\n      --emerald-600:#059669;\n      --emerald-50:#ecfdf5;\n    }\n    body{margin:0;padding:0;background:var(--soft);-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;}\n    table{border-collapse:collapse;}\n    img{border:0;line-height:100%;outline:none;text-decoration:none;}\n    .wrap{width:100%;padding:28px 12px;}\n    .card{max-width:720px;margin:0 auto;background:var(--white);border:1px solid var(--line);border-radius:16px;overflow:hidden;}\n    .bar{height:6px;background:linear-gradient(90deg,var(--emerald) 0%, var(--emerald-600) 100%);}\n    .header{padding:22px 24px 10px;border-bottom:1px solid var(--line);}\n    .title{margin:0;font:700 22px/1.3 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;}\n    .subtitle{margin:8px 0 0;font:500 13px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--muted);}\n    .meta{margin-top:10px;display:block;font:500 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--ink);}\n    .meta b{color:var(--emerald-600);}\n    .section{padding:18px 24px;}\n    .h2{margin:0 0 12px;font:700 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;letter-spacing:.6px;color:var(--ink);text-transform:uppercase;}\n    .p{margin:0;font:400 14px/1.65 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--ink);}\n    .muted{color:var(--muted);}\n    .chips{margin:-4px;}\n    .chip{display:inline-block;margin:4px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:var(--emerald-50);font:600 12px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--emerald-600);}\n    .panel{border:1px solid var(--line);border-radius:12px;overflow:hidden;}\n    .thead{background:#f8fafc;}\n    .th{padding:12px;font:700 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;text-align:left;border-bottom:1px solid var(--line);}\n    .td{padding:12px;font:400 13px/1.55 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;border-top:1px solid var(--line);vertical-align:top;}\n    .callout{padding:12px 14px;border:1px solid #d1fae5;background:var(--emerald-50);border-left:4px solid var(--emerald-600);border-radius:10px;}\n    .badge{display:inline-block;font:800 11px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--emerald-600);text-transform:uppercase;letter-spacing:.4px;margin-right:8px;}\n    .list{margin:6px 0 0 18px;padding:0;}\n    .list li{margin:4px 0;font:400 13px/1.55 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;}\n    .footer{padding:14px 24px 22px;border-top:1px solid var(--line);}\n    .tiny{margin:0;font:400 12px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--muted);}\n    a.btn{display:inline-block;text-decoration:none;background:var(--emerald);color:#052e2b;font:700 13px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;padding:12px 16px;border-radius:10px;border:1px solid var(--emerald-600);}\n    @media (max-width:640px){.header,.section,.footer{padding:16px}.title{font-size:20px}}\n  </style>\n</head>\n<body>\n  <table role=\"presentation\" class=\"wrap\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n    <tr>\n      <td align=\"center\">\n        <table role=\"presentation\" class=\"card\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n          <tr><td class=\"bar\"></td></tr>\n\n          <!-- Cabeçalho -->\n          <tr>\n            <td class=\"header\">\n              <h1 class=\"title\">ATA REUNIÂO - {{ $('Move arquivo').item.json.name }}</h1>\n              <p class=\"subtitle\">Resumo da reunião e próximos passos.</p>\n            </td>\n          </tr>\n\n          <!-- Participantes -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Participantes</h2>\n              <div class=\"chips\">\n                {{\n                  (() => {\n                    const o = $json.output ?? $json[0]?.output ?? {};\n                    const arr = Array.isArray(o.participantes) ? o.participantes : [];\n                    if (!arr.length) return '<span class=\"muted\">Nenhum participante informado.</span>';\n                    return arr.map(p => `<span class=\"chip\">${String(p)}</span>`).join('');\n                  })()\n                }}\n              </div>\n            </td>\n          </tr>\n\n          <!-- Assunto tratado -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Assunto tratado</h2>\n              <div class=\"callout\">\n                <span class=\"badge\">Pauta</span>\n                <span class=\"p\">\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      return (o.conteudo?.assunto_tratado ?? 'Não informado.');\n                    })()\n                  }}\n                </span>\n              </div>\n            </td>\n          </tr>\n\n          <!-- Agendamentos / Tarefas -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Agendamentos (Tarefas)</h2>\n              <table role=\"presentation\" class=\"panel\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n                <thead class=\"thead\">\n                  <tr>\n                    <th class=\"th\" style=\"width:50%\">Tarefa</th>\n                    <th class=\"th\" style=\"width:22%\">Responsável</th>\n                    <th class=\"th\" style=\"width:28%\">Prazo</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      const tasks = Array.isArray(o.agendamentos) ? o.agendamentos : [];\n                      if (!tasks.length) {\n                        return `<tr><td class=\"td\" colspan=\"3\"><span class=\"muted\">Nenhuma tarefa registrada.</span></td></tr>`;\n                      }\n                      return tasks.map(t => {\n                        const item = t.item ?? '—';\n                        const resp = t.responsavel ?? '—';\n                        const prazo = t.prazo ?? '—';\n                        return `<tr>\n                          <td class=\"td\">${item}</td>\n                          <td class=\"td\">${resp}</td>\n                          <td class=\"td\">${prazo}</td>\n                        </tr>`;\n                      }).join('');\n                    })()\n                  }}\n                </tbody>\n              </table>\n            </td>\n          </tr>\n\n          <!-- Observações -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Observações do executor</h2>\n              <div class=\"callout\">\n                <span class=\"badge\">Atenção</span>\n                <span class=\"p\">\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      return o.observacao_executor ?? '—';\n                    })()\n                  }}\n                </span>\n              </div>\n            </td>\n          </tr>\n\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>","options":{"appendAttribution":false}},"type":"n8n-nodes-base.emailSend","typeVersion":2.1,"position":[2304,80],"id":"56d2b527-9212-4e51-8b15-2c4e77b3b948","name":"Send email","webhookId":"893a6093-aca6-42da-abb7-8c2cdf270914","credentials":{"smtp":{"id":"hBxoYPIoRvmCYfzF","name":"SMTP account"}}},{"parameters":{"fromEmail":"suporte@intellizapp.com.br","toEmail":"juridico06@camozziconsultoria.com.br","subject":"=ATA REUNIÂO -  {{ $('Move arquivo').last().json.name }}","html":"=<!doctype html>\n<html lang=\"pt-BR\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>{{ \n    (() => {\n      const o = $json.output ?? $json[0]?.output ?? {};\n      const d = o.meta?.data ?? '';\n      return `$('Split Out').item.json.json.name — ${d} ${h}`.trim();\n    })() \n  }}</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <style>\n    :root{\n      --white:#ffffff;\n      --soft:#f7f9fb;\n      --ink:#0f172a;\n      --muted:#6b7280;\n      --line:#e5e7eb;\n      --emerald:#10b981;\n      --emerald-600:#059669;\n      --emerald-50:#ecfdf5;\n    }\n    body{margin:0;padding:0;background:var(--soft);-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;}\n    table{border-collapse:collapse;}\n    img{border:0;line-height:100%;outline:none;text-decoration:none;}\n    .wrap{width:100%;padding:28px 12px;}\n    .card{max-width:720px;margin:0 auto;background:var(--white);border:1px solid var(--line);border-radius:16px;overflow:hidden;}\n    .bar{height:6px;background:linear-gradient(90deg,var(--emerald) 0%, var(--emerald-600) 100%);}\n    .header{padding:22px 24px 10px;border-bottom:1px solid var(--line);}\n    .title{margin:0;font:700 22px/1.3 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;}\n    .subtitle{margin:8px 0 0;font:500 13px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--muted);}\n    .meta{margin-top:10px;display:block;font:500 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--ink);}\n    .meta b{color:var(--emerald-600);}\n    .section{padding:18px 24px;}\n    .h2{margin:0 0 12px;font:700 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;letter-spacing:.6px;color:var(--ink);text-transform:uppercase;}\n    .p{margin:0;font:400 14px/1.65 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--ink);}\n    .muted{color:var(--muted);}\n    .chips{margin:-4px;}\n    .chip{display:inline-block;margin:4px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:var(--emerald-50);font:600 12px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--emerald-600);}\n    .panel{border:1px solid var(--line);border-radius:12px;overflow:hidden;}\n    .thead{background:#f8fafc;}\n    .th{padding:12px;font:700 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;text-align:left;border-bottom:1px solid var(--line);}\n    .td{padding:12px;font:400 13px/1.55 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;border-top:1px solid var(--line);vertical-align:top;}\n    .callout{padding:12px 14px;border:1px solid #d1fae5;background:var(--emerald-50);border-left:4px solid var(--emerald-600);border-radius:10px;}\n    .badge{display:inline-block;font:800 11px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--emerald-600);text-transform:uppercase;letter-spacing:.4px;margin-right:8px;}\n    .list{margin:6px 0 0 18px;padding:0;}\n    .list li{margin:4px 0;font:400 13px/1.55 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;}\n    .footer{padding:14px 24px 22px;border-top:1px solid var(--line);}\n    .tiny{margin:0;font:400 12px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--muted);}\n    a.btn{display:inline-block;text-decoration:none;background:var(--emerald);color:#052e2b;font:700 13px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;padding:12px 16px;border-radius:10px;border:1px solid var(--emerald-600);}\n    @media (max-width:640px){.header,.section,.footer{padding:16px}.title{font-size:20px}}\n  </style>\n</head>\n<body>\n  <table role=\"presentation\" class=\"wrap\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n    <tr>\n      <td align=\"center\">\n        <table role=\"presentation\" class=\"card\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n          <tr><td class=\"bar\"></td></tr>\n\n          <!-- Cabeçalho -->\n          <tr>\n            <td class=\"header\">\n              <h1 class=\"title\">ATA REUNIÂO - {{ $('Move arquivo').item.json.name }}</h1>\n              <p class=\"subtitle\">Resumo da reunião e próximos passos.</p>\n            </td>\n          </tr>\n\n          <!-- Participantes -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Participantes</h2>\n              <div class=\"chips\">\n                {{\n                  (() => {\n                    const o = $json.output ?? $json[0]?.output ?? {};\n                    const arr = Array.isArray(o.participantes) ? o.participantes : [];\n                    if (!arr.length) return '<span class=\"muted\">Nenhum participante informado.</span>';\n                    return arr.map(p => `<span class=\"chip\">${String(p)}</span>`).join('');\n                  })()\n                }}\n              </div>\n            </td>\n          </tr>\n\n          <!-- Assunto tratado -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Assunto tratado</h2>\n              <div class=\"callout\">\n                <span class=\"badge\">Pauta</span>\n                <span class=\"p\">\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      return (o.conteudo?.assunto_tratado ?? 'Não informado.');\n                    })()\n                  }}\n                </span>\n              </div>\n            </td>\n          </tr>\n\n          <!-- Agendamentos / Tarefas -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Agendamentos (Tarefas)</h2>\n              <table role=\"presentation\" class=\"panel\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n                <thead class=\"thead\">\n                  <tr>\n                    <th class=\"th\" style=\"width:50%\">Tarefa</th>\n                    <th class=\"th\" style=\"width:22%\">Responsável</th>\n                    <th class=\"th\" style=\"width:28%\">Prazo</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      const tasks = Array.isArray(o.agendamentos) ? o.agendamentos : [];\n                      if (!tasks.length) {\n                        return `<tr><td class=\"td\" colspan=\"3\"><span class=\"muted\">Nenhuma tarefa registrada.</span></td></tr>`;\n                      }\n                      return tasks.map(t => {\n                        const item = t.item ?? '—';\n                        const resp = t.responsavel ?? '—';\n                        const prazo = t.prazo ?? '—';\n                        return `<tr>\n                          <td class=\"td\">${item}</td>\n                          <td class=\"td\">${resp}</td>\n                          <td class=\"td\">${prazo}</td>\n                        </tr>`;\n                      }).join('');\n                    })()\n                  }}\n                </tbody>\n              </table>\n            </td>\n          </tr>\n\n          <!-- Observações -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Observações do executor</h2>\n              <div class=\"callout\">\n                <span class=\"badge\">Atenção</span>\n                <span class=\"p\">\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      return o.observacao_executor ?? '—';\n                    })()\n                  }}\n                </span>\n              </div>\n            </td>\n          </tr>\n\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>","options":{"appendAttribution":false}},"type":"n8n-nodes-base.emailSend","typeVersion":2.1,"position":[2304,-112],"id":"f121bd47-9911-4378-939f-2e639eafb892","name":"Send email1","webhookId":"893a6093-aca6-42da-abb7-8c2cdf270914","credentials":{"smtp":{"id":"hBxoYPIoRvmCYfzF","name":"SMTP account"}}},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[2528,80],"id":"ab7160a5-f0f6-4b90-a3f8-aa2cf3f01637","name":"Merge"}],"connections":{"Pra cada reunião":{"main":[[],[{"node":"Pesquisa subpasta","type":"main","index":0}]]},"Cria subpasta":{"main":[[{"node":"Move arquivo","type":"main","index":0}]]},"Move arquivo":{"main":[[{"node":"Get a document","type":"main","index":0}]]},"Pesquisa subpasta":{"main":[[{"node":"Se existe subpasta","type":"main","index":0}]]},"Se existe subpasta":{"main":[[{"node":"Move arquivo","type":"main","index":0}],[{"node":"Cria subpasta","type":"main","index":0}]]},"Get a document":{"main":[[{"node":"Ata","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Ata","type":"ai_languageModel","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"Ata","type":"ai_outputParser","index":0}]]},"Ata":{"main":[[{"node":"HTML1","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Split Out","type":"main","index":0}]]},"Start":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Split Out":{"main":[[{"node":"Pra cada reunião","type":"main","index":0}]]},"HTML1":{"main":[[{"node":"Send email","type":"main","index":0},{"node":"Send email1","type":"main","index":0}]]},"Send email":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Send email1":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Pra cada reunião","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"Start":[{"json":{"id":"1iVwnk00mjMp2s_EG4iT0sCbDgzr-8FHt5jg3GKov5Cw","name":"Rhaylla + C&D Blindagem Digital 10 jul"}}]},"versionId":"e1482c51-9fb7-4b4c-8b28-8d18083d2140","activeVersionId":"e1482c51-9fb7-4b4c-8b28-8d18083d2140","triggerCount":0,"shared":[{"updatedAt":"2025-10-13T11:55:34.855Z","createdAt":"2025-10-13T11:55:34.855Z","role":"workflow:owner","workflowId":"6jmwK9fFM5AJOZh7","projectId":"BlSED80HESP48veq"}],"activeVersion":{"updatedAt":"2025-12-01T11:56:54.083Z","createdAt":"2025-12-01T11:56:54.083Z","versionId":"e1482c51-9fb7-4b4c-8b28-8d18083d2140","workflowId":"6jmwK9fFM5AJOZh7","nodes":[{"parameters":{"model":{"__rl":true,"value":"gpt-4.1","mode":"list","cachedResultName":"gpt-4.1"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[1736,208],"id":"e1158d0d-f602-4fac-9344-f08bfd8abebd","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"bEHAhmQV1LUjIUXy","name":"OpenAi account"}}},{"parameters":{"schemaType":"manual","inputSchema":"{\n  \"type\": \"object\",\n  \"properties\": {\n    \"meta\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"data\": { \"type\": \"string\" },\n        \"horario\": { \"type\": \"string\" },\n        \"cliente\": { \"type\": \"string\" },\n        \"status_cliente\": { \"type\": \"string\", \"enum\": [\"Sim\", \"Não\", \"Prospect\"] }\n      },\n      \"required\": [\"data\", \"horario\", \"cliente\", \"status_cliente\"]\n    },\n    \"participantes\": {\n      \"type\": \"array\",\n      \"items\": { \"type\": \"string\" }\n    },\n    \"dados\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"endereco_residencial\": { \"type\": \"string\" },\n        \"endereco_comercial\": { \"type\": \"string\" },\n        \"data_aniversario_nascimento\": { \"type\": \"string\" }\n      }\n    },\n    \"conteudo\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"assunto_tratado\": { \"type\": \"string\" }\n      },\n      \"required\": [\"assunto_tratado\"]\n    },\n    \"agendamentos\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"item\": { \"type\": \"string\" },\n          \"responsavel\": { \"type\": \"string\" },\n          \"prazo\": { \"type\": \"string\" },\n          \"prioridade\": { \"type\": \"string\", \"enum\": [\"alta\", \"media\", \"baixa\"] }\n        },\n        \"required\": [\"item\", \"responsavel\", \"prazo\"]\n      }\n    },\n    \"observacao_executor\": { \"type\": \"string\" },\n    \"qualidade_extracao\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"campos_nao_informados\": {\n          \"type\": \"array\",\n          \"items\": { \"type\": \"string\" }\n        },\n        \"confianca\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"meta\": { \"type\": \"number\" },\n            \"participantes\": { \"type\": \"number\" },\n            \"conteudo\": { \"type\": \"number\" },\n            \"agendamentos\": { \"type\": \"number\" }\n          }\n        }\n      }\n    }\n  },\n  \"required\": [\n    \"meta\",\n    \"participantes\",\n    \"conteudo\",\n    \"agendamentos\",\n    \"observacao_executor\",\n    \"qualidade_extracao\"\n  ]\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[1864,208],"id":"b22c56be-b7b9-4334-818e-b1d769cfcfda","name":"Structured Output Parser"},{"parameters":{"resource":"folder","name":"={{ $now.format('dd-MM-yyyy') }}","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"value":"1F6tdXyLUeg43FVQrmCnvzTISyetbnaSJ","mode":"list","cachedResultName":"Transcrições Processadas","cachedResultUrl":"https://drive.google.com/drive/folders/1F6tdXyLUeg43FVQrmCnvzTISyetbnaSJ"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[1056,80],"id":"8404fc90-fe97-43ed-bcf3-70fe2117abb5","name":"Cria subpasta","credentials":{"googleDriveOAuth2Api":{"id":"14gGXod5FmPuZJ5h","name":"Google Drive account 2"}}},{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[384,108],"id":"3261e14a-ad50-41f2-a2da-195952270e77","name":"Pra cada reunião"},{"parameters":{"operation":"move","fileId":{"__rl":true,"value":"={{ $('Pra cada reunião').last().json.json.id }}","mode":"id"},"driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"value":"={{ $json.id }}","mode":"id"}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[1280,-16],"id":"aab30c20-523f-4d0f-9dfb-af3ef2f7d1ad","name":"Move arquivo","credentials":{"googleDriveOAuth2Api":{"id":"14gGXod5FmPuZJ5h","name":"Google Drive account 2"}}},{"parameters":{"operation":"get","documentURL":"={{ $('Pra cada reunião').last().json.json.id }}"},"type":"n8n-nodes-base.googleDocs","typeVersion":2,"position":[1504,-16],"id":"cade267b-b187-4ae2-a550-a5f0588a2259","name":"Get a document","credentials":{"googleDocsOAuth2Api":{"id":"l4JShKcRObBKsZ3G","name":"Google Docs ti01"}}},{"parameters":{"resource":"fileFolder","queryString":"={{ $now.format('dd-MM-yyyy') }}","returnAll":true,"filter":{"folderId":{"__rl":true,"value":"1F6tdXyLUeg43FVQrmCnvzTISyetbnaSJ","mode":"list","cachedResultName":"Transcrições Processadas","cachedResultUrl":"https://drive.google.com/drive/folders/1F6tdXyLUeg43FVQrmCnvzTISyetbnaSJ"},"whatToSearch":"folders"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[608,-16],"id":"77195409-dee9-41c3-aba8-066bdeb621a1","name":"Pesquisa subpasta","alwaysOutputData":true,"credentials":{"googleDriveOAuth2Api":{"id":"14gGXod5FmPuZJ5h","name":"Google Drive account 2"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"e32e26f5-3991-45a9-bdb3-67055d692530","leftValue":"={{ $('Pesquisa subpasta').item.json.id }}","rightValue":"","operator":{"type":"string","operation":"exists","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[832,-16],"id":"a59313e3-9f6a-47f6-a89d-d1488d6a915f","name":"Se existe subpasta"},{"parameters":{"promptType":"define","text":"={{ $json.content }}","hasOutputParser":true,"options":{"systemMessage":"=# PROMPT: AGENTE ESPECIALISTA EM GERAÇÃO DE ATAS DE REUNIÃO\n\n## FUNÇÃO\nVocê é um assistente especializado em transformar transcrições de reuniões (formato Tactiq.io ou similares) em atas de reunião estruturadas e profissionais.\n\n## ENTRADA QUE VOCÊ RECEBERÁ\nTranscrições de reuniões contendo:\n- Timestamps (formato 00:00)\n- Nome dos participantes seguido de dois pontos (:)\n- Conteúdo das falas\n- Possíveis highlights ou seções especiais\n\n## SUA TAREFA\nAnalisar a transcrição completa e extrair/organizar as seguintes informações em formato de tabela:\n\n### 1. INFORMAÇÕES BÁSICAS\n- **Data da reunião**: Extrair ou inferir da transcrição ou metadados\n- **Horário**: Extrair do primeiro timestamp ou horário mencionado\n- **Cliente**: Identificar o nome do cliente/empresa mencionado na reunião\n- **É cliente ou não**: Determinar se é cliente ativo, prospect ou não-cliente baseado no contexto\n\n### 2. PARTICIPANTES E DADOS\n- **Nomes dos participantes**: Listar todos os nomes identificados na transcrição\n- **Endereço residencial**: Extrair se mencionado\n- **Endereço comercial**: Extrair se mencionado\n- **Data de aniversário/nascimento**: Extrair se mencionado\n\n### 3. CONTEÚDO DA REUNIÃO\n- **Assunto tratado**: Resumir os principais tópicos discutidos (máximo 3-5 linhas)\n- **Agendamento**: Listar compromissos, tarefas ou próximos passos acordados (formato numerado)\n- **Observação importante para o Executor**: Destacar pontos críticos, decisões importantes ou ações urgentes\n\n## INSTRUÇÕES ESPECÍFICAS\n\n### Ao analisar a transcrição:\n1. Leia toda a transcrição antes de começar a extrair informações\n2. Identifique os participantes pelos nomes que aparecem antes dos dois pontos (:)\n3. Procure por menções a: datas, horários, endereços, tarefas, compromissos, decisões\n4. Ignore conversas paralelas ou off-topic que não agregam valor à ata\n5. Se alguma informação não estiver disponível, preencha com \"Não informado\"\n\n### Para o campo \"Assunto tratado\":\n- Faça um resumo objetivo e claro\n- Foque nos temas principais\n- Use linguagem profissional\n- Máximo de 5 linhas\n\n### Para o campo \"Agendamento\":\n- Liste apenas itens acionáveis (tarefas, compromissos, follow-ups)\n- Use formato: \"Item [número]. [Descrição] - [Responsável] - [Prazo]\"\n- Se não houver prazo definido, use \"A definir\"\n- Ordene por prioridade ou ordem cronológica\n\n### Para \"Observação importante para o Executor\":\n- Destaque decisões críticas\n- Mencione alertas ou riscos\n- Inclua informações que não podem ser esquecidas\n- Se não houver nada crítico, escreva \"Nenhuma observação crítica\"\n\n## FORMATO DE SAÍDA\n\nGere a ata no seguinte formato de tabela:\n\n```\n| Ata de reunião | Data: __/__/____ Horário: __:__ |\n|----------------|----------------------------------|\n| Cliente | [Nome do Cliente] |\n| É cliente ou não: | [Sim/Não/Prospect] |\n| Nomes dos participantes: | [Lista de nomes] |\n| Endereço residencial: | [Endereço ou \"Não informado\"] |\n| Endereço comercial: | [Endereço ou \"Não informado\"] |\n| Data de aniversário/nascimento: | [Data ou \"Não informado\"] |\n| Assunto tratado | [Resumo dos assuntos] |\n| Agendamento | 1. [Item 1]<br>2. [Item 2]<br>3. [Item 3]<br>4. [Item 4] |\n| Observação importante para o Executor | [Observações críticas] |\n```\n\n## BOAS PRÁTICAS\n- ✅ Seja objetivo e profissional\n- ✅ Mantenha a formatação consistente\n- ✅ Extraia apenas informações factuais\n- ✅ Use linguagem clara e direta\n- ✅ Priorize informações acionáveis\n- ❌ Não invente informações que não estão na transcrição\n- ❌ Não inclua conversas irrelevantes ou off-topic\n- ❌ Não use gírias ou linguagem informal\n\n## EXEMPLO DE PROCESSAMENTO\n\n**Input (Transcrição):**\n```\n00:00 João Silva: Boa tarde, pessoal. Hoje vamos falar sobre o projeto X.\n00:30 Maria Santos: Perfeito. Precisamos definir o prazo de entrega.\n01:00 João Silva: Sugiro até dia 15 de novembro. O cliente é a Empresa ABC.\n```\n\n**Output (Ata):**\n```\n| Ata de reunião | Data: 10/10/2025 Horário: 14:00 |\n|----------------|----------------------------------|\n| Cliente | Empresa ABC |\n| É cliente ou não: | Sim |\n| Nomes dos participantes: | João Silva, Maria Santos |\n| Endereço residencial: | Não informado |\n| Endereço comercial: | Não informado |\n| Data de aniversário/nascimento: | Não informado |\n| Assunto tratado | Discussão sobre o projeto X e definição de prazos de entrega para o cliente Empresa ABC. |\n| Agendamento | 1. Entrega do projeto X - João Silva - 15/11/2025 |\n| Observação importante para o Executor | Prazo crítico definido para 15/11. Cliente aguardando retorno. |\n```\n\n---\n\n**AGORA PROCESSE A TRANSCRIÇÃO FORNECIDA E GERE A ATA CORRESPONDENTE.**\n\nHOJE É {{ $now }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[1728,-16],"id":"742012f1-d537-4364-9c67-295c5ff03929","name":"Ata","retryOnFail":true},{"parameters":{"assignments":{"assignments":[{"id":"03fcb6ea-c7d8-4e32-9638-e0a405311817","name":"data","value":"={{ $('Start').all() }}","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-64,108],"id":"81195fb0-d7c6-435b-a3a6-607ff1f85af1","name":"Edit Fields","executeOnce":true},{"parameters":{"inputSource":"passthrough"},"id":"c977f361-36d3-4bb0-8a91-ab5e5b0d70ee","typeVersion":1.1,"name":"Start","type":"n8n-nodes-base.executeWorkflowTrigger","position":[-288,108]},{"parameters":{"fieldToSplitOut":"data","options":{}},"type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[160,108],"id":"d3388c00-bc80-4f76-8880-6207ed124cf2","name":"Split Out"},{"parameters":{"html":"<!doctype html>\n<html lang=\"pt-BR\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>{{ \n    (() => {\n      const o = $json.output ?? $json[0]?.output ?? {};\n      const d = o.meta?.data ?? '';\n      return `$('Split Out').item.json.json.name — ${d} ${h}`.trim();\n    })() \n  }}</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <style>\n    :root{\n      --white:#ffffff;\n      --soft:#f7f9fb;\n      --ink:#0f172a;\n      --muted:#6b7280;\n      --line:#e5e7eb;\n      --emerald:#10b981;\n      --emerald-600:#059669;\n      --emerald-50:#ecfdf5;\n    }\n    body{margin:0;padding:0;background:var(--soft);-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;}\n    table{border-collapse:collapse;}\n    img{border:0;line-height:100%;outline:none;text-decoration:none;}\n    .wrap{width:100%;padding:28px 12px;}\n    .card{max-width:720px;margin:0 auto;background:var(--white);border:1px solid var(--line);border-radius:16px;overflow:hidden;}\n    .bar{height:6px;background:linear-gradient(90deg,var(--emerald) 0%, var(--emerald-600) 100%);}\n    .header{padding:22px 24px 10px;border-bottom:1px solid var(--line);}\n    .title{margin:0;font:700 22px/1.3 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;}\n    .subtitle{margin:8px 0 0;font:500 13px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--muted);}\n    .meta{margin-top:10px;display:block;font:500 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--ink);}\n    .meta b{color:var(--emerald-600);}\n    .section{padding:18px 24px;}\n    .h2{margin:0 0 12px;font:700 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;letter-spacing:.6px;color:var(--ink);text-transform:uppercase;}\n    .p{margin:0;font:400 14px/1.65 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--ink);}\n    .muted{color:var(--muted);}\n    .chips{margin:-4px;}\n    .chip{display:inline-block;margin:4px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:var(--emerald-50);font:600 12px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--emerald-600);}\n    .panel{border:1px solid var(--line);border-radius:12px;overflow:hidden;}\n    .thead{background:#f8fafc;}\n    .th{padding:12px;font:700 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;text-align:left;border-bottom:1px solid var(--line);}\n    .td{padding:12px;font:400 13px/1.55 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;border-top:1px solid var(--line);vertical-align:top;}\n    .callout{padding:12px 14px;border:1px solid #d1fae5;background:var(--emerald-50);border-left:4px solid var(--emerald-600);border-radius:10px;}\n    .badge{display:inline-block;font:800 11px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--emerald-600);text-transform:uppercase;letter-spacing:.4px;margin-right:8px;}\n    .list{margin:6px 0 0 18px;padding:0;}\n    .list li{margin:4px 0;font:400 13px/1.55 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;}\n    .footer{padding:14px 24px 22px;border-top:1px solid var(--line);}\n    .tiny{margin:0;font:400 12px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--muted);}\n    a.btn{display:inline-block;text-decoration:none;background:var(--emerald);color:#052e2b;font:700 13px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;padding:12px 16px;border-radius:10px;border:1px solid var(--emerald-600);}\n    @media (max-width:640px){.header,.section,.footer{padding:16px}.title{font-size:20px}}\n  </style>\n</head>\n<body>\n  <table role=\"presentation\" class=\"wrap\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n    <tr>\n      <td align=\"center\">\n        <table role=\"presentation\" class=\"card\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n          <tr><td class=\"bar\"></td></tr>\n\n          <!-- Cabeçalho -->\n          <tr>\n            <td class=\"header\">\n              <h1 class=\"title\">ATA REUNIÂO - {{ $('Move arquivo').item.json.name }}</h1>\n              <p class=\"subtitle\">Resumo da reunião e próximos passos.</p>\n            </td>\n          </tr>\n\n          <!-- Participantes -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Participantes</h2>\n              <div class=\"chips\">\n                {{\n                  (() => {\n                    const o = $json.output ?? $json[0]?.output ?? {};\n                    const arr = Array.isArray(o.participantes) ? o.participantes : [];\n                    if (!arr.length) return '<span class=\"muted\">Nenhum participante informado.</span>';\n                    return arr.map(p => `<span class=\"chip\">${String(p)}</span>`).join('');\n                  })()\n                }}\n              </div>\n            </td>\n          </tr>\n\n          <!-- Assunto tratado -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Assunto tratado</h2>\n              <div class=\"callout\">\n                <span class=\"badge\">Pauta</span>\n                <span class=\"p\">\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      return (o.conteudo?.assunto_tratado ?? 'Não informado.');\n                    })()\n                  }}\n                </span>\n              </div>\n            </td>\n          </tr>\n\n          <!-- Agendamentos / Tarefas -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Agendamentos (Tarefas)</h2>\n              <table role=\"presentation\" class=\"panel\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n                <thead class=\"thead\">\n                  <tr>\n                    <th class=\"th\" style=\"width:50%\">Tarefa</th>\n                    <th class=\"th\" style=\"width:22%\">Responsável</th>\n                    <th class=\"th\" style=\"width:28%\">Prazo</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      const tasks = Array.isArray(o.agendamentos) ? o.agendamentos : [];\n                      if (!tasks.length) {\n                        return `<tr><td class=\"td\" colspan=\"3\"><span class=\"muted\">Nenhuma tarefa registrada.</span></td></tr>`;\n                      }\n                      return tasks.map(t => {\n                        const item = t.item ?? '—';\n                        const resp = t.responsavel ?? '—';\n                        const prazo = t.prazo ?? '—';\n                        return `<tr>\n                          <td class=\"td\">${item}</td>\n                          <td class=\"td\">${resp}</td>\n                          <td class=\"td\">${prazo}</td>\n                        </tr>`;\n                      }).join('');\n                    })()\n                  }}\n                </tbody>\n              </table>\n            </td>\n          </tr>\n\n          <!-- Observações -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Observações do executor</h2>\n              <div class=\"callout\">\n                <span class=\"badge\">Atenção</span>\n                <span class=\"p\">\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      return o.observacao_executor ?? '—';\n                    })()\n                  }}\n                </span>\n              </div>\n            </td>\n          </tr>\n\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>\n"},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[2080,-16],"id":"cb3885ae-2989-4738-8611-306564eff86d","name":"HTML1","disabled":true},{"parameters":{"fromEmail":"suporte@intellizapp.com.br","toEmail":"miqueiasbrandaogyn@gmail.com","subject":"=ATA REUNIÂO -  {{ $('Move arquivo').last().json.name }}","html":"=<!doctype html>\n<html lang=\"pt-BR\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>{{ \n    (() => {\n      const o = $json.output ?? $json[0]?.output ?? {};\n      const d = o.meta?.data ?? '';\n      return `$('Split Out').item.json.json.name — ${d} ${h}`.trim();\n    })() \n  }}</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <style>\n    :root{\n      --white:#ffffff;\n      --soft:#f7f9fb;\n      --ink:#0f172a;\n      --muted:#6b7280;\n      --line:#e5e7eb;\n      --emerald:#10b981;\n      --emerald-600:#059669;\n      --emerald-50:#ecfdf5;\n    }\n    body{margin:0;padding:0;background:var(--soft);-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;}\n    table{border-collapse:collapse;}\n    img{border:0;line-height:100%;outline:none;text-decoration:none;}\n    .wrap{width:100%;padding:28px 12px;}\n    .card{max-width:720px;margin:0 auto;background:var(--white);border:1px solid var(--line);border-radius:16px;overflow:hidden;}\n    .bar{height:6px;background:linear-gradient(90deg,var(--emerald) 0%, var(--emerald-600) 100%);}\n    .header{padding:22px 24px 10px;border-bottom:1px solid var(--line);}\n    .title{margin:0;font:700 22px/1.3 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;}\n    .subtitle{margin:8px 0 0;font:500 13px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--muted);}\n    .meta{margin-top:10px;display:block;font:500 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--ink);}\n    .meta b{color:var(--emerald-600);}\n    .section{padding:18px 24px;}\n    .h2{margin:0 0 12px;font:700 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;letter-spacing:.6px;color:var(--ink);text-transform:uppercase;}\n    .p{margin:0;font:400 14px/1.65 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--ink);}\n    .muted{color:var(--muted);}\n    .chips{margin:-4px;}\n    .chip{display:inline-block;margin:4px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:var(--emerald-50);font:600 12px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--emerald-600);}\n    .panel{border:1px solid var(--line);border-radius:12px;overflow:hidden;}\n    .thead{background:#f8fafc;}\n    .th{padding:12px;font:700 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;text-align:left;border-bottom:1px solid var(--line);}\n    .td{padding:12px;font:400 13px/1.55 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;border-top:1px solid var(--line);vertical-align:top;}\n    .callout{padding:12px 14px;border:1px solid #d1fae5;background:var(--emerald-50);border-left:4px solid var(--emerald-600);border-radius:10px;}\n    .badge{display:inline-block;font:800 11px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--emerald-600);text-transform:uppercase;letter-spacing:.4px;margin-right:8px;}\n    .list{margin:6px 0 0 18px;padding:0;}\n    .list li{margin:4px 0;font:400 13px/1.55 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;}\n    .footer{padding:14px 24px 22px;border-top:1px solid var(--line);}\n    .tiny{margin:0;font:400 12px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--muted);}\n    a.btn{display:inline-block;text-decoration:none;background:var(--emerald);color:#052e2b;font:700 13px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;padding:12px 16px;border-radius:10px;border:1px solid var(--emerald-600);}\n    @media (max-width:640px){.header,.section,.footer{padding:16px}.title{font-size:20px}}\n  </style>\n</head>\n<body>\n  <table role=\"presentation\" class=\"wrap\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n    <tr>\n      <td align=\"center\">\n        <table role=\"presentation\" class=\"card\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n          <tr><td class=\"bar\"></td></tr>\n\n          <!-- Cabeçalho -->\n          <tr>\n            <td class=\"header\">\n              <h1 class=\"title\">ATA REUNIÂO - {{ $('Move arquivo').item.json.name }}</h1>\n              <p class=\"subtitle\">Resumo da reunião e próximos passos.</p>\n            </td>\n          </tr>\n\n          <!-- Participantes -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Participantes</h2>\n              <div class=\"chips\">\n                {{\n                  (() => {\n                    const o = $json.output ?? $json[0]?.output ?? {};\n                    const arr = Array.isArray(o.participantes) ? o.participantes : [];\n                    if (!arr.length) return '<span class=\"muted\">Nenhum participante informado.</span>';\n                    return arr.map(p => `<span class=\"chip\">${String(p)}</span>`).join('');\n                  })()\n                }}\n              </div>\n            </td>\n          </tr>\n\n          <!-- Assunto tratado -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Assunto tratado</h2>\n              <div class=\"callout\">\n                <span class=\"badge\">Pauta</span>\n                <span class=\"p\">\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      return (o.conteudo?.assunto_tratado ?? 'Não informado.');\n                    })()\n                  }}\n                </span>\n              </div>\n            </td>\n          </tr>\n\n          <!-- Agendamentos / Tarefas -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Agendamentos (Tarefas)</h2>\n              <table role=\"presentation\" class=\"panel\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n                <thead class=\"thead\">\n                  <tr>\n                    <th class=\"th\" style=\"width:50%\">Tarefa</th>\n                    <th class=\"th\" style=\"width:22%\">Responsável</th>\n                    <th class=\"th\" style=\"width:28%\">Prazo</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      const tasks = Array.isArray(o.agendamentos) ? o.agendamentos : [];\n                      if (!tasks.length) {\n                        return `<tr><td class=\"td\" colspan=\"3\"><span class=\"muted\">Nenhuma tarefa registrada.</span></td></tr>`;\n                      }\n                      return tasks.map(t => {\n                        const item = t.item ?? '—';\n                        const resp = t.responsavel ?? '—';\n                        const prazo = t.prazo ?? '—';\n                        return `<tr>\n                          <td class=\"td\">${item}</td>\n                          <td class=\"td\">${resp}</td>\n                          <td class=\"td\">${prazo}</td>\n                        </tr>`;\n                      }).join('');\n                    })()\n                  }}\n                </tbody>\n              </table>\n            </td>\n          </tr>\n\n          <!-- Observações -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Observações do executor</h2>\n              <div class=\"callout\">\n                <span class=\"badge\">Atenção</span>\n                <span class=\"p\">\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      return o.observacao_executor ?? '—';\n                    })()\n                  }}\n                </span>\n              </div>\n            </td>\n          </tr>\n\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>","options":{"appendAttribution":false}},"type":"n8n-nodes-base.emailSend","typeVersion":2.1,"position":[2304,80],"id":"56d2b527-9212-4e51-8b15-2c4e77b3b948","name":"Send email","webhookId":"893a6093-aca6-42da-abb7-8c2cdf270914","credentials":{"smtp":{"id":"hBxoYPIoRvmCYfzF","name":"SMTP account"}}},{"parameters":{"fromEmail":"suporte@intellizapp.com.br","toEmail":"juridico06@camozziconsultoria.com.br","subject":"=ATA REUNIÂO -  {{ $('Move arquivo').last().json.name }}","html":"=<!doctype html>\n<html lang=\"pt-BR\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>{{ \n    (() => {\n      const o = $json.output ?? $json[0]?.output ?? {};\n      const d = o.meta?.data ?? '';\n      return `$('Split Out').item.json.json.name — ${d} ${h}`.trim();\n    })() \n  }}</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <style>\n    :root{\n      --white:#ffffff;\n      --soft:#f7f9fb;\n      --ink:#0f172a;\n      --muted:#6b7280;\n      --line:#e5e7eb;\n      --emerald:#10b981;\n      --emerald-600:#059669;\n      --emerald-50:#ecfdf5;\n    }\n    body{margin:0;padding:0;background:var(--soft);-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;}\n    table{border-collapse:collapse;}\n    img{border:0;line-height:100%;outline:none;text-decoration:none;}\n    .wrap{width:100%;padding:28px 12px;}\n    .card{max-width:720px;margin:0 auto;background:var(--white);border:1px solid var(--line);border-radius:16px;overflow:hidden;}\n    .bar{height:6px;background:linear-gradient(90deg,var(--emerald) 0%, var(--emerald-600) 100%);}\n    .header{padding:22px 24px 10px;border-bottom:1px solid var(--line);}\n    .title{margin:0;font:700 22px/1.3 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;}\n    .subtitle{margin:8px 0 0;font:500 13px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--muted);}\n    .meta{margin-top:10px;display:block;font:500 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--ink);}\n    .meta b{color:var(--emerald-600);}\n    .section{padding:18px 24px;}\n    .h2{margin:0 0 12px;font:700 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;letter-spacing:.6px;color:var(--ink);text-transform:uppercase;}\n    .p{margin:0;font:400 14px/1.65 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--ink);}\n    .muted{color:var(--muted);}\n    .chips{margin:-4px;}\n    .chip{display:inline-block;margin:4px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:var(--emerald-50);font:600 12px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--emerald-600);}\n    .panel{border:1px solid var(--line);border-radius:12px;overflow:hidden;}\n    .thead{background:#f8fafc;}\n    .th{padding:12px;font:700 12px/1.4 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;text-align:left;border-bottom:1px solid var(--line);}\n    .td{padding:12px;font:400 13px/1.55 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;border-top:1px solid var(--line);vertical-align:top;}\n    .callout{padding:12px 14px;border:1px solid #d1fae5;background:var(--emerald-50);border-left:4px solid var(--emerald-600);border-radius:10px;}\n    .badge{display:inline-block;font:800 11px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--emerald-600);text-transform:uppercase;letter-spacing:.4px;margin-right:8px;}\n    .list{margin:6px 0 0 18px;padding:0;}\n    .list li{margin:4px 0;font:400 13px/1.55 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:#111827;}\n    .footer{padding:14px 24px 22px;border-top:1px solid var(--line);}\n    .tiny{margin:0;font:400 12px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;color:var(--muted);}\n    a.btn{display:inline-block;text-decoration:none;background:var(--emerald);color:#052e2b;font:700 13px/1 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Helvetica,Arial;padding:12px 16px;border-radius:10px;border:1px solid var(--emerald-600);}\n    @media (max-width:640px){.header,.section,.footer{padding:16px}.title{font-size:20px}}\n  </style>\n</head>\n<body>\n  <table role=\"presentation\" class=\"wrap\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n    <tr>\n      <td align=\"center\">\n        <table role=\"presentation\" class=\"card\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n          <tr><td class=\"bar\"></td></tr>\n\n          <!-- Cabeçalho -->\n          <tr>\n            <td class=\"header\">\n              <h1 class=\"title\">ATA REUNIÂO - {{ $('Move arquivo').item.json.name }}</h1>\n              <p class=\"subtitle\">Resumo da reunião e próximos passos.</p>\n            </td>\n          </tr>\n\n          <!-- Participantes -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Participantes</h2>\n              <div class=\"chips\">\n                {{\n                  (() => {\n                    const o = $json.output ?? $json[0]?.output ?? {};\n                    const arr = Array.isArray(o.participantes) ? o.participantes : [];\n                    if (!arr.length) return '<span class=\"muted\">Nenhum participante informado.</span>';\n                    return arr.map(p => `<span class=\"chip\">${String(p)}</span>`).join('');\n                  })()\n                }}\n              </div>\n            </td>\n          </tr>\n\n          <!-- Assunto tratado -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Assunto tratado</h2>\n              <div class=\"callout\">\n                <span class=\"badge\">Pauta</span>\n                <span class=\"p\">\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      return (o.conteudo?.assunto_tratado ?? 'Não informado.');\n                    })()\n                  }}\n                </span>\n              </div>\n            </td>\n          </tr>\n\n          <!-- Agendamentos / Tarefas -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Agendamentos (Tarefas)</h2>\n              <table role=\"presentation\" class=\"panel\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n                <thead class=\"thead\">\n                  <tr>\n                    <th class=\"th\" style=\"width:50%\">Tarefa</th>\n                    <th class=\"th\" style=\"width:22%\">Responsável</th>\n                    <th class=\"th\" style=\"width:28%\">Prazo</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      const tasks = Array.isArray(o.agendamentos) ? o.agendamentos : [];\n                      if (!tasks.length) {\n                        return `<tr><td class=\"td\" colspan=\"3\"><span class=\"muted\">Nenhuma tarefa registrada.</span></td></tr>`;\n                      }\n                      return tasks.map(t => {\n                        const item = t.item ?? '—';\n                        const resp = t.responsavel ?? '—';\n                        const prazo = t.prazo ?? '—';\n                        return `<tr>\n                          <td class=\"td\">${item}</td>\n                          <td class=\"td\">${resp}</td>\n                          <td class=\"td\">${prazo}</td>\n                        </tr>`;\n                      }).join('');\n                    })()\n                  }}\n                </tbody>\n              </table>\n            </td>\n          </tr>\n\n          <!-- Observações -->\n          <tr>\n            <td class=\"section\">\n              <h2 class=\"h2\">Observações do executor</h2>\n              <div class=\"callout\">\n                <span class=\"badge\">Atenção</span>\n                <span class=\"p\">\n                  {{\n                    (() => {\n                      const o = $json.output ?? $json[0]?.output ?? {};\n                      return o.observacao_executor ?? '—';\n                    })()\n                  }}\n                </span>\n              </div>\n            </td>\n          </tr>\n\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>","options":{"appendAttribution":false}},"type":"n8n-nodes-base.emailSend","typeVersion":2.1,"position":[2304,-112],"id":"f121bd47-9911-4378-939f-2e639eafb892","name":"Send email1","webhookId":"893a6093-aca6-42da-abb7-8c2cdf270914","credentials":{"smtp":{"id":"hBxoYPIoRvmCYfzF","name":"SMTP account"}}},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[2528,80],"id":"ab7160a5-f0f6-4b90-a3f8-aa2cf3f01637","name":"Merge"}],"connections":{"Pra cada reunião":{"main":[[],[{"node":"Pesquisa subpasta","type":"main","index":0}]]},"Cria subpasta":{"main":[[{"node":"Move arquivo","type":"main","index":0}]]},"Move arquivo":{"main":[[{"node":"Get a document","type":"main","index":0}]]},"Pesquisa subpasta":{"main":[[{"node":"Se existe subpasta","type":"main","index":0}]]},"Se existe subpasta":{"main":[[{"node":"Move arquivo","type":"main","index":0}],[{"node":"Cria subpasta","type":"main","index":0}]]},"Get a document":{"main":[[{"node":"Ata","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Ata","type":"ai_languageModel","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"Ata","type":"ai_outputParser","index":0}]]},"Ata":{"main":[[{"node":"HTML1","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Split Out","type":"main","index":0}]]},"Start":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Split Out":{"main":[[{"node":"Pra cada reunião","type":"main","index":0}]]},"HTML1":{"main":[[{"node":"Send email","type":"main","index":0},{"node":"Send email1","type":"main","index":0}]]},"Send email":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Send email1":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Pra cada reunião","type":"main","index":0}]]}},"authors":"system migration","name":null,"description":null,"autosaved":false},"tags":[]}